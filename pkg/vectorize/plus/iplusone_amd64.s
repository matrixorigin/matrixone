// Code generated by command: go run iplusone_amd64.go -out iplusone_amd64.s. DO NOT EDIT.

#include "textflag.h"

// func iPlusOneAvx(x int64, y []int64, r []int64)
// Requires: AVX, AVX2, SSE2
TEXT Â·iPlusOneAvx(SB), NOSPLIT, $0-56
	MOVQ         x+0(FP), AX
	MOVQ         y_base+8(FP), CX
	MOVQ         r_base+32(FP), DX
	MOVQ         y_len+16(FP), BX
	MOVQ         AX, X0
	VPBROADCASTQ X0, Y0

blockloop:
	CMPQ    BX, $0x00000018
	JL      tailloop
	VPADDQ  (CX), Y0, Y1
	VPADDQ  32(CX), Y0, Y2
	VPADDQ  64(CX), Y0, Y3
	VPADDQ  96(CX), Y0, Y4
	VPADDQ  128(CX), Y0, Y5
	VPADDQ  160(CX), Y0, Y6
	VMOVDQU Y1, (DX)
	VMOVDQU Y2, 32(DX)
	VMOVDQU Y3, 64(DX)
	VMOVDQU Y4, 96(DX)
	VMOVDQU Y5, 128(DX)
	VMOVDQU Y6, 160(DX)
	ADDQ    $0x000000c0, CX
	ADDQ    $0x000000c0, DX
	SUBQ    $0x00000018, BX
	JMP     blockloop

tailloop:
	CMPQ    BX, $0x00000004
	JL      done
	VPADDQ  (CX), Y0, Y1
	VMOVDQU Y1, (DX)
	ADDQ    $0x00000020, CX
	ADDQ    $0x00000020, DX
	SUBQ    $0x00000004, BX
	JMP     tailloop

done:
	RET
