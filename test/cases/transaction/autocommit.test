-- @bvt:issue#3364
set autocommit=1;
create table t1(a int);
start transaction;
insert into t1 values(1);
start transaction;
select * from t1;
insert into t1 values(2);
select * from t1;
rollback;
select * from t1;
start transaction;
create table t2(a int);
insert into t2(1);
rollback;
select * from t2;
start transaction;
use autocommit;
start transactions;
drop table t1;
commit;
start transactions;
set autocommit=1;
commit;
start transactions;
show tables;
commit;
set autocommit=0;
drop table if exists t1;
create table t1(a int);
insert into t1 values(1);
rollback;
select * from t1;
insert into t1 values(1);
insert into t1 values(2);
set autocommit=1;
commit;
set autocommit=1;
set autocommit=0;
select * from t1;
insert into t1 values(3);
create table t2 (a int);
rollback;
select * from t2;
insert into t1 values(3);
use autocommit;
show tables;
commit;
-- @bvt:issue
