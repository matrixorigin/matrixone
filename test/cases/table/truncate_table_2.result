drop table if exists trun_table_01;
drop table if exists trun_table_02;
drop table if exists trun_table_03;
create table trun_table_01(clo1 tinyint AUTO_INCREMENT,clo2 smallint not null,clo3 int,clo4 bigint,clo5 tinyint unsigned,clo6 smallint unsigned,clo7 int unsigned,clo8 bigint unsigned,col9 float,col10 double,col11 varchar(255) default 'style',col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 json,primary key(clo3,col12),unique key uk1 (col16),key k1 (clo1));
insert into trun_table_01 values (1,-2,3,56,9,8,10,50,99.0,82.99,'yellllow','1999-11-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_01 values (2,-2,90,56,9,8,10,50,99.0,82.99,'yellllow','2011-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_01 values (3,-2,100,56,9,8,10,50,99.0,82.99,'yellllow','2021-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_01 values (4,-2,102,56,9,8,10,50,99.0,82.99,'yellllow','2022-10-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
2    -2    90    56    9    8    10    50    99.0    82.99    yellllow    2011-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
3    -2    100    56    9    8    10    50    99.0    82.99    yellllow    2021-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
4    -2    102    56    9    8    10    50    99.0    82.99    yellllow    2022-10-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
truncate table trun_table_01;
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
truncate table trun_table_01;
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
insert into trun_table_01(clo2 ,clo3 ,clo4,clo5,clo6,clo7,clo8 ,col9,col10,col11,col12,col13,col14,col15,col16,col17,col18) values (-2,3,56,9,8,10,50,99.0,82.99,'yellllow','1999-11-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_01(clo2 ,clo3 ,clo4,clo5,clo6,clo7,clo8 ,col9,col10,col11,col12,col13,col14,col15,col16,col17,col18) values (-2,90,56,9,8,10,50,99.0,82.99,'yellllow','2011-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
2    -2    90    56    9    8    10    50    99.0    82.99    yellllow    2011-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
update trun_table_01 set clo3=90 ,col12='2011-01-21' where clo1=1;
tae data: duplicate
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
2    -2    90    56    9    8    10    50    99.0    82.99    yellllow    2011-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
truncate  table trun_table_01;
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
delete from  trun_table_01 where clo1=2;
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
insert into trun_table_01(clo2,clo3,col12) select 36,118,'2002-12-03';
insert into trun_table_01(clo2,clo3,col12) select 45,108,'2012-02-23';
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    36    118    null    null    null    null    null    null    null    style    2002-12-03    null    null    null    null    null    null
2    45    108    null    null    null    null    null    null    null    style    2012-02-23    null    null    null    null    null    null
truncate table trun_table_01;
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
drop table trun_table_01;
create table trun_table_01(clo1 tinyint AUTO_INCREMENT,clo2 smallint not null,clo3 int,clo4 bigint,clo5 tinyint unsigned,clo6 smallint unsigned,clo7 int unsigned,clo8 bigint unsigned,col9 float,col10 double,col11 varchar(255) default 'style',col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 json,primary key(clo3,col12),unique key uk1 (col16),key k1 (clo1));
insert into trun_table_01 values (1,-2,3,56,9,8,10,50,99.0,82.99,'yellllow','1999-11-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
select * from trun_table_01;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
create temporary table trun_table_02(clo1 tinyint AUTO_INCREMENT,clo2 smallint not null,clo3 int,clo4 bigint,clo5 tinyint unsigned,clo6 smallint unsigned,clo7 int unsigned,clo8 bigint unsigned,col9 float,col10 double,col11 varchar(255) default 'style',col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 json,primary key(clo3,col12),unique key uk1 (col16),key k1 (clo1));
insert into trun_table_02 values (1,-2,3,56,9,8,10,50,99.0,82.99,'yellllow','1999-11-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_02 values (2,-2,90,56,9,8,10,50,99.0,82.99,'yellllow','2011-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_02 values (3,-2,100,56,9,8,10,50,99.0,82.99,'yellllow','2021-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_02 values (4,-2,102,56,9,8,10,50,99.0,82.99,'yellllow','2022-10-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
2    -2    90    56    9    8    10    50    99.0    82.99    yellllow    2011-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
3    -2    100    56    9    8    10    50    99.0    82.99    yellllow    2021-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
4    -2    102    56    9    8    10    50    99.0    82.99    yellllow    2022-10-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
truncate table trun_table_02;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
delete from trun_table_02 where clo1=1;
insert into trun_table_02 values (3,-2,100,56,9,8,10,50,99.0,82.99,'yellllow','2021-01-21','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
insert into trun_table_02 values (4,-2,102,56,9,8,10,50,99.0,82.99,'yellllow','2022-10-11','1999-11-11 12:00:00','2010-11-11 11:00:00.00',false,23.98430943,'tttext','{"a": "3","b": [0,1,2]}');
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
3    -2    100    56    9    8    10    50    99.0    82.99    yellllow    2021-01-21    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
4    -2    102    56    9    8    10    50    99.0    82.99    yellllow    2022-10-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
delete from trun_table_02 where clo1=3;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
4    -2    102    56    9    8    10    50    99.0    82.99    yellllow    2022-10-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
truncate table trun_table_02;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
insert into trun_table_02 select * from trun_table_01;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    3    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
update trun_table_02 set clo3=90 and col12='2011-01-21' where clo1=1;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
1    -2    0    56    9    8    10    50    99.0    82.99    yellllow    1999-11-11    1999-11-11 12:00:00    2010-11-11 11:00:00    false    23.98    tttext    {"a": "3", "b": [0, 1, 2]}
truncate table trun_table_02;
select * from trun_table_02;
clo1    clo2    clo3    clo4    clo5    clo6    clo7    clo8    col9    col10    col11    col12    col13    col14    col15    col16    col17    col18
show create table trun_table_02;
Table    Create Table
trun_table_02    CREATE TABLE `trun_table_02` (\n`clo1` TINYINT NOT NULL AUTO_INCREMENT,\n`clo2` SMALLINT NOT NULL,\n`clo3` INT DEFAULT NULL,\n`clo4` BIGINT DEFAULT NULL,\n`clo5` TINYINT UNSIGNED DEFAULT NULL,\n`clo6` SMALLINT UNSIGNED DEFAULT NULL,\n`clo7` INT UNSIGNED DEFAULT NULL,\n`clo8` BIGINT UNSIGNED DEFAULT NULL,\n`col9` FLOAT DEFAULT NULL,\n`col10` DOUBLE DEFAULT NULL,\n`col11` VARCHAR(255) DEFAULT 'style',\n`col12` DATE DEFAULT NULL,\n`col13` DATETIME DEFAULT NULL,\n`col14` TIMESTAMP DEFAULT NULL,\n`col15` BOOL DEFAULT NULL,\n`col16` DECIMAL(5,2) DEFAULT NULL,\n`col17` TEXT DEFAULT NULL,\n`col18` JSON DEFAULT NULL\n)
drop table trun_table_02;
create external table trun_table_03(clo1 tinyint AUTO_INCREMENT,clo2 smallint not null,clo3 int,clo4 bigint,clo5 tinyint unsigned,clo6 smallint unsigned,clo7 int unsigned,clo8 bigint unsigned,col9 float,col10 double,col11 varchar(255) default 'style',col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 json)infile{"filepath"='$resources/external_table_file/trun_table.csv'} fields terminated by ',' enclosed by "\'" lines terminated by '\n';
select * from  trun_table_03;
internal error: the input value ''{"a": "3"' is not json type for column 17
truncate table trun_table_03;
select * from  trun_table_03;
internal error: the input value ''{"a": "3"' is not json type for column 17
truncate table trun_table_03;
drop table trun_table_03;
create external table trun_table_03(clo1 tinyint AUTO_INCREMENT,clo2 smallint not null,clo3 int,clo4 bigint,clo5 tinyint unsigned,clo6 smallint unsigned,clo7 int unsigned,clo8 bigint unsigned,col9 float,col10 double,col11 varchar(255) default 'style',col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 json)infile{"filepath"='$resources/external_table_file/trun_table.csv'} fields terminated by ',' enclosed by "\'" lines terminated by '\n';
drop table trun_table_03;
