SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');
datediff(2007-12-31 23:59:59, 2007-12-30)
1
SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');
datediff(2010-11-30 23:59:59, 2010-12-31)
-31
SELECT DATEDIFF('1997-10-31','2010-12-31');
datediff(1997-10-31, 2010-12-31)
-4809
SELECT DATEDIFF('19991031','2010-12-31');
datediff(19991031, 2010-12-31)
-4079
SELECT DATEDIFF('99991031','2010-12-31');
datediff(99991031, 2010-12-31)
2917861
SELECT DATEDIFF('00011031','2010-12-31');
datediff(00011031, 2010-12-31)
-733833
SELECT DATEDIFF('00010131','2010-12-31');
datediff(00010131, 2010-12-31)
-734106
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL 1 DAY),'2010-12-31');
datediff(date_add(20201011, interval(1, day)), 2010-12-31)
3573
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL 1-1 DAY),'2010-12-31');
datediff(date_add(20201011, interval(1 - 1, day)), 2010-12-31)
3572
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL 1-1 DAY),NULL);
datediff(date_add(20201011, interval(1 - 1, day)), null)
null
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL SIN(10) DAY),NULL);
datediff(date_add(20201011, interval(sin(10), day)), null)
null
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL SIN(10) DAY),'20210110');
datediff(date_add(20201011, interval(sin(10), day)), 20210110)
-92
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL SIN(10) DAY),'2021'+'0110');
datediff(date_add(20201011, interval(sin(10), day)), 2021 + 0110)
-92
SELECT DATEDIFF(DATE_ADD('20201011',INTERVAL SIN(1) DAY),DATE_SUB(20201231,INTERVAL 1 YEAR));
datediff(date_add(20201011, interval(sin(1), day)), date_sub(20201231, interval(1, year)))
286
SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01');
timestampdiff(month, 2003-02-01, 2003-05-01)
2
SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01');
timestampdiff(year, 2002-05-01, 2001-01-01)
-1
SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');
timestampdiff(minute, 2003-02-01, 2003-05-01 12:05:55)
128885
SELECT TIMESTAMPDIFF(DAY,'2002-05-01','2001-01-01');
timestampdiff(day, 2002-05-01, 2001-01-01)
-485
SELECT TIMESTAMPDIFF(SECOND,'2002-05-01','2001-01-01');
timestampdiff(second, 2002-05-01, 2001-01-01)
-41904000
SELECT TIMESTAMPDIFF(HOUR,'2002-05-01','2001-01-01');
timestampdiff(hour, 2002-05-01, 2001-01-01)
-11640
SELECT TIMESTAMPDIFF(YEAR,'20020501','20010101');
timestampdiff(year, 20020501, 20010101)
-1
SELECT TIMESTAMPDIFF(YEAR,'20020501','2010-01-01');
timestampdiff(year, 20020501, 2010-01-01)
7
SELECT TIMESTAMPDIFF(YEAR,NULL,'2010-01-01');
timestampdiff(year, null, 2010-01-01)
null
SELECT TIMESTAMPDIFF(YEAR,'20020501',NULL);
timestampdiff(year, 20020501, null)
null
SELECT TIMESTAMPDIFF(MONTH,'200205'+'0'+'1','2010-01-01');
timestampdiff(month, 200205 + 0 + 1, 2010-01-01)
92
SELECT TIMESTAMPDIFF(MONTH,'200205'+'01','2010-01-01');
timestampdiff(month, 200205 + 01, 2010-01-01)
92
SELECT TIMESTAMPDIFF(MONTH,'200205'+'01',DATE_ADD('19990304',INTERVAL 0 MONTH));
timestampdiff(month, 200205 + 01, date_add(19990304, interval(0, month)))
-37
DROP TABLE IF EXISTS t;
CREATE TABLE t(
d1 DATE,
d2 DATETIME,
d3 TIMESTAMP
);
INSERT INTO t VALUES ('2010-01-01', '2010-01-01 00:01:02', '2010-01-01 19:19:19.121435');
INSERT INTO t VALUES ('2012-11-11', '2012-09-18 10:21:00', '2014-11-21 15:12:14.432432');
SELECT DATEDIFF(d1, '19700101'), TIMESTAMPDIFF(MONTH, d1, '1970-02-02') FROM t;
datediff(d1, 19700101)    timestampdiff(month, d1, 1970-02-02)
14610    -478
15655    -513
SELECT DATEDIFF(d2, '19701101'), TIMESTAMPDIFF(DAY, d2, '1970-02-02') FROM t;
datediff(d2, 19701101)    timestampdiff(day, d2, 1970-02-02)
14306    -14578
15297    -15569
SELECT DATEDIFF(d3, '19870911'), TIMESTAMPDIFF(SECOND, d3, '1970-02-02') FROM t;
datediff(d3, 19870911)    timestampdiff(second, d3, 1970-02-02)
8148    -1259608759
9933    -1413817934
SELECT DATEDIFF(d3, d1) FROM t;
datediff(d3, d1)
0
740
SELECT DATEDIFF(d2, d3) FROM t;
datediff(d2, d3)
0
-794
SELECT DATEDIFF(d1, d2) FROM t;
datediff(d1, d2)
0
54
DROP TABLE IF EXISTS t;
DROP TABLE IF EXISTS t1;
CREATE TABLE t(
id INT,
d1 DATE,
d2 DATETIME,
PRIMARY KEY(id)
);
CREATE TABLE t1(
id INT,
d3 TIMESTAMP,
PRIMARY KEY(id)
);
INSERT INTO t VALUES (1,'2012-11-11','2012-09-18 10:21:00'), (2,'2010-08-05','2022-05-18 20:21:20');
INSERT INTO t VALUES (3,'2212-01-23','2019-12-27 09:21:18'), (4,'2027-09-17','2027-09-28 10:11:10');
INSERT INTO t1 VALUES (1,'2019-12-27 09:21:18'), (2, '2010-02-21 06:55:41');
INSERT INTO t1 VALUES (3,'2020-11-17 15:11:56'), (4, '2012-07-11 17:31:11');
SELECT DATEDIFF(d1,d3) FROM t JOIN t1 ON t.id = t1.id;
datediff(d1, d3)
-2602
165
69827
5546
SELECT DATEDIFF(d2,d3) FROM t LEFT JOIN t1 ON t.id = t1.id;
datediff(d2, d3)
-2656
4469
-326
5557
SELECT DATEDIFF(d2,d3) FROM t RIGHT JOIN t1 ON t.id = t1.id;
datediff(d2, d3)
-2656
4469
-326
5557
SELECT DATEDIFF(d1,d3) FROM t,t1 WHERE t.id = t1.id;
datediff(d1, d3)
-2602
165
69827
5546
DROP TABLE IF EXISTS t;
DROP TABLE IF EXISTS t1;
CREATE TABLE t(
id INT,
d1 TIMESTAMP,
PRIMARY KEY(id)
);
CREATE TABLE t1(
id INT,
d3 TIMESTAMP,
PRIMARY KEY(id)
);
INSERT INTO t VALUES (1,'2019-12-27 09:21:18'), (2, '20100221065541');
INSERT INTO t VALUES (3,'2020-11-17 15:11:56'), (4, '2012-07-11 17:31:11');
INSERT INTO t1 VALUES (1,'20181017092118'), (2, '2008-08-01 06:55:41');
INSERT INTO t1 VALUES (3,'2021-02-21 15:11:56'), (4, '2019-07-01 17:31:11');
SELECT TIMESTAMPDIFF(MONTH,d1,d3) FROM t,t1 WHERE t.id = t1.id;
timestampdiff(month, d1, d3)
-14
-18
3
83
SELECT TIMESTAMPDIFF(YEAR,d3,d1) FROM t JOIN t1 ON t.id = t1.id;
timestampdiff(year, d3, d1)
1
1
0
-6
SELECT TIMESTAMPDIFF(DAY,d1,d3) FROM t LEFT JOIN t1 ON t.id = t1.id;
timestampdiff(day, d1, d3)
-436
-569
96
2546
SELECT TIMESTAMPDIFF(MINUTE,d3,d1) FROM t RIGHT JOIN t1 ON t.id <> t1.id;
timestampdiff(minute, d3, d1)
-4550545
1097630
-3295670
5997745
6467536
2074235
-608030
-5786416
-4531540
257270
-4921115
727060
SELECT TIMESTAMPDIFF(MONTH,d3,d1) FROM t RIGHT JOIN t1 ON t.id = t1.id;
timestampdiff(month, d3, d1)
14
18
-3
-83
DROP TABLE IF EXISTS t;
DROP TABLE IF EXISTS t1;
CREATE TABLE t(
id INT,
d1 DATE,
d2 DATETIME,
d3 TIMESTAMP,
PRIMARY KEY(id)
);
CREATE TABLE t1(
id INT,
str1 VARCHAR(30),
str2 CHAR(30),
PRIMARY KEY(id)
);
INSERT INTO t VALUES (1,'2012-11-11','2012-09-18 10:21:00','2012-09-18 10:21:00');
INSERT INTO t VALUES (2,'2012-01-01','2015-05-15 15:25:50','2015-05-15 15:25:05');
INSERT INTO t1 VALUES (1,'2012-11-11','2015-05-15 15:45:17');
INSERT INTO t1 VALUES (2,'2009-12-01','2015-08-05 16:45:17');
SELECT DATEDIFF(d1,str1), DATEDIFF(d1,str2) FROM t, t1;
datediff(d1, str1)    datediff(d1, str2)
0    -915
1076    -997
-315    -1230
761    -1312
SELECT DATEDIFF(d2,str1), DATEDIFF(d2,str2) FROM t, t1;
datediff(d2, str1)    datediff(d2, str2)
-54    -969
1022    -1051
915    0
1991    -82
SELECT DATEDIFF(d3,str1), DATEDIFF(d3,str2) FROM t, t1;
datediff(d3, str1)    datediff(d3, str2)
-54    -969
1022    -1051
915    0
1991    -82
SELECT TIMESTAMPDIFF(MONTH,d1,str1), TIMESTAMPDIFF(YEAR,d1,str2) FROM t, t1;
timestampdiff(month, d1, str1)    timestampdiff(year, d1, str2)
0    2
-35    2
10    3
-25    3
SELECT TIMESTAMPDIFF(SECOND,d2,str1), TIMESTAMPDIFF(DAY,d2,str2) FROM t, t1;
timestampdiff(second, d2, str1)    timestampdiff(day, d2, str2)
4628340    969
-88338060    1051
-79111550    0
-172077950    82
SELECT TIMESTAMPDIFF(MINUTE,d3,str1), TIMESTAMPDIFF(MONTH,d3,str2) FROM t, t1;
timestampdiff(minute, d3, str1)    timestampdiff(month, d3, str2)
77139    31
-1472301    34
-1318525    0
-2867965    2
SELECT DATEDIFF(d1,str1), DATEDIFF(d1,str2) FROM t JOIN t1 ON t.id = t1.id;
datediff(d1, str1)    datediff(d1, str2)
0    -915
761    -1312
SELECT DATEDIFF(d2,str1), DATEDIFF(d2,str2) FROM t LEFT JOIN t1 ON t.id = t1.id;
datediff(d2, str1)    datediff(d2, str2)
-54    -969
1991    -82
SELECT DATEDIFF(d3,str1), DATEDIFF(d3,str2) FROM t RIGHT JOIN t1 ON t.id = t1.id;
datediff(d3, str1)    datediff(d3, str2)
-54    -969
1991    -82
DROP TABLE IF EXISTS t;
DROP TABLE IF EXISTS t1;
CREATE TABLE t(
id INT,
d1 DATE,
d2 DATETIME,
d3 TIMESTAMP,
PRIMARY KEY(id)
);
CREATE TABLE t1(
id INT,
i1 INT,
i2 BIGINT,
PRIMARY KEY(id)
);
INSERT INTO t VALUES (1,'2012-11-11','2012-09-18 10:21:00','2012-09-18 10:21:00');
INSERT INTO t VALUES (2,'2012-01-01','2015-05-15 15:25:50','2015-05-15 15:25:05');
INSERT INTO t1 VALUES (1,1666096275,1609430400), (2,1546272000,1575129600);
SELECT DATEDIFF(d1,FROM_UNIXTIME(i1)), DATEDIFF(d1,FROM_UNIXTIME(i2)) FROM t,t1;
datediff(d1, from_unixtime(i1))    datediff(d1, from_unixtime(i2))
-3628    -2973
-2242    -2576
-3943    -3288
-2557    -2891
SELECT DATEDIFF(d2,FROM_UNIXTIME(i1)), DATEDIFF(d2,FROM_UNIXTIME(i2)) FROM t,t1;
datediff(d2, from_unixtime(i1))    datediff(d2, from_unixtime(i2))
-3682    -3027
-2296    -2630
-2713    -2058
-1327    -1661
SELECT DATEDIFF(d3,FROM_UNIXTIME(i1)), DATEDIFF(d3,FROM_UNIXTIME(i2)) FROM t,t1;
datediff(d3, from_unixtime(i1))    datediff(d3, from_unixtime(i2))
-3682    -3027
-2296    -2630
-2713    -2058
-1327    -1661
SELECT TIMESTAMPDIFF(MONTH,d1,FROM_UNIXTIME(i1)), TIMESTAMPDIFF(MONTH,d1,FROM_UNIXTIME(i2)) FROM t,t1;
timestampdiff(month, d1, from_unixtime(i1))    timestampdiff(month, d1, from_unixtime(i2))
119    97
73    84
129    108
84    95
SELECT TIMESTAMPDIFF(MONTH,d2,FROM_UNIXTIME(i1)), TIMESTAMPDIFF(MONTH,d2,FROM_UNIXTIME(i2)) FROM t,t1;
timestampdiff(month, d2, from_unixtime(i1))    timestampdiff(month, d2, from_unixtime(i2))
120    99
75    86
89    67
43    54
SELECT TIMESTAMPDIFF(MONTH,d3,FROM_UNIXTIME(i1)), TIMESTAMPDIFF(MONTH,d3,FROM_UNIXTIME(i2)) FROM t,t1;
timestampdiff(month, d3, from_unixtime(i1))    timestampdiff(month, d3, from_unixtime(i2))
120    99
75    86
89    67
43    54
DROP TABLE IF EXISTS t;
CREATE TABLE t(
id INT,
i1 INT,
PRIMARY KEY(id)
);
INSERT INTO t SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30'), DATEDIFF('2007-11-11 23:59:59','2007-12-30');
INSERT INTO t SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01'), TIMESTAMPDIFF(YEAR,'2010-02-01','2003-05-01');
[unknown result because it is related to issue#5723]
SELECT * FROM t;
id    i1
1    -49
