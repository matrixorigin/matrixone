drop table if exists t1;
create table t1 (a int, b bit(10));
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) DEFAULT NULL
)
desc t1;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
a  Â¦  INT(32)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
b  Â¦  BIT(10)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦  
insert into t1 values (0, false);
insert into t1 values (1, true);
insert into t1 values (2, 0x2);
insert into t1 values (3, 0b11);
insert into t1 values (4, x'04');
insert into t1 values (5, b'101');
insert into t1 values (6, 'a');
insert into t1 values (6, 'ab');  -- error, data too long, bit_len('ab') = 16 > 10
invalid input: data too long, type width = 10, val = 110000101100010
insert into t1 values (7, 7.4999);  -- round(7.4999) = 7
insert into t1 values (8, 7.5);  -- round(7.5) = 8
insert into t1 values (9, 9);
insert into t1 values (10, 10);
insert into t1 values (10, 10);
insert into t1 values (1023, 0x3ff);
insert into t1 values (1024, 0x4ff);  -- error, data too long, bit_len(0x4ff) = 11 > 10
invalid input: data too long, type width = 10, val = 10011111111
select * from t1;
â¤ a[4,32,0]  Â¦  b[-7,10,0]  ğ„€
0  Â¦  0  ğ„€
1  Â¦  1  ğ„€
2  Â¦  2  ğ„€
3  Â¦  3  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
6  Â¦  97  ğ„€
7  Â¦  7  ğ„€
8  Â¦  8  ğ„€
9  Â¦  9  ğ„€
10  Â¦  10  ğ„€
10  Â¦  10  ğ„€
1023  Â¦  1023
update t1 set b = 6 where b = cast('a' as bit(10));
select * from t1;
â¤ a[4,32,0]  Â¦  b[-7,10,0]  ğ„€
0  Â¦  0  ğ„€
1  Â¦  1  ğ„€
2  Â¦  2  ğ„€
3  Â¦  3  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
7  Â¦  7  ğ„€
8  Â¦  8  ğ„€
9  Â¦  9  ğ„€
10  Â¦  10  ğ„€
10  Â¦  10  ğ„€
1023  Â¦  1023  ğ„€
6  Â¦  6
select * from t1 where b > 3 order by b desc;
â¤ a[4,32,0]  Â¦  b[-7,10,0]  ğ„€
1023  Â¦  1023  ğ„€
10  Â¦  10  ğ„€
10  Â¦  10  ğ„€
9  Â¦  9  ğ„€
8  Â¦  8  ğ„€
7  Â¦  7  ğ„€
6  Â¦  6  ğ„€
5  Â¦  5  ğ„€
4  Â¦  4
select sum(a), cast(b as unsigned) from t1 group by b having b > 3;
â¤ sum(a)[-5,64,0]  Â¦  cast(b as unsigned)[-5,64,0]  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
7  Â¦  7  ğ„€
8  Â¦  8  ğ„€
9  Â¦  9  ğ„€
20  Â¦  10  ğ„€
1023  Â¦  1023  ğ„€
6  Â¦  6
delete from t1 where b >= 7 and b <= 10;
select * from t1;
â¤ a[4,32,0]  Â¦  b[-7,10,0]  ğ„€
0  Â¦  0  ğ„€
1  Â¦  1  ğ„€
2  Â¦  2  ğ„€
3  Â¦  3  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
1023  Â¦  1023  ğ„€
6  Â¦  6
select cast(b as int) from t1;
â¤ cast(b as int)[4,32,0]  ğ„€
0  ğ„€
1  ğ„€
2  ğ„€
3  ğ„€
4  ğ„€
5  ğ„€
1023  ğ„€
6
select count(b) from t1;
â¤ count(b)[-5,64,0]  ğ„€
8
select sum(b) from t1;
â¤ sum(b)[-5,64,0]  ğ„€
1044
select min(b) from t1;
â¤ min(b)[-7,10,0]  ğ„€
0
select max(b) from t1;
â¤ max(b)[-7,10,0]  ğ„€
1023
select avg(b) from t1;
â¤ avg(b)[8,54,0]  ğ„€
130.5
select median(b) from t1;
â¤ median(b)[8,54,0]  ğ„€
3.5
select var_pop(b) from t1;
â¤ var_pop(b)[8,54,0]  ğ„€
113797.25
select stddev_pop(b) from t1;
â¤ stddev_pop(b)[8,54,0]  ğ„€
337.33847986851424
ALTER TABLE t1 ADD c BIT(10) DEFAULT 0x1;
select * from t1;
â¤ a[4,32,0]  Â¦  b[-7,10,0]  Â¦  c[-7,10,0]  ğ„€
0  Â¦  0  Â¦  1  ğ„€
1  Â¦  1  Â¦  1  ğ„€
2  Â¦  2  Â¦  1  ğ„€
3  Â¦  3  Â¦  1  ğ„€
4  Â¦  4  Â¦  1  ğ„€
5  Â¦  5  Â¦  1  ğ„€
1023  Â¦  1023  Â¦  1  ğ„€
6  Â¦  6  Â¦  1
ALTER TABLE t1 ADD INDEX (c);
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) DEFAULT NULL,
  `c` bit(10) DEFAULT 0x1,
  KEY `c` (`c`)
)
ALTER TABLE t1 ADD UNIQUE (b);
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) DEFAULT NULL,
  `c` bit(10) DEFAULT 0x1,
  KEY `c` (`c`),
  UNIQUE KEY `b` (`b`)
)
ALTER TABLE t1 ADD PRIMARY KEY (b);
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) NOT NULL,
  `c` bit(10) DEFAULT 0x1,
  PRIMARY KEY (`b`),
  UNIQUE KEY `b` (`b`),
  KEY `c` (`c`)
)
ALTER TABLE t1 DROP INDEX c;
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) NOT NULL,
  `c` bit(10) DEFAULT 0x1,
  PRIMARY KEY (`b`),
  UNIQUE KEY `b` (`b`)
)
ALTER TABLE t1 DROP COLUMN c;
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) NOT NULL,
  PRIMARY KEY (`b`),
  UNIQUE KEY `b` (`b`)
)
ALTER TABLE t1 DROP INDEX b;
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) NOT NULL,
  PRIMARY KEY (`b`)
)
ALTER TABLE t1 DROP PRIMARY KEY;
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` int DEFAULT NULL,
  `b` bit(10) NOT NULL
)
ALTER TABLE t1 MODIFY a bit(9);  -- error, data type length is too short
Data truncation: data out of range: data type int9, value 1023
ALTER TABLE t1 MODIFY a bit(10);
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `a` bit(10) DEFAULT NULL,
  `b` bit(10) NOT NULL
)
select * from t1;
â¤ a[-7,10,0]  Â¦  b[-7,10,0]  ğ„€
0  Â¦  0  ğ„€
1  Â¦  1  ğ„€
2  Â¦  2  ğ„€
3  Â¦  3  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
1023  Â¦  1023  ğ„€
6  Â¦  6
ALTER TABLE t1 CHANGE a new_a int;
show create table t1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
t1  Â¦  CREATE TABLE `t1` (
  `new_a` int DEFAULT NULL,
  `b` bit(10) NOT NULL
)
select * from t1;
â¤ new_a[4,32,0]  Â¦  b[-7,10,0]  ğ„€
0  Â¦  0  ğ„€
1  Â¦  1  ğ„€
2  Â¦  2  ğ„€
3  Â¦  3  ğ„€
4  Â¦  4  ğ„€
5  Â¦  5  ğ„€
1023  Â¦  1023  ğ„€
6  Â¦  6
