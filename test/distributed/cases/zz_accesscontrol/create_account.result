set global enable_privilege_cache = off;
select enable_fault_injection();
â¤ enable_fault_injection()[-7,1,0]  ğ„€
1
select add_fault_point('fj/trace/partitionstate', ':::', 'echo', 20, 'mo_tables');
â¤ add_fault_point(fj/trace/partitionstate, :::, echo, 20, mo_tables)[-7,1,0]  ğ„€
1
drop account if exists `test@123456`;
drop account if exists testaccount;
drop account if exists 123_acc;
drop account if exists _acc;
drop account if exists a12;
drop account if exists _acc1;
drop account if exists FaSt;
drop account if exists `123`;
drop account if exists a123;
drop account if exists `abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff`;
drop account if exists abc;
drop account if exists abcd;
drop account if exists cm1;
drop account if exists cm2;
drop account if exists cm3;
drop account if exists accout_Xingming_insert;
drop account if exists `ab.cd`;
drop account if exists `test/123`;
drop account if exists `test%`;
drop account if exists `éå¸¸`;
drop account if exists user_strip_01;
drop account if exists account_1;
drop account if exists aaa;
drop account if exists account;
drop account if exists ccc;
create account `test@123456` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "test@123456" is invalid
select account_name from mo_catalog.mo_account where account_name='test@123456';
â¤ account_name[12,-1,0]
create account testaccount ADMIN_NAME 'admin@123' IDENTIFIED BY 'yyyy_1234@126.com';
select account_name from mo_catalog.mo_account where account_name='testaccount';
â¤ account_name[12,-1,0]  ğ„€
testaccount
create account 123_acc ADMIN_NAME '8888' IDENTIFIED BY 'ffffff';
select account_name from mo_catalog.mo_account where account_name='123_acc';
â¤ account_name[12,-1,0]  ğ„€
123_acc
create account _acc ADMIN_NAME 'AbcDef' IDENTIFIED BY 'NIU_2345';
select account_name from mo_catalog.mo_account where account_name='_acc';
â¤ account_name[12,-1,0]  ğ„€
_acc
create account a12 ADMIN_NAME 'a12' IDENTIFIED BY 'aaaaa';
select account_name from mo_catalog.mo_account where account_name='a12';
â¤ account_name[12,-1,0]  ğ„€
a12
create account _acc1 ADMIN_NAME '_AbcDef' IDENTIFIED BY '_2345';
select account_name from mo_catalog.mo_account where account_name='_acc1';
â¤ account_name[12,-1,0]  ğ„€
_acc1
create account a123 ADMIN_NAME 'a12' IDENTIFIED BY 'aaaaa';
select account_name from mo_catalog.mo_account where account_name='a12';
â¤ account_name[12,-1,0]  ğ„€
a12
create account FaSt ADMIN_NAME 'è´¦å·' IDENTIFIED BY 'è´¦å·å¯†ç ';
select account_name from mo_catalog.mo_account where account_name='fast';
â¤ account_name[12,-1,0]  ğ„€
fast
create account `ab.cd` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "ab.cd" is invalid
select account_name from mo_catalog.mo_account where account_name='ab.cd';
â¤ account_name[12,-1,0]
create account `test/123` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "test/123" is invalid
select account_name from mo_catalog.mo_account where account_name='test/123';
â¤ account_name[12,-1,0]
create account `test%` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "test%" is invalid
select account_name from mo_catalog.mo_account where account_name='test%';
â¤ account_name[12,-1,0]
create account `123` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
select account_name from mo_catalog.mo_account where account_name='123';
â¤ account_name[12,-1,0]  ğ„€
123
create account `éå¸¸` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "éå¸¸" is invalid
select account_name from mo_catalog.mo_account where account_name='éå¸¸';
â¤ account_name[12,-1,0]
create account `abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff` admin_name `abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffffdddddd` IDENTIFIED BY '1111111111111111111111111111111111111111111111111111111';
internal error: the name "abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff" is invalid
select account_name from mo_catalog.mo_account where account_name='abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff';
â¤ account_name[12,-1,0]
create account ` user_strip_01 ` ADMIN_NAME " admin " IDENTIFIED BY " 123456 ";
select account_name from mo_catalog.mo_account where account_name='user_strip_01';
â¤ account_name[12,-1,0]  ğ„€
user_strip_01
create account abc ADMIN_NAME 'admin' IDENTIFIED BY '123456';
select account_name from mo_catalog.mo_account where account_name='abc';
â¤ account_name[12,-1,0]  ğ„€
abc
create account ABC ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the tenant abc exists
create account Abc ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the tenant abc exists
create account IF NOT EXISTS Abc ADMIN_NAME 'admin' IDENTIFIED BY '123456';
create account IF NOT EXISTS Abcd ADMIN_NAME 'admin' IDENTIFIED BY '123456' comment 'è¿™æ˜¯commentå¤‡æ³¨/123456';
select account_name,comments from mo_catalog.mo_account where account_name='abcd';
â¤ account_name[12,-1,0]  Â¦  comments[12,-1,0]  ğ„€
abcd  Â¦  è¿™æ˜¯commentå¤‡æ³¨/123456
create account IF NOT EXISTS cm1 ADMIN_NAME 'admin' IDENTIFIED BY '123456' comment 'this is test comment , please check';
select account_name,comments from mo_catalog.mo_account where account_name='cm1';
â¤ account_name[12,-1,0]  Â¦  comments[12,-1,0]  ğ„€
cm1  Â¦  this is test comment , please check
create account cm2 ADMIN_NAME 'admin' IDENTIFIED BY '123456' comment 'abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff';
select account_name,comments from mo_catalog.mo_account where account_name='cm2';
â¤ account_name[12,-1,0]  Â¦  comments[12,-1,0]  ğ„€
cm2  Â¦  abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff
create account cm3 ADMIN_NAME 'admin' IDENTIFIED BY '123456' comment '';
select account_name,comments from mo_catalog.mo_account where account_name='cm3';
â¤ account_name[12,-1,0]  Â¦  comments[12,-1,0]  ğ„€
cm3  Â¦  
create accout a1 ADMIN_NAME ' admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 13 near " accout a1 ADMIN_NAME ' admin' IDENTIFIED BY '123456';";
create account a1;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 18 near ";";
create accout a1 ADMIN_NAME ' admin';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 13 near " accout a1 ADMIN_NAME ' admin';";
create accout a1 IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 13 near " accout a1 IDENTIFIED BY '123456';";
create accout a1 comment'aaaa';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 13 near " accout a1 comment'aaaa';";
create account 123 ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 18 near " 123 ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account éå¸¸ ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 16 near " éå¸¸ ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account "acc1" ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 21 near " "acc1" ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account 'acc1' ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 21 near " 'acc1' ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account bbb ADMIN_NAME '' IDENTIFIED BY '123456';
internal error: the name "" is invalid
create account `` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 16 near " `` ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account aaa ADMIN_NAME 'admin' IDENTIFIED BY '';
internal error: password is empty string
create account test:account ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 27 near ":account ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account 'test:account' ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 29 near " 'test:account' ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account "test:account" ADMIN_NAME 'admin' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 29 near " "test:account" ADMIN_NAME 'admin' IDENTIFIED BY '123456';";
create account `test:account` ADMIN_NAME 'admin' IDENTIFIED BY '123456';
internal error: the name "test:account" is invalid
create account default ADMIN_NAME 'root' IDENTIFIED BY '123456';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 22 near " default ADMIN_NAME 'root' IDENTIFIED BY '123456';";
create account account ADMIN_NAME 'root' IDENTIFIED BY '123456';
select count(*) from mo_catalog.mo_account where account_name in ('test:account','default','account');
â¤ count(*)[-5,64,0]  ğ„€
1
create account account_1 admin_name='admin' identified by '123456';
show databases;
â¤ Database[12,-1,0]  ğ„€
information_schema  ğ„€
mo_catalog  ğ„€
mysql  ğ„€
system  ğ„€
system_metrics
use mo_catalog;
show tables;
â¤ Tables_in_mo_catalog[12,-1,0]  ğ„€
mo_cache  ğ„€
mo_columns  ğ„€
mo_configurations  ğ„€
mo_database  ğ„€
mo_foreign_keys  ğ„€
mo_indexes  ğ„€
mo_locks  ğ„€
mo_mysql_compatibility_mode  ğ„€
mo_parquet_schema  ğ„€
mo_partition_metadata  ğ„€
mo_partition_tables  ğ„€
mo_role  ğ„€
mo_role_grant  ğ„€
mo_role_privs  ğ„€
mo_sessions  ğ„€
mo_snapshots  ğ„€
mo_stages  ğ„€
mo_stored_procedure  ğ„€
mo_table_partitions  ğ„€
mo_tables  ğ„€
mo_transactions  ğ„€
mo_user  ğ„€
mo_user_defined_function  ğ„€
mo_user_grant  ğ„€
mo_variables
select user_name,authentication_string,owner from mo_user;
â¤ user_name[12,-1,0]  Â¦  authentication_string[12,-1,0]  Â¦  owner[4,32,0]  ğ„€
admin  Â¦  *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9  Â¦  2
select role_name,obj_type,privilege_name,privilege_level from mo_role_privs;
â¤ role_name[12,-1,0]  Â¦  obj_type[12,-1,0]  Â¦  privilege_name[12,-1,0]  Â¦  privilege_level[12,-1,0]  ğ„€
accountadmin  Â¦  account  Â¦  create user  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  drop user  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  alter user  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  create role  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  drop role  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  create database  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  drop database  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  show databases  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  connect  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  manage grants  Â¦  *  ğ„€
accountadmin  Â¦  account  Â¦  account all  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  show tables  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  create table  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  drop table  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  alter table  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  create view  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  drop view  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  alter view  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  database all  Â¦  *  ğ„€
accountadmin  Â¦  database  Â¦  database ownership  Â¦  *  ğ„€
accountadmin  Â¦  table  Â¦  select  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  insert  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  update  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  truncate  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  delete  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  reference  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  index  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  table all  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  table ownership  Â¦  *.*  ğ„€
accountadmin  Â¦  table  Â¦  values  Â¦  *.*  ğ„€
public  Â¦  account  Â¦  connect  Â¦  *
create database account_1_db;
CREATE USER account_1_user IDENTIFIED BY '123456';
create table a(b int);
internal error: do not have privilege to execute the statement
use account_1_db;
create table a(b int);
use mo_catalog;
select user_name,authentication_string,owner from mo_user where user_name ='account_1_user';
â¤ user_name[12,-1,0]  Â¦  authentication_string[12,-1,0]  Â¦  owner[4,32,0]
create account accout_Xingming_insert ADMIN_NAME 'root' IDENTIFIED BY '123456789';
select account_name from mo_catalog.mo_account where account_name='accout_xingming_insert';
â¤ account_name[12,-1,0]  ğ„€
accout_xingming_insert
drop account accout_Xingming_insert;
select account_name from mo_catalog.mo_account where account_name='accout_xingming_insert';
â¤ account_name[12,-1,0]
create account if not exists accout_Xingming_insert ADMIN_NAME 'root' IDENTIFIED BY '123456789';
select account_name from mo_catalog.mo_account where account_name='accout_xingming_insert';
â¤ account_name[12,-1,0]  ğ„€
accout_xingming_insert
PREPARE s1 FROM "create account ? ADMIN_NAME ? IDENTIFIED BY ?";
set @a_var = 'ccc';
set @b_var = 'admin';
set @c_var = '111';
EXECUTE s1 USING @a_var, @b_var, @c_var;
DEALLOCATE PREPARE s1;
select account_name from mo_catalog.mo_account where account_name='ccc';
â¤ account_name[12,-1,0]  ğ„€
ccc
drop account ccc;
PREPARE s1 FROM "create account ? ADMIN_NAME 'admin' IDENTIFIED BY ?";
set @a_var = 'ccc';
set @c_var = '222';
EXECUTE s1 USING @a_var, @c_var;
DEALLOCATE PREPARE s1;
select 1;
â¤ 1[-5,64,0]  ğ„€
1
drop account if exists `test@123456`;
drop account if exists testaccount;
drop account if exists 123_acc;
drop account if exists _acc;
drop account if exists a12;
drop account if exists _acc1;
drop account if exists FaSt;
drop account if exists `123`;
drop account if exists a123;
drop account if exists `abcddddddfsfafaffsefsfsefljofiseosfjosisssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss24444444444444444444444444222222222@fffffffffffffffffffffffffffffffffffffffffffffffffffff`;
drop account if exists abc;
drop account if exists abcd;
drop account if exists cm1;
drop account if exists cm2;
drop account if exists cm3;
drop account if exists accout_Xingming_insert;
drop account if exists `ab.cd`;
drop account if exists `test/123`;
drop account if exists `test%`;
drop account if exists `éå¸¸`;
drop account if exists user_strip_01;
drop account if exists account_1;
drop account if exists aaa;
drop account if exists account;
drop account if exists ccc;
select disable_fault_injection();
â¤ disable_fault_injection()[-7,1,0]  ğ„€
1
set global enable_privilege_cache = on;
