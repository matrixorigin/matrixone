set global enable_privilege_cache = off;
drop account if exists account1;
drop account if exists inner_account;
drop role if exists revoke_role_1;
select user_name,owner from mo_catalog.mo_user where user_name="root";
â¤ user_name[12,-1,0]  Â¦  owner[4,32,0]  ğ„€
root  Â¦  0
select role_id,role_name,owner from mo_catalog.mo_role where role_name in ("moadmin","public");
â¤ role_id[4,32,0]  Â¦  role_name[12,-1,0]  Â¦  owner[4,32,0]  ğ„€
0  Â¦  moadmin  Â¦  0  ğ„€
1  Â¦  public  Â¦  0
select enable_fault_injection();
â¤ enable_fault_injection()[12,4,0]  ğ„€
true
select add_fault_point('fj/trace/partitionstate', ':::', 'echo', 20, 'mo_tables');
â¤ add_fault_point(fj/trace/partitionstate, :::, echo, 20, mo_tables)[12,4,0]  ğ„€
true
create account account1 ADMIN_NAME 'admin' IDENTIFIED BY '123456';
select role_id,role_name,owner from mo_catalog.mo_role;
â¤ role_id[4,32,0]  Â¦  role_name[12,-1,0]  Â¦  owner[4,32,0]  ğ„€
2  Â¦  accountadmin  Â¦  2  ğ„€
1  Â¦  public  Â¦  2
show databases;
â¤ Database[12,-1,0]  ğ„€
information_schema  ğ„€
mo_catalog  ğ„€
mysql  ğ„€
system  ğ„€
system_metrics
show grants;
â¤ Grants for admin@localhost[12,-1,0]  ğ„€
GRANT create user ON account  `admin`@`localhost`  ğ„€
GRANT drop user ON account  `admin`@`localhost`  ğ„€
GRANT alter user ON account  `admin`@`localhost`  ğ„€
GRANT create role ON account  `admin`@`localhost`  ğ„€
GRANT drop role ON account  `admin`@`localhost`  ğ„€
GRANT create database ON account  `admin`@`localhost`  ğ„€
GRANT drop database ON account  `admin`@`localhost`  ğ„€
GRANT show databases ON account  `admin`@`localhost`  ğ„€
GRANT connect ON account  `admin`@`localhost`  ğ„€
GRANT manage grants ON account  `admin`@`localhost`  ğ„€
GRANT account all ON account  `admin`@`localhost`  ğ„€
GRANT show tables ON database * `admin`@`localhost`  ğ„€
GRANT create table ON database * `admin`@`localhost`  ğ„€
GRANT drop table ON database * `admin`@`localhost`  ğ„€
GRANT alter table ON database * `admin`@`localhost`  ğ„€
GRANT create view ON database * `admin`@`localhost`  ğ„€
GRANT drop view ON database * `admin`@`localhost`  ğ„€
GRANT alter view ON database * `admin`@`localhost`  ğ„€
GRANT database all ON database * `admin`@`localhost`  ğ„€
GRANT database ownership ON database * `admin`@`localhost`  ğ„€
GRANT select ON table *.* `admin`@`localhost`  ğ„€
GRANT insert ON table *.* `admin`@`localhost`  ğ„€
GRANT update ON table *.* `admin`@`localhost`  ğ„€
GRANT truncate ON table *.* `admin`@`localhost`  ğ„€
GRANT delete ON table *.* `admin`@`localhost`  ğ„€
GRANT reference ON table *.* `admin`@`localhost`  ğ„€
GRANT index ON table *.* `admin`@`localhost`  ğ„€
GRANT table all ON table *.* `admin`@`localhost`  ğ„€
GRANT table ownership ON table *.* `admin`@`localhost`  ğ„€
GRANT values ON table *.* `admin`@`localhost`  ğ„€
GRANT connect ON account  `admin`@`localhost`
use system;
show triggers;
â¤ Trigger[12,-1,0]  Â¦  Event[12,-1,0]  Â¦  Table[12,-1,0]  Â¦  Statement[12,0,0]  Â¦  Timing[12,-1,0]  Â¦  Created[93,64,0]  Â¦  sql_mode[12,-1,0]  Â¦  Definer[12,-1,0]  Â¦  character_set_client[12,-1,0]  Â¦  collation_connection[12,-1,0]  Â¦  Database Collation[12,-1,0]
use mo_catalog;
show columns from mo_tables;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
rel_id  Â¦  BIGINT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
relname  Â¦  VARCHAR(5000)  Â¦  YES  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
reldatabase  Â¦  VARCHAR(5000)  Â¦  YES  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
reldatabase_id  Â¦  BIGINT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
relpersistence  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
relkind  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
rel_comment  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
rel_createsql  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
created_time  Â¦  TIMESTAMP(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
creator  Â¦  INT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
owner  Â¦  INT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
account_id  Â¦  INT UNSIGNED(0)  Â¦  YES  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
partitioned  Â¦  TINYINT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
partition_info  Â¦  BLOB(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
viewdef  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
constraint  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
rel_version  Â¦  INT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
catalog_version  Â¦  INT UNSIGNED(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
rel_logical_id  Â¦  BIGINT UNSIGNED(0)  Â¦  YES  Â¦  UNI  Â¦  null  Â¦    Â¦  
select datname, dat_createsql from mo_database;
â¤ datname[12,-1,0]  Â¦  dat_createsql[12,-1,0]  ğ„€
system  Â¦  create database system  ğ„€
system_metrics  Â¦  create database system_metrics  ğ„€
information_schema  Â¦  create database information_schema  ğ„€
mysql  Â¦  create database mysql  ğ„€
mo_catalog  Â¦  
select relname from mo_tables where relname="sql_statement_total";
â¤ relname[12,-1,0]  ğ„€
sql_statement_total
select relname from mo_tables where relname="mo_user";
â¤ relname[12,-1,0]  ğ„€
mo_user
select relname from mo_tables where relname="tables";
â¤ relname[12,-1,0]  ğ„€
tables
select user_name,authentication_string from mo_user;
â¤ user_name[12,-1,0]  Â¦  authentication_string[12,-1,0]  ğ„€
admin  Â¦  *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9
select role_name from mo_role;
â¤ role_name[12,-1,0]  ğ„€
accountadmin  ğ„€
public
create database account_db;
use account_db;
show tables;
â¤ Tables_in_account_db[12,-1,0]
create table a(col int);
show create table a;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
a  Â¦  CREATE TABLE `a` (
  `col` int DEFAULT NULL
)
show tables;
â¤ Tables_in_account_db[12,-1,0]  ğ„€
a
show databases;
â¤ Database[12,-1,0]  ğ„€
account_db  ğ„€
information_schema  ğ„€
mo_catalog  ğ„€
mysql  ğ„€
system  ğ„€
system_metrics
update mo_catalog.mo_tables set relname='mo_aaaa';
internal error: do not have privilege to execute the statement
insert into mo_catalog.mo_role values (1763,'apple',0,1,'2022-09-22 06:53:34','');
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_user;
internal error: do not have privilege to execute the statement
drop table mo_catalog.mo_account;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_user_grant;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_role_grant;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_role_privs;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_database;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_columns;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_indexes;
internal error: do not have privilege to execute the statement
delete from mo_catalog.mo_table_partitions;
[unknown result because it is related to issue#16438]
drop database information_schema;
internal error: do not have privilege to execute the statement
drop database mo_catalog;
internal error: do not have privilege to execute the statement
drop database system;
internal error: do not have privilege to execute the statement
drop database system_metrics;
internal error: do not have privilege to execute the statement
revoke moadmin,public from root;
internal error: the role moadmin can not be revoked
select count(*) from mo_catalog.mo_role_privs where role_name in ('moadmin','public');
â¤ count(*)[-5,64,0]  ğ„€
35
drop role if exists moadmin,public;
internal error: can not delete the role moadmin
select role_name from mo_role where role_name in('moadmin','public');
SQL parser error: table "mo_role" does not exist
drop user if exists admin,root;
internal error: can not delete the user root
create account inner_account ADMIN_NAME 'admin' IDENTIFIED BY '111';
revoke accountadmin from admin;
internal error: the role accountadmin can not be revoked
select count(*) from mo_catalog.mo_role_privs where role_name in ('accountadmin');
â¤ count(*)[-5,64,0]  ğ„€
30
drop role if exists accountadmin;
internal error: can not delete the role accountadmin
select role_name from mo_catalog.mo_role where role_name in('accountadmin');
â¤ role_name[12,-1,0]  ğ„€
accountadmin
create table tb1(
deptno int unsigned,
dname varchar(15),
loc varchar(50),
unique key(deptno)
);
select `name`,`type`,`name`,`is_visible`,`hidden`,`comment`,`column_name`,`ordinal_position`,`options` from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 'tb1');
â¤ name[12,-1,0]  Â¦  type[12,-1,0]  Â¦  name[12,-1,0]  Â¦  is_visible[-6,8,0]  Â¦  hidden[-6,8,0]  Â¦  comment[12,-1,0]  Â¦  column_name[12,-1,0]  Â¦  ordinal_position[4,32,0]  Â¦  options[12,0,0]  ğ„€
deptno  Â¦  UNIQUE  Â¦  deptno  Â¦  1  Â¦  0  Â¦    Â¦  deptno  Â¦  1  Â¦  null
desc mo_catalog.mo_indexes;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
table_id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
database_id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
name  Â¦  VARCHAR(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
type  Â¦  VARCHAR(11)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo  Â¦  VARCHAR(11)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo_table_type  Â¦  VARCHAR(11)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo_params  Â¦  VARCHAR(2048)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
is_visible  Â¦  TINYINT(8)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
hidden  Â¦  TINYINT(8)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
comment  Â¦  VARCHAR(2048)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
column_name  Â¦  VARCHAR(256)  Â¦  NO  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
ordinal_position  Â¦  INT UNSIGNED(32)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
options  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
index_table_name  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦  
CREATE TABLE trp (
id INT NOT NULL,
fname VARCHAR(30),
lname VARCHAR(30),
hired DATE NOT NULL DEFAULT '1970-01-01',
separated DATE NOT NULL DEFAULT '9999-12-31',
job_code INT,
store_id INT
)
PARTITION BY RANGE ( YEAR(separated) ) (
PARTITION p0 VALUES LESS THAN (1991),
PARTITION p1 VALUES LESS THAN (1996),
PARTITION p2 VALUES LESS THAN (2001),
PARTITION p3 VALUES LESS THAN MAXVALUE
);
[unknown result because it is related to issue#16438]
select tbl.relname, part.number, part.name, part.description_utf8, part.comment, part.options, part.partition_table_name
from mo_catalog.mo_tables tbl left join mo_catalog.mo_table_partitions part on tbl.rel_id = part.table_id
where tbl.relname = 'trp';
[unknown result because it is related to issue#16438]
desc mo_catalog.mo_table_partitions;
[unknown result because it is related to issue#16438]
create account accx11 ADMIN_NAME 'admin' IDENTIFIED BY '111';
select `name`,`type`,`name`,`is_visible`,`hidden`,`comment`,`column_name`,`ordinal_position`,`options` from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 'tb1');
â¤ name[12,-1,0]  Â¦  type[12,-1,0]  Â¦  name[12,-1,0]  Â¦  is_visible[-6,8,0]  Â¦  hidden[-6,8,0]  Â¦  comment[12,-1,0]  Â¦  column_name[12,-1,0]  Â¦  ordinal_position[4,32,0]  Â¦  options[12,0,0]
desc mo_catalog.mo_indexes;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
table_id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
database_id  Â¦  BIGINT UNSIGNED(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
name  Â¦  VARCHAR(64)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
type  Â¦  VARCHAR(11)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo  Â¦  VARCHAR(11)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo_table_type  Â¦  VARCHAR(11)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
algo_params  Â¦  VARCHAR(2048)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
is_visible  Â¦  TINYINT(8)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
hidden  Â¦  TINYINT(8)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
comment  Â¦  VARCHAR(2048)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
column_name  Â¦  VARCHAR(256)  Â¦  NO  Â¦  PRI  Â¦  null  Â¦    Â¦    ğ„€
ordinal_position  Â¦  INT UNSIGNED(32)  Â¦  NO  Â¦    Â¦  null  Â¦    Â¦    ğ„€
options  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
index_table_name  Â¦  VARCHAR(5000)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦  
drop account if exists account1;
drop account if exists inner_account;
drop account if exists accx11;
drop role if exists revoke_role_1;
set global enable_privilege_cache = on;
desc mo_catalog.mo_stages;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
stage_id  Â¦  INT UNSIGNED(32)  Â¦  NO  Â¦  PRI  Â¦  null  Â¦  auto_increment  Â¦    ğ„€
stage_name  Â¦  VARCHAR(64)  Â¦  YES  Â¦  UNI  Â¦  null  Â¦    Â¦    ğ„€
url  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
stage_credentials  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
stage_status  Â¦  VARCHAR(64)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
created_time  Â¦  TIMESTAMP(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
comment  Â¦  TEXT(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦  
select disable_fault_injection();
â¤ disable_fault_injection()[12,4,0]  ğ„€
true
create account ac_1 ADMIN_NAME 'admin' IDENTIFIED BY '111';
create database sys_db1;
create table sys_db1.sys_t1(c1 char);
create view sys_db1.sys_v1  as select * from sys_db1.sys_t1;
create table sys_db1.test01 (
emp_no      int             not null,
birth_date  date            not null,
first_name  varchar(14)     not null,
last_name   varchar(16)     not null,
gender      varchar(5)      not null,
hire_date   date            not null,
primary key (emp_no)
) partition by range columns (emp_no)(
partition p01 values less than (100001),
partition p02 values less than (200001),
partition p03 values less than (300001),
partition p04 values less than (400001)
);
create database ac_db;
create table ac_db.ac_t1(c1 int);
create view ac_db.ac_v1  as select * from ac_db.ac_t1;
create table ac_db.test02 (
emp_no      int             not null,
birth_date  date            not null,
first_name  varchar(14)     not null,
last_name   varchar(16)     not null,
gender      varchar(5)      not null,
hire_date   date            not null,
primary key (emp_no)
) partition by range columns (emp_no)(
partition p01 values less than (100001),
partition p02 values less than (200001),
partition p03 values less than (300001),
partition p04 values less than (400001)
);
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="ac_db" and table_name='ac_t1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]  ğ„€
def  Â¦  ac_db  Â¦  ac_t1  Â¦  __mo_fake_pk_col  ğ„€
def  Â¦  ac_db  Â¦  ac_t1  Â¦  c1
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="ac_db" and table_name='test02';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  birth_date  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  emp_no  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  first_name  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  gender  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  hire_date  ğ„€
def  Â¦  ac_db  Â¦  test02  Â¦  last_name
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="sys_db1";
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select count(*),table_name, column_name  from information_schema.columns group by table_name, column_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select * from information_schema.schemata where schema_name='ac_db';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]  ğ„€
def  Â¦  ac_db  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci  Â¦  null  Â¦  NO
select * from information_schema.schemata where schema_name='sys_db1';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]
select count(*),schema_name from information_schema.schemata group by schema_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  schema_name[12,-1,0]
select table_schema,table_name  from information_schema.tables where table_name='sys_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name from information_schema.tables where table_name='ac_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
ac_db  Â¦  ac_t1
select count(*),table_name from information_schema.tables group by table_name having count(*) >1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select * from information_schema.views where table_name='ac_v1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  view_definition[12,0,0]  Â¦  check_option[12,-1,0]  Â¦  is_updatable[12,-1,0]  Â¦  definer[12,-1,0]  Â¦  security_type[12,-1,0]  Â¦  character_set_client[12,-1,0]  Â¦  collation_connection[12,-1,0]  ğ„€
def  Â¦  ac_db  Â¦  ac_v1  Â¦  create view ac_db.ac_v1  as select * from ac_db.ac_t1;  Â¦  NONE  Â¦  YES  Â¦  admin@localhost  Â¦  DEFINER  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci
select * from information_schema.views where table_name='sys_v1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  view_definition[12,0,0]  Â¦  check_option[12,-1,0]  Â¦  is_updatable[12,-1,0]  Â¦  definer[12,-1,0]  Â¦  security_type[12,-1,0]  Â¦  character_set_client[12,-1,0]  Â¦  collation_connection[12,-1,0]
select count(*),table_name from information_schema.views group by table_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select count(*) from information_schema.partitions where table_schema='ac_db' and table_name='test02';
[unknown result because it is related to issue#16438]
select table_schema,table_name,partition_name  from information_schema.partitions where table_schema='sys_db1';
[unknown result because it is related to issue#16438]
select count(*),table_schema,table_name,partition_name  from information_schema.partitions group by table_schema,table_name,partition_name having count(*) >1;
[unknown result because it is related to issue#16438]
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_name='ac_t1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_name='sys_t1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]  ğ„€
def  Â¦  sys_db1  Â¦  sys_t1  Â¦  __mo_fake_pk_col  ğ„€
def  Â¦  sys_db1  Â¦  sys_t1  Â¦  c1
select count(*),table_name, column_name  from information_schema.columns group by table_name, column_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select * from information_schema.schemata where schema_name='ac_db';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]
select * from information_schema.schemata where schema_name='sys_db1';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]  ğ„€
def  Â¦  sys_db1  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci  Â¦  null  Â¦  NO
select count(*),schema_name from information_schema.schemata group by schema_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  schema_name[12,-1,0]
select table_schema,table_name from information_schema.tables where table_name='sys_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
sys_db1  Â¦  sys_t1
select table_schema,table_name from information_schema.tables where table_name='ac_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select count(*),table_name from information_schema.tables group by table_name having count(*) >1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select * from information_schema.views where table_name='sys_v1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  view_definition[12,0,0]  Â¦  check_option[12,-1,0]  Â¦  is_updatable[12,-1,0]  Â¦  definer[12,-1,0]  Â¦  security_type[12,-1,0]  Â¦  character_set_client[12,-1,0]  Â¦  collation_connection[12,-1,0]  ğ„€
def  Â¦  sys_db1  Â¦  sys_v1  Â¦  create view sys_db1.sys_v1  as select * from sys_db1.sys_t1;  Â¦  NONE  Â¦  YES  Â¦  dump@localhost  Â¦  DEFINER  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci
select * from information_schema.views where table_name='ac_v1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  view_definition[12,0,0]  Â¦  check_option[12,-1,0]  Â¦  is_updatable[12,-1,0]  Â¦  definer[12,-1,0]  Â¦  security_type[12,-1,0]  Â¦  character_set_client[12,-1,0]  Â¦  collation_connection[12,-1,0]
select count(*),table_name from information_schema.views group by table_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select count(*) from information_schema.partitions where table_schema='sys_db1' and table_name='test01';
[unknown result because it is related to issue#16438]
select table_schema,table_name from information_schema.partitions where table_schema='ac_db';
[unknown result because it is related to issue#16438]
select count(*),table_schema,table_name,partition_name  from information_schema.partitions group by table_schema,table_name,partition_name having count(*) >1;
[unknown result because it is related to issue#16438]
create user 'sys_user' identified by '123456';
create role 'sys_role';
grant  all on account *  to 'sys_role';
grant OWNERSHIP on database *.* to sys_role;
grant select on table *.* to sys_role;
grant sys_role to sys_user;
create user 'ac_user' identified by '123456';
create role 'ac_role';
grant  all on account *  to 'ac_role';
grant OWNERSHIP on database *.* to ac_role;
grant select on table *.* to ac_role;
grant ac_role to ac_user;
create database user_db;
create table user_db.user_t1(c1 int,c2 varchar);
create view user_db.sysuser_v1  as select * from user_db.user_t1;
create table user_db.test02 (
emp_no      int             not null,
birth_date  date            not null,
first_name  varchar(14)     not null,
last_name   varchar(16)     not null,
gender      varchar(5)      not null,
hire_date   date            not null,
primary key (emp_no)
) partition by range columns (emp_no)(
partition p01 values less than (100001),
partition p02 values less than (200001),
partition p03 values less than (300001),
partition p04 values less than (400001)
);
create database acuser_db;
create table acuser_db.acuser_t1(c1 int,c2 varchar);
create view acuser_db.acuser_v1  as select * from acuser_db.acuser_t1;
create table acuser_db.test (
emp_no      int             not null,
birth_date  date            not null,
first_name  varchar(14)     not null,
last_name   varchar(16)     not null,
gender      varchar(5)      not null,
hire_date   date            not null,
primary key (emp_no)
) partition by range columns (emp_no)(
partition p01 values less than (100001),
partition p02 values less than (200001),
partition p03 values less than (300001),
partition p04 values less than (400001)
);
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="acuser_db" and table_name='acuser_t1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]  ğ„€
def  Â¦  acuser_db  Â¦  acuser_t1  Â¦  __mo_fake_pk_col  ğ„€
def  Â¦  acuser_db  Â¦  acuser_t1  Â¦  c1  ğ„€
def  Â¦  acuser_db  Â¦  acuser_t1  Â¦  c2
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="user_db";
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select count(*),table_name, column_name  from information_schema.columns group by table_name, column_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select * from information_schema.schemata where schema_name='acuser_db';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]  ğ„€
def  Â¦  acuser_db  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci  Â¦  null  Â¦  NO
select * from information_schema.schemata where schema_name='user_db1';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]
select count(*),schema_name from information_schema.schemata group by schema_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  schema_name[12,-1,0]
select table_schema,table_name from information_schema.tables where table_name='user_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name from information_schema.tables where table_name='acuser_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
acuser_db  Â¦  acuser_t1
select count(*),table_name from information_schema.tables group by table_name having count(*) >1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name from information_schema.views where table_name='acuser_v1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
acuser_db  Â¦  acuser_v1
select table_schema,table_name from information_schema.views where table_name='sysuser_v1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select count(*),table_name from information_schema.views group by table_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name,partition_name from information_schema.partitions where table_schema='acuser_db';
[unknown result because it is related to issue#16438]
select table_schema,table_name,partition_name from information_schema.partitions where table_schema='user_db';
[unknown result because it is related to issue#16438]
select count(*),table_schema,table_name,partition_name  from information_schema.partitions group by table_schema,table_name,partition_name having count(*) >1;
[unknown result because it is related to issue#16438]
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="user_db" and table_name='user_t1';
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]  ğ„€
def  Â¦  user_db  Â¦  user_t1  Â¦  __mo_fake_pk_col  ğ„€
def  Â¦  user_db  Â¦  user_t1  Â¦  c1  ğ„€
def  Â¦  user_db  Â¦  user_t1  Â¦  c2
select table_catalog,table_schema,table_name,column_name from information_schema.columns where table_schema="acuser_db";
â¤ table_catalog[12,-1,0]  Â¦  table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select count(*),table_name, column_name  from information_schema.columns group by table_name, column_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]  Â¦  column_name[12,-1,0]
select * from information_schema.schemata where schema_name='acuser_db';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]
select * from information_schema.schemata where schema_name='user_db';
â¤ catalog_name[12,-1,0]  Â¦  schema_name[12,-1,0]  Â¦  default_character_set_name[12,-1,0]  Â¦  default_collation_name[12,-1,0]  Â¦  sql_path[1,0,0]  Â¦  default_encryption[12,-1,0]  ğ„€
def  Â¦  user_db  Â¦  utf8mb4  Â¦  utf8mb4_0900_ai_ci  Â¦  null  Â¦  NO
select count(*),schema_name from information_schema.schemata group by schema_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  schema_name[12,-1,0]
select table_schema,table_name from information_schema.tables where table_name='user_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
user_db  Â¦  user_t1
select table_schema,table_name from information_schema.tables where table_name='acuser_t1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select count(*),table_name from information_schema.tables group by table_name having count(*) >1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name from information_schema.views where table_name='acuser_v1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name from information_schema.views where table_name='sysuser_v1';
â¤ table_schema[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
user_db  Â¦  sysuser_v1
select count(*),table_name from information_schema.views group by table_name having count(*)>1;
â¤ count(*)[-5,64,0]  Â¦  table_name[12,-1,0]
select table_schema,table_name,partition_name from information_schema.partitions where table_schema='acuser_db';
[unknown result because it is related to issue#16438]
select table_schema,table_name,partition_name from information_schema.partitions where table_schema='user_db';
[unknown result because it is related to issue#16438]
select count(*),table_schema,table_name,partition_name  from information_schema.partitions group by table_schema,table_name,partition_name having count(*) >1;
[unknown result because it is related to issue#16438]
drop database sys_db1;
drop database user_db;
drop account ac_1;
drop user sys_user;
drop role sys_role;
drop database if exists etao;
create database etao;
use etao;
CREATE TABLE `users` (
`id` VARCHAR(128) NOT NULL,
`username` VARCHAR(255) DEFAULT NULL,
`password` VARCHAR(512) DEFAULT NULL,
`user_status` TINYINT DEFAULT NULL,
`user_role` TINYINT DEFAULT NULL,
`created_at` DATETIME DEFAULT NULL,
`updated_at` DATETIME DEFAULT NULL,
`user_source` TINYINT DEFAULT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `idx_mocadmin_users_username` (`username`)
);
SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'etao' AND table_name = 'users' ORDER BY ORDINAL_POSITION;
â¤ column_name[12,-1,0]  Â¦  column_default[12,-1,0]  Â¦  is_nullable = YES[12,4,0]  Â¦  data_type[12,-1,0]  Â¦  character_maximum_length[-5,64,0]  Â¦  column_type[12,-1,0]  Â¦  column_key[12,-1,0]  Â¦  extra[12,-1,0]  Â¦  column_comment[12,-1,0]  Â¦  numeric_precision[-5,64,0]  Â¦  numeric_scale[-5,64,0]  Â¦  datetime_precision[-5,64,0]  ğ„€
id  Â¦  null  Â¦  false  Â¦  VARCHAR  Â¦  128  Â¦  VARCHAR(128)  Â¦  PRI  Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
username  Â¦  null  Â¦  true  Â¦  VARCHAR  Â¦  255  Â¦  VARCHAR(255)  Â¦  UNI  Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
password  Â¦  null  Â¦  true  Â¦  VARCHAR  Â¦  512  Â¦  VARCHAR(512)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
user_status  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
user_role  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
created_at  Â¦  null  Â¦  true  Â¦  DATETIME  Â¦  null  Â¦  DATETIME(0)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  0  ğ„€
updated_at  Â¦  null  Â¦  true  Â¦  DATETIME  Â¦  null  Â¦  DATETIME(0)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  0  ğ„€
user_source  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null
drop database etao;
drop account if exists acc1;
create account acc1 admin_name 'root' identified by '111';
drop database if exists etao;
create database etao;
use etao;
CREATE TABLE `users` (
`id` VARCHAR(128) NOT NULL,
`username` VARCHAR(255) DEFAULT NULL,
`password` VARCHAR(512) DEFAULT NULL,
`user_status` TINYINT DEFAULT NULL,
`user_role` TINYINT DEFAULT NULL,
`created_at` DATETIME DEFAULT NULL,
`updated_at` DATETIME DEFAULT NULL,
`user_source` TINYINT DEFAULT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `idx_mocadmin_users_username` (`username`)
);
SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'etao' AND table_name = 'users' ORDER BY ORDINAL_POSITION;
â¤ column_name[12,-1,0]  Â¦  column_default[12,-1,0]  Â¦  is_nullable = YES[12,4,0]  Â¦  data_type[12,-1,0]  Â¦  character_maximum_length[-5,64,0]  Â¦  column_type[12,-1,0]  Â¦  column_key[12,-1,0]  Â¦  extra[12,-1,0]  Â¦  column_comment[12,-1,0]  Â¦  numeric_precision[-5,64,0]  Â¦  numeric_scale[-5,64,0]  Â¦  datetime_precision[-5,64,0]  ğ„€
id  Â¦  null  Â¦  false  Â¦  VARCHAR  Â¦  128  Â¦  VARCHAR(128)  Â¦  PRI  Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
username  Â¦  null  Â¦  true  Â¦  VARCHAR  Â¦  255  Â¦  VARCHAR(255)  Â¦  UNI  Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
password  Â¦  null  Â¦  true  Â¦  VARCHAR  Â¦  512  Â¦  VARCHAR(512)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
user_status  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
user_role  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null  ğ„€
created_at  Â¦  null  Â¦  true  Â¦  DATETIME  Â¦  null  Â¦  DATETIME(0)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  0  ğ„€
updated_at  Â¦  null  Â¦  true  Â¦  DATETIME  Â¦  null  Â¦  DATETIME(0)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  0  ğ„€
user_source  Â¦  null  Â¦  true  Â¦  TINYINT  Â¦  null  Â¦  TINYINT(8)  Â¦    Â¦    Â¦    Â¦  null  Â¦  null  Â¦  null
drop database etao;
drop account acc1;
