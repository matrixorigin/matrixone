drop table if exists atomic_table_10;
create table atomic_table_10(c1 int,c2 varchar(25));
insert into atomic_table_10 values (3,"a"),(4,"b"),(5,"c");
start transaction ;
truncate table atomic_table_10;
use transaction_enhance;
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]
commit;
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]
drop table if exists atomic_table_10;
create table atomic_table_10(c1 int,c2 varchar(25));
insert into atomic_table_10 values (3,"a"),(4,"b"),(5,"c");
start transaction ;
truncate table atomic_table_10;
use transaction_enhance;
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]
rollback;
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c
drop table if exists atomic_table_10;
create table atomic_table_10(c1 int,c2 varchar(25));
insert into atomic_table_10 values (3,"a"),(4,"b"),(5,"c");
begin ;
truncate table atomic_table_10;
use transaction_enhance;
insert into atomic_table_10 values (6,"a"),(7,"b"),(8,"c");
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
6  Â¦  a  ğ„€
7  Â¦  b  ğ„€
8  Â¦  c
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
6  Â¦  a  ğ„€
7  Â¦  b  ğ„€
8  Â¦  c
commit;
select * from atomic_table_10;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
6  Â¦  a  ğ„€
7  Â¦  b  ğ„€
8  Â¦  c
drop table if exists atomic_table_11;
create table atomic_table_11(c1 int,c2 varchar(25));
insert into atomic_table_11 values (3,"a"),(4,"b"),(5,"c");
begin;
drop table atomic_table_11;
use transaction_enhance;
insert into atomic_table_11 values (6,"a");
no such table transaction_enhance.atomic_table_11
select * from atomic_table_11;
SQL parser error: table "atomic_table_11" does not exist
commit;
select * from atomic_table_11;
SQL parser error: table "atomic_table_11" does not exist
drop table if exists atomic_table_11;
create table atomic_table_11(c1 int,c2 varchar(25));
insert into atomic_table_11 values (3,"a"),(4,"b"),(5,"c");
begin;
drop table atomic_table_11;
use transaction_enhance;
insert into atomic_table_11 values (6,"a");
select * from atomic_table_11;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
6  Â¦  a
rollback ;
select * from atomic_table_11;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
6  Â¦  a
drop table if exists atomic_table_11;
create table atomic_table_11(c1 int,c2 varchar(25));
insert into atomic_table_11 values (3,"a"),(4,"b"),(5,"c");
begin;
use transaction_enhance;
drop table atomic_table_11;
drop table atomic_table_11;
no such table transaction_enhance.atomic_table_11
commit;
drop table if exists atomic_table_12;
create table atomic_table_12(c1 int,c2 varchar(25));
insert into atomic_table_12 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table atomic_table_12 add index key1(c1);
alter table atomic_table_12 alter index key1 visible;
use transaction_enhance;
show create table atomic_table_12;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12  Â¦  CREATE TABLE `atomic_table_12` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL
)
commit;
show create table atomic_table_12;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12  Â¦  CREATE TABLE `atomic_table_12` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`c1`)
)
show index from atomic_table_12;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
atomic_table_12  Â¦  1  Â¦  key1  Â¦  1  Â¦  c1  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  c1
use transaction_enhance;
drop table if exists atomic_table_12_1;
create table atomic_table_12_1(c1 int,c2 varchar(25));
insert into atomic_table_12_1 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table atomic_table_12_1 add index key1(c1);
alter table atomic_table_12_1 alter index key1 visible;
use transaction_enhance;
show create table atomic_table_12_1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_1  Â¦  CREATE TABLE `atomic_table_12_1` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL
)
rollback;
show create table atomic_table_12_1;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_1  Â¦  CREATE TABLE `atomic_table_12_1` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL
)
show index from atomic_table_12_1;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]
drop table if exists atomic_table_12_2;
drop table if exists atomic_table_13;
create table atomic_table_12_2(c1 int primary key,c2 varchar(25));
insert into atomic_table_12_2 values (3,"a"),(4,"b"),(5,"c");
create table atomic_table_13(c1 int primary key,c2 varchar(25));
insert into atomic_table_13 values (3,"d"),(4,"e"),(5,"f");
begin;
alter table atomic_table_13 add constraint ffa foreign key f_a(c1) references atomic_table_12_2(c1);
use transaction_enhance;
show create table atomic_table_12_2;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_2  Â¦  CREATE TABLE `atomic_table_12_2` (
  `c1` int NOT NULL,
  `c2` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`c1`)
)
insert into atomic_table_13 values (8,"h");
internal error: Cannot add or update a child row: a foreign key constraint fails
select * from atomic_table_13;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  d  ğ„€
4  Â¦  e  ğ„€
5  Â¦  f
insert into atomic_table_13 values (6,"h");
internal error: Cannot add or update a child row: a foreign key constraint fails
commit;
show create table atomic_table_13;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_13  Â¦  CREATE TABLE `atomic_table_13` (
  `c1` int NOT NULL,
  `c2` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`c1`),
  CONSTRAINT `ffa` FOREIGN KEY (`c1`) REFERENCES `atomic_table_12_2` (`c1`) ON DELETE RESTRICT ON UPDATE RESTRICT
)
drop table if exists atomic_table_12_3;
drop table if exists atomic_table_13;
create table atomic_table_12_3(c1 int primary key,c2 varchar(25));
insert into atomic_table_12_3 values (3,"a"),(4,"b"),(5,"c");
create table atomic_table_13(c1 int primary key,c2 varchar(25));
insert into atomic_table_13 values (3,"d"),(4,"e"),(5,"f");
alter table atomic_table_13 add constraint ffa foreign key f_a(c1) references atomic_table_12_3(c1);
begin;
alter table atomic_table_13 drop foreign key ffa;
use transaction_enhance;
insert into atomic_table_13 values (8,"h");
select * from atomic_table_13;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  d  ğ„€
4  Â¦  e  ğ„€
5  Â¦  f  ğ„€
8  Â¦  h
commit;
show create table atomic_table_13;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_13  Â¦  CREATE TABLE `atomic_table_13` (
  `c1` int NOT NULL,
  `c2` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`c1`)
)
drop table if exists atomic_table_12_4;
drop table if exists atomic_table_13;
create table atomic_table_12_4(c1 int primary key,c2 varchar(25));
insert into atomic_table_12_4 values (3,"a"),(4,"b"),(5,"c");
create table atomic_table_13(c1 int primary key,c2 varchar(25));
insert into atomic_table_13 values (3,"d"),(4,"e"),(5,"f");
alter table atomic_table_13 add constraint ffa foreign key f_a(c1) references atomic_table_12_4(c1);
begin;
alter table atomic_table_13 drop foreign key ffa;
use transaction_enhance;
insert into atomic_table_13 values (8,"h");
select * from atomic_table_13;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  d  ğ„€
4  Â¦  e  ğ„€
5  Â¦  f  ğ„€
8  Â¦  h
rollback ;
show create table atomic_table_13;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_13  Â¦  CREATE TABLE `atomic_table_13` (
  `c1` int NOT NULL,
  `c2` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`c1`)
)
drop table if exists atomic_table_12_5;
drop table if exists atomic_table_13;
create table atomic_table_12_5(c1 int,c2 varchar(25));
insert into atomic_table_12_5 values (3,"a"),(4,"b"),(5,"c");
alter table atomic_table_12_5 add index key1(c1);
begin;
alter table atomic_table_12_5 drop index key1;
use transaction_enhance;
show create table atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_5  Â¦  CREATE TABLE `atomic_table_12_5` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`c1`)
)
select * from atomic_table_12_5;
â¤ c1[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c
commit;
show index from atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]
drop table if exists atomic_table_14;
create table atomic_table_14(c1 int,c2 varchar(25));
insert into atomic_table_14 values (3,"a"),(4,"b"),(5,"c");
start transaction ;
alter table atomic_table_14 add  index key1(c1);
use transaction_enhance;
drop table atomic_table_14;
insert into atomic_table_14 values (6,"a"),(7,"b");
no such table transaction_enhance.atomic_table_14
select * from atomic_table_14;
SQL parser error: table "atomic_table_14" does not exist
commit;
select * from atomic_table_14;
SQL parser error: table "atomic_table_14" does not exist
drop table if exists atomic_table_15;
create table atomic_table_15(c1 int,c2 varchar(25));
begin;
insert into atomic_table_15 values (6,"a"),(7,"b");
truncate table atomic_table_15;
use transaction_enhance;
drop table atomic_table_15;
select * from atomic_table_15;
SQL parser error: table "atomic_table_15" does not exist
commit;
select * from atomic_table_15;
SQL parser error: table "atomic_table_15" does not exist
drop table if exists atomic_table_16;
create table atomic_table_16(c1 int,c2 varchar(25));
begin;
insert into atomic_table_16 values (6,"a"),(7,"b");
drop table atomic_table_16;
use transaction_enhance;
drop table atomic_table_16;
no such table transaction_enhance.atomic_table_16
commit;
select * from atomic_table_16;
SQL parser error: table "atomic_table_16" does not exist
drop table if exists atomic_table_17;
create table atomic_table_17(c1 int,c2 varchar(25));
begin;
insert into atomic_table_17 values (6,"a"),(7,"b");
drop table atomic_table_17;
use transaction_enhance;
alter table atomic_table_17 add constraint unique key (c1);
no such table transaction_enhance.atomic_table_17
update atomic_table_17 set c1=8 where c2="b";
no such table transaction_enhance.atomic_table_17
commit;
select * from atomic_table_17;
SQL parser error: table "atomic_table_17" does not exist
start transaction ;
create database tdb;
use tdb;
Unknown database tdb
drop database tdb;
commit;
begin;
create sequence seq_01 as int start 30;
internal error: Only CREATE of DDL is supported in transactions
use transaction_enhance;
select nextval('seq_01');
no such table transaction_enhance.seq_01
commit;
select nextval('seq_01');
no such table transaction_enhance.seq_01
drop table if exists atomic_table_11;
drop account if exists trans_acc1;
create account trans_acc1 admin_name "admin" identified by "111";
begin;
drop account trans_acc1;
internal error: administrative command is unsupported in transactions
use transaction_enhance;
select count(*) from mo_catalog.mo_account where account_name='trans_acc1';
â¤ count(*)[-5,64,0]  ğ„€
1
commit;
select count(*) from mo_catalog.mo_account where account_name='trans_acc1';
â¤ count(*)[-5,64,0]  ğ„€
1
drop table if exists atomic_table_18;
create table atomic_table_18(c1 int,c2 varchar(25));
insert into atomic_table_18 values (6,"a"),(7,"b");
set autocommit=0;
alter table atomic_table_18 add index key1(c1);
alter table atomic_table_18 alter index key1 visible;
use transaction_enhance;
show create table atomic_table_18;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_18  Â¦  CREATE TABLE `atomic_table_18` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL
)
rollback;
show create table atomic_table_18;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_18  Â¦  CREATE TABLE `atomic_table_18` (
  `c1` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL
)
show index from atomic_table_18;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]
truncate table atomic_table_18;
use transaction_enhance;
drop table atomic_table_18;
select * from atomic_table_18;
SQL parser error: table "atomic_table_18" does not exist
commit;
select * from atomic_table_18;
SQL parser error: table "atomic_table_18" does not exist
set autocommit=1;
drop table if exists atomic_table_18;
create table atomic_table_18(c1 int,c2 varchar(25));
insert into atomic_table_18 values (6,"a"),(7,"b");
set autocommit=0;
drop table atomic_table_18;
use transaction_enhance;
drop table atomic_table_18;
no such table transaction_enhance.atomic_table_18
select * from atomic_table_18;
SQL parser error: table "atomic_table_18" does not exist
commit;
select * from atomic_table_18;
SQL parser error: table "atomic_table_18" does not exist
set autocommit=1;
drop account if exists trans_acc1;
drop table if exists alter01;
drop table if exists alter02;
create table alter01(col1 int primary key,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 modify col1 float;
use transaction_enhance;
insert into alter01 values (8,"h");
select * from alter01;
â¤ col1[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h
insert into alter01 values (6,"h");
commit;
select * from alter01;
â¤ col1[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h  ğ„€
6.0  Â¦  h
drop table if exists alter01;
drop table if exists alter02;
create table alter01(col1 int not null ,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 modify col1 float;
use transaction_enhance;
insert into alter01 values (8,"h");
select * from alter01;
â¤ col1[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h
insert into alter01 values (6,"h");
commit;
select * from alter01;
â¤ col1[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h  ğ„€
6.0  Â¦  h
drop table if exists atomic_table_12_5;
create table atomic_table_12_5(c1 int,c2 varchar(25));
insert into atomic_table_12_5 values (3,"a"),(4,"b"),(5,"c");
alter table atomic_table_12_5 add index key1(c1);
begin;
alter table atomic_table_12_5 change c1 clNew double;
use transaction_enhance;
insert into atomic_table_12_5 values (8,"h");
show create table atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_5  Â¦  CREATE TABLE `atomic_table_12_5` (
  `clNew` double DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`clNew`)
)
select * from atomic_table_12_5;
â¤ clnew[8,54,0]  Â¦  c2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h
show create table atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_5  Â¦  CREATE TABLE `atomic_table_12_5` (
  `clNew` double DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`clNew`)
)
drop table if exists alter01;
create table alter01(col1 int primary key,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 change col1 col1New float;
use transaction_enhance;
insert into alter01 values (8,"h");
select * from alter01;
â¤ col1new[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h
insert into alter01 values (6,"h");
select * from alter01;
â¤ col1new[7,24,0]  Â¦  col2[12,-1,0]  ğ„€
3.0  Â¦  a  ğ„€
4.0  Â¦  b  ğ„€
5.0  Â¦  c  ğ„€
8.0  Â¦  h  ğ„€
6.0  Â¦  h
drop table if exists atomic_table_12_5;
create table atomic_table_12_5(c1 int,c2 varchar(25));
insert into atomic_table_12_5 values (3,"a"),(4,"b"),(5,"c");
alter table atomic_table_12_5 add index key1(c1);
begin;
alter table atomic_table_12_5 rename column c1 to clNew;
use transaction_enhance;
insert into atomic_table_12_5 values (8,"h");
show create table atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_5  Â¦  CREATE TABLE `atomic_table_12_5` (
  `clNew` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`clNew`)
)
select * from atomic_table_12_5;
â¤ clnew[4,32,0]  Â¦  c2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
8  Â¦  h
show create table atomic_table_12_5;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
atomic_table_12_5  Â¦  CREATE TABLE `atomic_table_12_5` (
  `clNew` int DEFAULT NULL,
  `c2` varchar(25) DEFAULT NULL,
  KEY `key1` (`clNew`)
)
drop table if exists alter01;
create table alter01(col1 int primary key,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 rename column col1 to col1New;
use transaction_enhance;
insert into alter01 values (8,"h");
select * from alter01;
â¤ col1new[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
8  Â¦  h
insert into alter01 values (6,"h");
select * from alter01;
â¤ col1new[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
8  Â¦  h  ğ„€
6  Â¦  h
drop table if exists alter01;
create table alter01(col1 int,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 add constraint primary key (col1);
use transaction_enhance;
insert into alter01 values (5,"h");
Duplicate entry '5' for key 'col1'
select * from alter01;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c
insert into alter01 values (6,"h");
select * from alter01;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
6  Â¦  h
drop table if exists alter01;
create table alter01(col1 int primary key,col2 varchar(25));
insert into alter01 values (3,"a"),(4,"b"),(5,"c");
begin;
alter table alter01 drop primary key;
use transaction_enhance;
insert into alter01 values (5,"h");
select * from alter01;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
5  Â¦  h
insert into alter01 values (6,"h");
select * from alter01;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  ğ„€
3  Â¦  a  ğ„€
4  Â¦  b  ğ„€
5  Â¦  c  ğ„€
5  Â¦  h  ğ„€
6  Â¦  h
