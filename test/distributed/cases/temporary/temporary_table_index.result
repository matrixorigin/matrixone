drop database if exists temp_index;
create database temp_index;
use temp_index;
create temporary table temp_idx1 (
id int,
name varchar(50),
age int,
index idx_name (name)
);
insert into temp_idx1 values (1, 'alice', 25);
insert into temp_idx1 values (2, 'bob', 30);
insert into temp_idx1 values (3, 'charlie', 25);
select * from temp_idx1 where name = 'bob';
â¤ id[4,32,0]  Â¦  name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
2  Â¦  bob  Â¦  30
show index from temp_idx1;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_idx1  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name
drop table temp_idx1;
create temporary table temp_idx2 (
id int,
name varchar(50),
age int
);
create index idx_name on temp_idx2(name);
create index idx_age on temp_idx2(age);
insert into temp_idx2 values (1, 'alice', 25);
insert into temp_idx2 values (2, 'bob', 30);
insert into temp_idx2 values (3, 'charlie', 25);
select * from temp_idx2 where name = 'alice';
â¤ id[4,32,0]  Â¦  name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
1  Â¦  alice  Â¦  25
select * from temp_idx2 where age = 25;
â¤ id[4,32,0]  Â¦  name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
1  Â¦  alice  Â¦  25  ğ„€
3  Â¦  charlie  Â¦  25
show index from temp_idx2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_idx2  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name  ğ„€
temp_idx2  Â¦  1  Â¦  idx_age  Â¦  1  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age
drop table temp_idx2;
create temporary table temp_unique (
id int,
email varchar(100)
);
create unique index idx_email on temp_unique(email);
insert into temp_unique values (1, 'alice@example.com');
insert into temp_unique values (2, 'bob@example.com');
insert into temp_unique values (3, 'alice@example.com');
-- @regex("Duplicate entry", true)
Duplicate entry 'alice@example.com' for key 'email'
select * from temp_unique;
â¤ id[4,32,0]  Â¦  email[12,-1,0]  ğ„€
1  Â¦  alice@example.com  ğ„€
2  Â¦  bob@example.com
drop table temp_unique;
create temporary table temp_unique2 (
id int,
username varchar(50),
unique index idx_username (username)
);
insert into temp_unique2 values (1, 'user1');
insert into temp_unique2 values (2, 'user2');
insert into temp_unique2 values (3, 'user1');  -- åº”è¯¥å¤±è´¥
-- @regex("Duplicate entry", true)
Duplicate entry 'user1' for key 'username'
select * from temp_unique2;
â¤ id[4,32,0]  Â¦  username[12,-1,0]  ğ„€
1  Â¦  user1  ğ„€
2  Â¦  user2
drop table temp_unique2;
create temporary table temp_composite (
id int,
first_name varchar(50),
last_name varchar(50),
age int
);
create index idx_name on temp_composite(first_name, last_name);
create index idx_name_age on temp_composite(first_name, last_name, age);
insert into temp_composite values (1, 'john', 'doe', 30);
insert into temp_composite values (2, 'jane', 'smith', 25);
insert into temp_composite values (3, 'john', 'smith', 35);
select * from temp_composite where first_name = 'john';
â¤ id[4,32,0]  Â¦  first_name[12,-1,0]  Â¦  last_name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
1  Â¦  john  Â¦  doe  Â¦  30  ğ„€
3  Â¦  john  Â¦  smith  Â¦  35
select * from temp_composite where first_name = 'john' and last_name = 'doe';
â¤ id[4,32,0]  Â¦  first_name[12,-1,0]  Â¦  last_name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
1  Â¦  john  Â¦  doe  Â¦  30
select * from temp_composite where first_name = 'john' and last_name = 'smith' and age = 35;
â¤ id[4,32,0]  Â¦  first_name[12,-1,0]  Â¦  last_name[12,-1,0]  Â¦  age[4,32,0]  ğ„€
3  Â¦  john  Â¦  smith  Â¦  35
show index from temp_composite;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_composite  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  first_name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  first_name  ğ„€
temp_composite  Â¦  1  Â¦  idx_name  Â¦  2  Â¦  last_name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  last_name  ğ„€
temp_composite  Â¦  1  Â¦  idx_name_age  Â¦  1  Â¦  first_name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  first_name  ğ„€
temp_composite  Â¦  1  Â¦  idx_name_age  Â¦  2  Â¦  last_name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  last_name  ğ„€
temp_composite  Â¦  1  Â¦  idx_name_age  Â¦  3  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age
drop table temp_composite;
create temporary table temp_alter_idx (
id int,
name varchar(50),
email varchar(100),
age int
);
insert into temp_alter_idx values (1, 'alice', 'alice@example.com', 25);
insert into temp_alter_idx values (2, 'bob', 'bob@example.com', 30);
alter table temp_alter_idx add index idx_name (name);
alter table temp_alter_idx add unique index idx_email (email);
alter table temp_alter_idx add index idx_name_age (name, age);
show index from temp_alter_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_alter_idx  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name  ğ„€
temp_alter_idx  Â¦  0  Â¦  idx_email  Â¦  1  Â¦  email  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  email  ğ„€
temp_alter_idx  Â¦  1  Â¦  idx_name_age  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name  ğ„€
temp_alter_idx  Â¦  1  Â¦  idx_name_age  Â¦  2  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age
select * from temp_alter_idx where name = 'alice';
â¤ id[4,32,0]  Â¦  name[12,-1,0]  Â¦  email[12,-1,0]  Â¦  age[4,32,0]  ğ„€
1  Â¦  alice  Â¦  alice@example.com  Â¦  25
select * from temp_alter_idx where email = 'bob@example.com';
â¤ id[4,32,0]  Â¦  name[12,-1,0]  Â¦  email[12,-1,0]  Â¦  age[4,32,0]  ğ„€
2  Â¦  bob  Â¦  bob@example.com  Â¦  30
drop table temp_alter_idx;
create temporary table temp_drop_idx (
id int,
name varchar(50),
age int,
index idx_name (name),
index idx_age (age)
);
insert into temp_drop_idx values (1, 'alice', 25);
insert into temp_drop_idx values (2, 'bob', 30);
show index from temp_drop_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_drop_idx  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name  ğ„€
temp_drop_idx  Â¦  1  Â¦  idx_age  Â¦  1  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age
alter table temp_drop_idx drop index idx_name;
show index from temp_drop_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_drop_idx  Â¦  1  Â¦  idx_age  Â¦  1  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age
alter table temp_drop_idx drop index idx_age;
show index from temp_drop_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]
drop table temp_drop_idx;
create temporary table temp_drop_idx2 (
id int,
name varchar(50),
email varchar(100)
);
create index idx_name on temp_drop_idx2(name);
create index idx_email on temp_drop_idx2(email);
show index from temp_drop_idx2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_drop_idx2  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name  ğ„€
temp_drop_idx2  Â¦  1  Â¦  idx_email  Â¦  1  Â¦  email  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  email
drop index idx_name on temp_drop_idx2;
show index from temp_drop_idx2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_drop_idx2  Â¦  1  Â¦  idx_email  Â¦  1  Â¦  email  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  email
drop index idx_email on temp_drop_idx2;
show index from temp_drop_idx2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]
drop table temp_drop_idx2;
create temporary table temp_fulltext (
id int primary key,
title varchar(100),
content text
);
create fulltext index idx_ft_title on temp_fulltext(title);
create fulltext index idx_ft_content on temp_fulltext(content);
insert into temp_fulltext values (1, 'introduction to matrixone', 'matrixone is a hyperconverged database');
no such table temp_index.temp_fulltext
insert into temp_fulltext values (2, 'temporary tables guide', 'learn how to use temporary tables');
no such table temp_index.temp_fulltext
insert into temp_fulltext values (3, 'index management', 'creating and managing indexes in matrixone');
no such table temp_index.temp_fulltext
show index from temp_fulltext;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_fulltext  Â¦  0  Â¦  PRIMARY  Â¦  1  Â¦  id  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦    Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  id  ğ„€
temp_fulltext  Â¦  1  Â¦  idx_ft_title  Â¦  1  Â¦  title  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  fulltext  Â¦    Â¦    Â¦    Â¦  YES  Â¦  title  ğ„€
temp_fulltext  Â¦  1  Â¦  idx_ft_content  Â¦  1  Â¦  content  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  fulltext  Â¦    Â¦    Â¦    Â¦  YES  Â¦  content
drop table temp_fulltext;
create temporary table temp_fulltext2 (
id int primary key,
title varchar(100),
body text
);
create fulltext index idx_ft_multi on temp_fulltext2(title, body);
insert into temp_fulltext2 values (1, 'database tutorial', 'learn about databases and sql');
no such table temp_index.temp_fulltext2
insert into temp_fulltext2 values (2, 'matrixone features', 'explore the features of matrixone');
no such table temp_index.temp_fulltext2
show index from temp_fulltext2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_fulltext2  Â¦  0  Â¦  PRIMARY  Â¦  1  Â¦  id  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦    Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  id  ğ„€
temp_fulltext2  Â¦  1  Â¦  idx_ft_multi  Â¦  1  Â¦  title  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  fulltext  Â¦    Â¦    Â¦    Â¦  YES  Â¦  title  ğ„€
temp_fulltext2  Â¦  1  Â¦  idx_ft_multi  Â¦  2  Â¦  body  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  fulltext  Â¦    Â¦    Â¦    Â¦  YES  Â¦  body
drop table temp_fulltext2;
set experimental_ivf_index = 1;
create temporary table temp_vector (
id int primary key,
embedding vecf32(3)
);
create index idx_ivf using ivfflat on temp_vector(embedding) lists=1 op_type "vector_l2_ops";
insert into temp_vector values (1, '[1.0, 2.0, 3.0]');
no such table temp_index.temp_vector
insert into temp_vector values (2, '[4.0, 5.0, 6.0]');
no such table temp_index.temp_vector
insert into temp_vector values (3, '[7.0, 8.0, 9.0]');
no such table temp_index.temp_vector
show index from temp_vector;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_vector  Â¦  0  Â¦  PRIMARY  Â¦  1  Â¦  id  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦    Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  id  ğ„€
temp_vector  Â¦  1  Â¦  idx_ivf  Â¦  1  Â¦  embedding  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  ivfflat  Â¦    Â¦    Â¦  {"lists":"1","op_type":"vector_l2_ops"}  Â¦  YES  Â¦  embedding
drop table temp_vector;
create temporary table temp_vector2 (
id int primary key,
vec128 vecf32(128)
);
create index idx_vec128 using ivfflat on temp_vector2(vec128) lists=2 op_type "vector_l2_ops";
show index from temp_vector2;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_vector2  Â¦  0  Â¦  PRIMARY  Â¦  1  Â¦  id  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦    Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  id  ğ„€
temp_vector2  Â¦  1  Â¦  idx_vec128  Â¦  1  Â¦  vec128  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  ivfflat  Â¦    Â¦    Â¦  {"lists":"2","op_type":"vector_l2_ops"}  Â¦  YES  Â¦  vec128
drop table temp_vector2;
set experimental_ivf_index = 0;
create temporary table temp_multi_idx (
id int primary key,
username varchar(50),
email varchar(100),
age int,
bio text,
created_at timestamp
);
create index idx_username on temp_multi_idx(username);
create unique index idx_email on temp_multi_idx(email);
create index idx_age_created on temp_multi_idx(age, created_at);
create fulltext index idx_bio on temp_multi_idx(bio);
show index from temp_multi_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_multi_idx  Â¦  0  Â¦  PRIMARY  Â¦  1  Â¦  id  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦    Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  id  ğ„€
temp_multi_idx  Â¦  1  Â¦  idx_username  Â¦  1  Â¦  username  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  username  ğ„€
temp_multi_idx  Â¦  0  Â¦  idx_email  Â¦  1  Â¦  email  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  email  ğ„€
temp_multi_idx  Â¦  1  Â¦  idx_age_created  Â¦  1  Â¦  age  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  age  ğ„€
temp_multi_idx  Â¦  1  Â¦  idx_age_created  Â¦  2  Â¦  created_at  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  created_at  ğ„€
temp_multi_idx  Â¦  1  Â¦  idx_bio  Â¦  1  Â¦  bio  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦  fulltext  Â¦    Â¦    Â¦    Â¦  YES  Â¦  bio
insert into temp_multi_idx values
(1, 'alice', 'alice@example.com', 25, 'software engineer', '2024-01-01 10:00:00'),
(2, 'bob', 'bob@example.com', 30, 'data scientist', '2024-01-02 11:00:00'),
(3, 'charlie', 'charlie@example.com', 25, 'product manager', '2024-01-03 12:00:00');
no such table temp_index.temp_multi_idx
select * from temp_multi_idx where username = 'alice';
â¤ id[4,32,0]  Â¦  username[12,-1,0]  Â¦  email[12,-1,0]  Â¦  age[4,32,0]  Â¦  bio[12,0,0]  Â¦  created_at[93,64,0]
select * from temp_multi_idx where email = 'bob@example.com';
â¤ id[4,32,0]  Â¦  username[12,-1,0]  Â¦  email[12,-1,0]  Â¦  age[4,32,0]  Â¦  bio[12,0,0]  Â¦  created_at[93,64,0]
select * from temp_multi_idx where age = 25;
â¤ id[4,32,0]  Â¦  username[12,-1,0]  Â¦  email[12,-1,0]  Â¦  age[4,32,0]  Â¦  bio[12,0,0]  Â¦  created_at[93,64,0]
drop table temp_multi_idx;
create temporary table temp_empty_idx (
id int,
name varchar(50)
);
create index idx_name on temp_empty_idx(name);
show index from temp_empty_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_empty_idx  Â¦  1  Â¦  idx_name  Â¦  1  Â¦  name  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  name
insert into temp_empty_idx values (1, 'test');
select * from temp_empty_idx where name = 'test';
â¤ id[4,32,0]  Â¦  name[12,-1,0]  ğ„€
1  Â¦  test
drop table temp_empty_idx;
create temporary table temp_data_idx (
id int,
value varchar(50)
);
insert into temp_data_idx values (1, 'value1');
insert into temp_data_idx values (2, 'value2');
insert into temp_data_idx values (3, 'value3');
create index idx_value on temp_data_idx(value);
show index from temp_data_idx;
â¤ Table[12,-1,0]  Â¦  Non_unique[-5,64,0]  Â¦  Key_name[12,-1,0]  Â¦  Seq_in_index[4,32,0]  Â¦  Column_name[12,-1,0]  Â¦  Collation[12,-1,0]  Â¦  Cardinality[-5,64,0]  Â¦  Sub_part[12,-1,0]  Â¦  Packed[12,-1,0]  Â¦  Null[12,-1,0]  Â¦  Index_type[12,-1,0]  Â¦  Comment[1,0,0]  Â¦  Index_comment[12,-1,0]  Â¦  Index_params[12,-1,0]  Â¦  Visible[12,-1,0]  Â¦  Expression[12,-1,0]  ğ„€
temp_data_idx  Â¦  1  Â¦  idx_value  Â¦  1  Â¦  value  Â¦  A  Â¦  0  Â¦  NULL  Â¦  NULL  Â¦  YES  Â¦    Â¦    Â¦    Â¦    Â¦  YES  Â¦  value
select * from temp_data_idx where value = 'value2';
â¤ id[4,32,0]  Â¦  value[12,-1,0]  ğ„€
2  Â¦  value2
drop table temp_data_idx;
create temporary table temp_no_idx (
id int,
name varchar(50)
);
drop index idx_nonexistent on temp_no_idx;  -- åº”è¯¥å¤±è´¥
internal error: not found index: idx_nonexistent
drop table temp_no_idx;
drop database temp_index;
