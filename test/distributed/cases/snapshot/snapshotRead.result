drop database if exists test;
create database test;
use test;
drop table if exists snapshot01;
create table snapshot01 (col1 int primary key , col2 decimal, col3 bigint, col4 double, col5 float);
insert into snapshot01 values (1, 10.50, 1234567890, 123.45, 678.90),
(2, 20.75, 9876543210, 234.56, 789.01),
(3, 30.10, 1122334455, 345.67, 890.12),
(4, 40.25, 2233445566, 456.78, 901.23),
(5, 50.40, -3344556677, 567.89, 101.24),
(6, 60.55, -4455667788, 678.90, 112.35),
(7, 70.70, 5566778899, 789.01, 123.46),
(8, 80.85, -6677889900, 890.12, 134.57),
(9, 90.00, 7788990011, 901.23, 145.68),
(10, 100.00, 8899001122, 101.24, 156.79);
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01;
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
show create table snapshot01;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
snapshot01  Â¦  CREATE TABLE `snapshot01` (
  `col1` int NOT NULL,
  `col2` decimal(38,0) DEFAULT NULL,
  `col3` bigint DEFAULT NULL,
  `col4` double DEFAULT NULL,
  `col5` float DEFAULT NULL,
  PRIMARY KEY (`col1`)
)
drop snapshot if exists sp01;
create snapshot sp01 for account;
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
show snapshots where SNAPSHOT_NAME = 'sp01';
â¤ snapshot_name[12,-1,0]  Â¦  timestamp[12,-1,0]  Â¦  snapshot_level[12,-1,0]  Â¦  account_name[12,-1,0]  Â¦  database_name[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
sp01  Â¦  2026-01-24 14:50:46.775074999  Â¦  account  Â¦  sys  Â¦    Â¦  
insert into snapshot01 values(11, 100.00, 8899001122, 101.24, 156.79);
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
11
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
update snapshot01 set col1 = 100 where col1 = 243214312;
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
11
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
delete from snapshot01 where col1 < 10;
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
2
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
alter table snapshot01 add column column1 bigint first;
show create table snapshot01;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
snapshot01  Â¦  CREATE TABLE `snapshot01` (
  `column1` bigint DEFAULT NULL,
  `col1` int NOT NULL,
  `col2` decimal(38,0) DEFAULT NULL,
  `col3` bigint DEFAULT NULL,
  `col4` double DEFAULT NULL,
  `col5` float DEFAULT NULL,
  PRIMARY KEY (`col1`)
)
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
2
select * from snapshot01;
â¤ column1[-5,64,0]  Â¦  col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
null  Â¦  10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79  ğ„€
null  Â¦  11  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
truncate table snapshot01;
show create table snapshot01;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
snapshot01  Â¦  CREATE TABLE `snapshot01` (
  `column1` bigint DEFAULT NULL,
  `col1` int NOT NULL,
  `col2` decimal(38,0) DEFAULT NULL,
  `col3` bigint DEFAULT NULL,
  `col4` double DEFAULT NULL,
  `col5` float DEFAULT NULL,
  PRIMARY KEY (`col1`)
)
select count(*) from snapshot01;
â¤ count(*)[-5,64,0]  ğ„€
0
select * from snapshot01;
â¤ column1[-5,64,0]  Â¦  col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
drop table snapshot01;
select count(*) from snapshot01;
SQL parser error: table "snapshot01" does not exist
select count(*) from snapshot01 {snapshot = 'sp01'};
â¤ count(*)[-5,64,0]  ğ„€
10
select * from snapshot01 {snapshot = 'sp01'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23  ğ„€
5  Â¦  50  Â¦  -3344556677  Â¦  567.89  Â¦  101.24  ğ„€
6  Â¦  61  Â¦  -4455667788  Â¦  678.9  Â¦  112.35  ğ„€
7  Â¦  71  Â¦  5566778899  Â¦  789.01  Â¦  123.46  ğ„€
8  Â¦  81  Â¦  -6677889900  Â¦  890.12  Â¦  134.57  ğ„€
9  Â¦  90  Â¦  7788990011  Â¦  901.23  Â¦  145.68  ğ„€
10  Â¦  100  Â¦  8899001122  Â¦  101.24  Â¦  156.79
select count(*) from mo_catalog.mo_tables{snapshot = 'sp01'} where reldatabase = 'test';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'sp01'} where datname = 'test';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272526  Â¦  test  Â¦  def  Â¦  create database test  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:46  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp01'} where att_database = 'test';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
col4  ğ„€
col5  ğ„€
__mo_rowid
drop snapshot sp01;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]
select count(*) from mo_catalog.mo_tables{snapshot = 'sp01'} where reldatabase = 'test';
internal error: find 0 snapshot records by name(sp01), expect only 1
select * from mo_catalog.mo_database{snapshot = 'sp01'} where datname = 'test';
internal error: find 0 snapshot records by name(sp01), expect only 1
select attname from mo_catalog.mo_columns{snapshot = 'sp01'} where att_database = 'test';
internal error: find 0 snapshot records by name(sp01), expect only 1
drop table if exists snapshot02;
create table test_snapshot_read (a int);
insert into test_snapshot_read (a) VALUES(1), (2), (3), (4), (5),(6), (7), (8), (9), (10), (11), (12),(13), (14), (15), (16), (17), (18), (19), (20),(21), (22), (23), (24), (25), (26), (27), (28), (29), (30),(31), (32), (33), (34), (35), (36), (37), (38), (39), (40),(41), (42), (43), (44), (45), (46), (47), (48), (49), (50),(51), (52), (53), (54), (55), (56), (57), (58), (59), (60),(61), (62), (63), (64), (65), (66), (67), (68), (69), (70),(71), (72), (73), (74), (75), (76), (77), (78), (79), (80), (81), (82), (83), (84), (85), (86), (87), (88), (89), (90),(91), (92), (93), (94), (95), (96), (97), (98), (99), (100);
select count(*) from test_snapshot_read;
â¤ count(*)[-5,64,0]  ğ„€
100
create snapshot snapshot_01 for account;
create snapshot snapshot_01 for account;
internal error: snapshot snapshot_01 already exists
drop snapshot snapshot_01;
drop table test_snapshot_read;
drop table if exists snapshot03;
drop table if exists snapshot04;
create table snapshot03(col1 int unique key,
col2 varchar(20),
col3 int,
col4 bigint);
create table snapshot04(col1 int,
col2 int,
col3 int primary key,
constraint `c1` foreign key(col1) references snapshot03(col1));
show create table snapshot03;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
snapshot03  Â¦  CREATE TABLE `snapshot03` (
  `col1` int DEFAULT NULL,
  `col2` varchar(20) DEFAULT NULL,
  `col3` int DEFAULT NULL,
  `col4` bigint DEFAULT NULL,
  UNIQUE KEY `col1` (`col1`)
)
show create table snapshot04;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
snapshot04  Â¦  CREATE TABLE `snapshot04` (
  `col1` int DEFAULT NULL,
  `col2` int DEFAULT NULL,
  `col3` int NOT NULL,
  PRIMARY KEY (`col3`),
  CONSTRAINT `c1` FOREIGN KEY (`col1`) REFERENCES `snapshot03` (`col1`) ON DELETE RESTRICT ON UPDATE RESTRICT
)
insert into snapshot03 values(1,'sfhuwe',1,1);
insert into snapshot03 values(2,'37829901k3d',2,2);
insert into snapshot04 values(1,1,1);
insert into snapshot04 values(2,2,2);
select * from snapshot03;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  Â¦  col4[-5,64,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  Â¦  2
select * from snapshot04;
â¤ col1[4,32,0]  Â¦  col2[4,32,0]  Â¦  col3[4,32,0]  ğ„€
1  Â¦  1  Â¦  1  ğ„€
2  Â¦  2  Â¦  2
drop snapshot if exists sp03;
create snapshot sp03 for account;
show snapshots where account_name = 'sys';
â¤ snapshot_name[12,-1,0]  Â¦  timestamp[12,-1,0]  Â¦  snapshot_level[12,-1,0]  Â¦  account_name[12,-1,0]  Â¦  database_name[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
sp03  Â¦  2026-01-24 14:50:47.783113999  Â¦  account  Â¦  sys  Â¦    Â¦  
insert into snapshot03 values(3,'sfhuwe',1,1);
insert into snapshot03 values(4,'37829901k3d',2,2);
drop snapshot if exists sp04;
create snapshot sp04 for account;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
sp04  Â¦  2026-01-24 14:50:47.849055999  Â¦  account  Â¦  sys  Â¦    Â¦    ğ„€
sp03  Â¦  2026-01-24 14:50:47.783113999  Â¦  account  Â¦  sys  Â¦    Â¦  
select * from snapshot03;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  Â¦  col4[-5,64,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  Â¦  2  ğ„€
3  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
4  Â¦  37829901k3d  Â¦  2  Â¦  2
select count(*) from snapshot03 {snapshot = 'sp03'};
â¤ count(*)[-5,64,0]  ğ„€
2
select * from snapshot03{snapshot = 'sp03'};
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  Â¦  col4[-5,64,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  Â¦  2
select count(*) from snapshot04 {snapshot = 'sp03'};
â¤ count(*)[-5,64,0]  ğ„€
2
select * from snapshot04{snapshot = 'sp03'};
â¤ col1[4,32,0]  Â¦  col2[4,32,0]  Â¦  col3[4,32,0]  ğ„€
1  Â¦  1  Â¦  1  ğ„€
2  Â¦  2  Â¦  2
select count(*) from snapshot03 {snapshot = 'sp04'};
â¤ count(*)[-5,64,0]  ğ„€
4
select * from snapshot03{snapshot = 'sp04'};
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  Â¦  col4[-5,64,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  Â¦  2  ğ„€
3  Â¦  sfhuwe  Â¦  1  Â¦  1  ğ„€
4  Â¦  37829901k3d  Â¦  2  Â¦  2
alter table snapshot03 drop column col4;
insert into snapshot03 values(5,'sfhuwe',1);
select * from snapshot03;
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  ğ„€
3  Â¦  sfhuwe  Â¦  1  ğ„€
4  Â¦  37829901k3d  Â¦  2  ğ„€
5  Â¦  sfhuwe  Â¦  1
select count(*) from snapshot03 {snapshot = 'sp03'};
â¤ count(*)[-5,64,0]  ğ„€
2
drop snapshot if exists sp05;
create snapshot sp05 for account;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
sp05  Â¦  2026-01-24 14:50:48.015095999  Â¦  account  Â¦  sys  Â¦    Â¦    ğ„€
sp04  Â¦  2026-01-24 14:50:47.849055999  Â¦  account  Â¦  sys  Â¦    Â¦    ğ„€
sp03  Â¦  2026-01-24 14:50:47.783113999  Â¦  account  Â¦  sys  Â¦    Â¦  
select count(*) from snapshot03 {snapshot = 'sp05'};
â¤ count(*)[-5,64,0]  ğ„€
5
select * from snapshot03{snapshot = 'sp05'};
â¤ col1[4,32,0]  Â¦  col2[12,-1,0]  Â¦  col3[4,32,0]  ğ„€
1  Â¦  sfhuwe  Â¦  1  ğ„€
2  Â¦  37829901k3d  Â¦  2  ğ„€
3  Â¦  sfhuwe  Â¦  1  ğ„€
4  Â¦  37829901k3d  Â¦  2  ğ„€
5  Â¦  sfhuwe  Â¦  1
select count(*) from mo_catalog.mo_tables{snapshot = 'sp03'} where reldatabase = 'test';
â¤ count(*)[-5,64,0]  ğ„€
3
select * from mo_catalog.mo_database{snapshot = 'sp04'} where datname = 'test';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272526  Â¦  test  Â¦  def  Â¦  create database test  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:46  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp05'} where att_database = 'test';
â¤ attname[12,-1,0]  ğ„€
__mo_index_idx_col  ğ„€
__mo_index_pri_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_rowid
drop snapshot sp05;
drop snapshot sp04;
drop snapshot sp03;
drop table snapshot04;
drop table snapshot03;
drop database test;
drop account if exists acc01;
create account acc01 admin_name = 'test_account' identified by '111';
drop database if exists test01;
create database test01;
use test01;
drop table if exists acc01_snap;
create table acc01_snap(col1 int, col2 char, col3 binary, primary key(col1, col2));
insert into acc01_snap values (1, 'a', '1');
insert into acc01_snap values (2, 'a', '1');
insert into acc01_snap values (10, 'm', null);
select * from acc01_snap;
â¤ col1[4,32,0]  Â¦  col2[1,1,0]  Â¦  col3[12,3,0]  ğ„€
1  Â¦  a  Â¦  1  ğ„€
2  Â¦  a  Â¦  1  ğ„€
10  Â¦  m  Â¦  null
drop snapshot if exists snap01;
create snapshot snap01 for account acc01;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
snap01  Â¦  2026-01-24 14:50:48.719876999  Â¦  account  Â¦  acc01  Â¦    Â¦  
use test01;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]
select count(*) from acc01_snap{snapshot = 'snap01'};
No database selected
select count(*) from mo_catalog.mo_tables{snapshot = 'snap01'} where reldatabase = 'test01';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'snap01'} where datname = 'test01';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272615  Â¦  test01  Â¦  def  Â¦  create database test01  Â¦  2  Â¦  2  Â¦  2026-01-24 22:50:48  Â¦  1  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'snap01'} where att_database = 'test01';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_cpkey_col  ğ„€
__mo_rowid
drop database test01;
select count(*) from mo_catalog.mo_tables{snapshot = 'snap01'} where reldatabase = 'test01';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'snap01'} where datname = 'test01';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272615  Â¦  test01  Â¦  def  Â¦  create database test01  Â¦  2  Â¦  2  Â¦  2026-01-24 22:50:48  Â¦  1  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'snap01'} where att_database = 'test01';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_cpkey_col  ğ„€
__mo_rowid
drop snapshot snap01;
drop account acc01;
drop account if exists acc02;
create account acc02 admin_name = 'test_account' identified by '111';
drop database if exists test02;
create database test02;
use test02;
drop table if exists acc02_test01;
create table acc02_test01 (col1 decimal, col2 char, col3 varchar(30), col4 float);
insert into acc02_test01 values (3242.234234, '1', 'weawf3redwe', 38293.3232);
insert into acc02_test01 values (323.32411, 'a', '3233234213', 323231221);
insert into acc02_test01 values (-32323, 'v', 'wqd3wq', -323232);
select count(*) from acc02_test01;
â¤ count(*)[-5,64,0]  ğ„€
3
drop snapshot if exists snap02;
create snapshot snap02 for account acc02;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
snap02  Â¦  2026-01-24 14:50:49.771404999  Â¦  account  Â¦  acc02  Â¦    Â¦  
show snapshots where account_name = 'acc02';
â¤ snapshot_name[12,-1,0]  Â¦  timestamp[12,-1,0]  Â¦  snapshot_level[12,-1,0]  Â¦  account_name[12,-1,0]  Â¦  database_name[12,-1,0]  Â¦  table_name[12,-1,0]  ğ„€
snap02  Â¦  2026-01-24 14:50:49.771404999  Â¦  account  Â¦  acc02  Â¦    Â¦  
select count(*) from acc02_test01 {snapshot = 'snap02'};
â¤ count(*)[-5,64,0]  ğ„€
3
select * from acc02_test01 {snapshot = 'snap02'};
â¤ col1[3,39,0]  Â¦  col2[1,1,0]  Â¦  col3[12,-1,0]  Â¦  col4[7,24,0]  ğ„€
3242  Â¦  1  Â¦  weawf3redwe  Â¦  38293.324  ğ„€
323  Â¦  a  Â¦  3233234213  Â¦  3.2323123E8  ğ„€
-32323  Â¦  v  Â¦  wqd3wq  Â¦  -323232.0
alter table acc02_test01 add column new int first;
show create table acc02_test01;
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
acc02_test01  Â¦  CREATE TABLE `acc02_test01` (
  `new` int DEFAULT NULL,
  `col1` decimal(38,0) DEFAULT NULL,
  `col2` char(1) DEFAULT NULL,
  `col3` varchar(30) DEFAULT NULL,
  `col4` float DEFAULT NULL
)
select count(*) from acc02_test01 {snapshot = 'snap02'};
â¤ count(*)[-5,64,0]  ğ„€
3
select * from acc02_test01 {snapshot = 'snap02'};
â¤ col1[3,39,0]  Â¦  col2[1,1,0]  Â¦  col3[12,-1,0]  Â¦  col4[7,24,0]  ğ„€
3242  Â¦  1  Â¦  weawf3redwe  Â¦  38293.324  ğ„€
323  Â¦  a  Â¦  3233234213  Â¦  3.2323123E8  ğ„€
-32323  Â¦  v  Â¦  wqd3wq  Â¦  -323232.0
truncate acc02_test01;
select count(*) from acc02_test01 {snapshot = 'snap02'};
â¤ count(*)[-5,64,0]  ğ„€
3
select * from acc02_test01 {snapshot = 'snap02'};
â¤ col1[3,39,0]  Â¦  col2[1,1,0]  Â¦  col3[12,-1,0]  Â¦  col4[7,24,0]  ğ„€
3242  Â¦  1  Â¦  weawf3redwe  Â¦  38293.324  ğ„€
323  Â¦  a  Â¦  3233234213  Â¦  3.2323123E8  ğ„€
-32323  Â¦  v  Â¦  wqd3wq  Â¦  -323232.0
insert into acc02_test01 values(1,1,2,3,4);
select count(*) from acc02_test01 {snapshot = 'snap02'};
â¤ count(*)[-5,64,0]  ğ„€
3
select * from acc02_test01 {snapshot = 'snap02'};
â¤ col1[3,39,0]  Â¦  col2[1,1,0]  Â¦  col3[12,-1,0]  Â¦  col4[7,24,0]  ğ„€
3242  Â¦  1  Â¦  weawf3redwe  Â¦  38293.324  ğ„€
323  Â¦  a  Â¦  3233234213  Â¦  3.2323123E8  ğ„€
-32323  Â¦  v  Â¦  wqd3wq  Â¦  -323232.0
select count(*) from mo_catalog.mo_tables{snapshot = 'snap02'} where reldatabase = 'test02';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'snap02'} where datname = 'test02';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272696  Â¦  test02  Â¦  def  Â¦  create database test02  Â¦  2  Â¦  2  Â¦  2026-01-24 22:50:49  Â¦  2  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'snap02'} where att_database = 'test02';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
col4  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
drop snapshot snap02;
drop table acc02_test01;
drop database test02;
drop account acc02;
drop database if exists test03;
create database test03;
use test03;
drop table if exists testsnap_03;
create table testsnap_03 (
employeeNumber int(11) not null ,
lastName char(50) not null ,
firstName char(50) not null ,
extension char(10) not null ,
email char(100) not null ,
officeCode char(10) not null ,
reportsTo int(11) DEFAULT NULL,
jobTitle char(50) not null ,
key (employeeNumber)
);
insert into testsnap_03(employeeNumber,lastName,firstName,extension,email,officeCode,reportsTo,jobTitle) values
(1002,'Murphy','Diane','x5800','dmurphy@classicmodelcars.com','1',NULL,'President'),
(1056,'Patterson','Mary','x4611','mpatterso@classicmodelcars.com','1',1002,'VP Sales'),
(1076,'Firrelli','Jeff','x9273','jfirrelli@classicmodelcars.com','1',1002,'VP Marketing'),
(1088,'Patterson','William','x4871','wpatterson@classicmodelcars.com','6',1056,'Sales Manager (APAC)'),
(1102,'Bondur','Gerard','x5408','gbondur@classicmodelcars.com','4',1056,'Sale Manager (EMEA)'),
(1143,'Bow','Anthony','x5428','abow@classicmodelcars.com','1',1056,'Sales Manager (NA)'),
(1165,'Jennings','Leslie','x3291','ljennings@classicmodelcars.com','1',1143,'Sales Rep'),
(1166,'Thompson','Leslie','x4065','lthompson@classicmodelcars.com','1',1143,'Sales Rep'),
(1188,'Firrelli','Julie','x2173','jfirrelli@classicmodelcars.com','2',1143,'Sales Rep'),
(1216,'Patterson','Steve','x4334','spatterson@classicmodelcars.com','2',1143,'Sales Rep');
drop snapshot if exists testsnap_03;
select count(*) from testsnap_03;
â¤ count(*)[-5,64,0]  ğ„€
10
create snapshot sp04 for account;
select count(*) from testsnap_03 {snapshot = 'sp04'};
â¤ count(*)[-5,64,0]  ğ„€
10
insert into testsnap_03 values (1286,'Tseng','Foon Yue','x2248','ftseng@classicmodelcars.com','3',1143,'Sales Rep'),
(1323,'Vanauf','George','x4102','gvanauf@classicmodelcars.com','3',1143,'Sales Rep'),
(1337,'Bondur','Loui','x6493','lbondur@classicmodelcars.com','4',1102,'Sales Rep'),
(1370,'Hernandez','Gerard','x2028','ghernande@classicmodelcars.com','4',1102,'Sales Rep'),
(1401,'Castillo','Pamela','x2759','pcastillo@classicmodelcars.com','4',1102,'Sales Rep');
select count(*) from testsnap_03 {snapshot = 'sp04'};
â¤ count(*)[-5,64,0]  ğ„€
10
drop snapshot if exists sp05;
create snapshot sp05 for account;
select * from testsnap_03;
â¤ employeenumber[4,32,0]  Â¦  lastname[1,50,0]  Â¦  firstname[1,50,0]  Â¦  extension[1,10,0]  Â¦  email[1,100,0]  Â¦  officecode[1,10,0]  Â¦  reportsto[4,32,0]  Â¦  jobtitle[1,50,0]  ğ„€
1002  Â¦  Murphy  Â¦  Diane  Â¦  x5800  Â¦  dmurphy@classicmodelcars.com  Â¦  1  Â¦  null  Â¦  President  ğ„€
1056  Â¦  Patterson  Â¦  Mary  Â¦  x4611  Â¦  mpatterso@classicmodelcars.com  Â¦  1  Â¦  1002  Â¦  VP Sales  ğ„€
1076  Â¦  Firrelli  Â¦  Jeff  Â¦  x9273  Â¦  jfirrelli@classicmodelcars.com  Â¦  1  Â¦  1002  Â¦  VP Marketing  ğ„€
1088  Â¦  Patterson  Â¦  William  Â¦  x4871  Â¦  wpatterson@classicmodelcars.com  Â¦  6  Â¦  1056  Â¦  Sales Manager (APAC)  ğ„€
1102  Â¦  Bondur  Â¦  Gerard  Â¦  x5408  Â¦  gbondur@classicmodelcars.com  Â¦  4  Â¦  1056  Â¦  Sale Manager (EMEA)  ğ„€
1143  Â¦  Bow  Â¦  Anthony  Â¦  x5428  Â¦  abow@classicmodelcars.com  Â¦  1  Â¦  1056  Â¦  Sales Manager (NA)  ğ„€
1165  Â¦  Jennings  Â¦  Leslie  Â¦  x3291  Â¦  ljennings@classicmodelcars.com  Â¦  1  Â¦  1143  Â¦  Sales Rep  ğ„€
1166  Â¦  Thompson  Â¦  Leslie  Â¦  x4065  Â¦  lthompson@classicmodelcars.com  Â¦  1  Â¦  1143  Â¦  Sales Rep  ğ„€
1188  Â¦  Firrelli  Â¦  Julie  Â¦  x2173  Â¦  jfirrelli@classicmodelcars.com  Â¦  2  Â¦  1143  Â¦  Sales Rep  ğ„€
1216  Â¦  Patterson  Â¦  Steve  Â¦  x4334  Â¦  spatterson@classicmodelcars.com  Â¦  2  Â¦  1143  Â¦  Sales Rep  ğ„€
1286  Â¦  Tseng  Â¦  Foon Yue  Â¦  x2248  Â¦  ftseng@classicmodelcars.com  Â¦  3  Â¦  1143  Â¦  Sales Rep  ğ„€
1323  Â¦  Vanauf  Â¦  George  Â¦  x4102  Â¦  gvanauf@classicmodelcars.com  Â¦  3  Â¦  1143  Â¦  Sales Rep  ğ„€
1337  Â¦  Bondur  Â¦  Loui  Â¦  x6493  Â¦  lbondur@classicmodelcars.com  Â¦  4  Â¦  1102  Â¦  Sales Rep  ğ„€
1370  Â¦  Hernandez  Â¦  Gerard  Â¦  x2028  Â¦  ghernande@classicmodelcars.com  Â¦  4  Â¦  1102  Â¦  Sales Rep  ğ„€
1401  Â¦  Castillo  Â¦  Pamela  Â¦  x2759  Â¦  pcastillo@classicmodelcars.com  Â¦  4  Â¦  1102  Â¦  Sales Rep
select * from testsnap_03 {snapshot = 'sp04'} where jobTitle = 'President';
â¤ employeenumber[4,32,0]  Â¦  lastname[1,50,0]  Â¦  firstname[1,50,0]  Â¦  extension[1,10,0]  Â¦  email[1,100,0]  Â¦  officecode[1,10,0]  Â¦  reportsto[4,32,0]  Â¦  jobtitle[1,50,0]  ğ„€
1002  Â¦  Murphy  Â¦  Diane  Â¦  x5800  Â¦  dmurphy@classicmodelcars.com  Â¦  1  Â¦  null  Â¦  President
select employeeNumber,lastName,firstName,extension from testsnap_03 {snapshot = 'sp04'} where extension = 'x4611';
â¤ employeeNumber[4,32,0]  Â¦  lastName[1,50,0]  Â¦  firstName[1,50,0]  Â¦  extension[1,10,0]  ğ„€
1056  Â¦  Patterson  Â¦  Mary  Â¦  x4611
select count(*) from testsnap_03 {snapshot = 'sp04'} where employeeNumber > 1000;
â¤ count(*)[-5,64,0]  ğ„€
10
drop table if exists testsnap_04;
create table testsnap_04 (
employeeNumber int(11) not null ,
lastName char(50) not null ,
firstName char(50) not null ,
extension char(10) not null
);
insert into testsnap_04 select employeeNumber,lastName,firstName,extension from testsnap_03{snapshot = 'sp04'};
select * from testsnap_04;
â¤ employeenumber[4,32,0]  Â¦  lastname[1,50,0]  Â¦  firstname[1,50,0]  Â¦  extension[1,10,0]  ğ„€
1002  Â¦  Murphy  Â¦  Diane  Â¦  x5800  ğ„€
1056  Â¦  Patterson  Â¦  Mary  Â¦  x4611  ğ„€
1076  Â¦  Firrelli  Â¦  Jeff  Â¦  x9273  ğ„€
1088  Â¦  Patterson  Â¦  William  Â¦  x4871  ğ„€
1102  Â¦  Bondur  Â¦  Gerard  Â¦  x5408  ğ„€
1143  Â¦  Bow  Â¦  Anthony  Â¦  x5428  ğ„€
1165  Â¦  Jennings  Â¦  Leslie  Â¦  x3291  ğ„€
1166  Â¦  Thompson  Â¦  Leslie  Â¦  x4065  ğ„€
1188  Â¦  Firrelli  Â¦  Julie  Â¦  x2173  ğ„€
1216  Â¦  Patterson  Â¦  Steve  Â¦  x4334
select * from testsnap_03 {snapshot = 'sp04'};
â¤ employeenumber[4,32,0]  Â¦  lastname[1,50,0]  Â¦  firstname[1,50,0]  Â¦  extension[1,10,0]  Â¦  email[1,100,0]  Â¦  officecode[1,10,0]  Â¦  reportsto[4,32,0]  Â¦  jobtitle[1,50,0]  ğ„€
1002  Â¦  Murphy  Â¦  Diane  Â¦  x5800  Â¦  dmurphy@classicmodelcars.com  Â¦  1  Â¦  null  Â¦  President  ğ„€
1056  Â¦  Patterson  Â¦  Mary  Â¦  x4611  Â¦  mpatterso@classicmodelcars.com  Â¦  1  Â¦  1002  Â¦  VP Sales  ğ„€
1076  Â¦  Firrelli  Â¦  Jeff  Â¦  x9273  Â¦  jfirrelli@classicmodelcars.com  Â¦  1  Â¦  1002  Â¦  VP Marketing  ğ„€
1088  Â¦  Patterson  Â¦  William  Â¦  x4871  Â¦  wpatterson@classicmodelcars.com  Â¦  6  Â¦  1056  Â¦  Sales Manager (APAC)  ğ„€
1102  Â¦  Bondur  Â¦  Gerard  Â¦  x5408  Â¦  gbondur@classicmodelcars.com  Â¦  4  Â¦  1056  Â¦  Sale Manager (EMEA)  ğ„€
1143  Â¦  Bow  Â¦  Anthony  Â¦  x5428  Â¦  abow@classicmodelcars.com  Â¦  1  Â¦  1056  Â¦  Sales Manager (NA)  ğ„€
1165  Â¦  Jennings  Â¦  Leslie  Â¦  x3291  Â¦  ljennings@classicmodelcars.com  Â¦  1  Â¦  1143  Â¦  Sales Rep  ğ„€
1166  Â¦  Thompson  Â¦  Leslie  Â¦  x4065  Â¦  lthompson@classicmodelcars.com  Â¦  1  Â¦  1143  Â¦  Sales Rep  ğ„€
1188  Â¦  Firrelli  Â¦  Julie  Â¦  x2173  Â¦  jfirrelli@classicmodelcars.com  Â¦  2  Â¦  1143  Â¦  Sales Rep  ğ„€
1216  Â¦  Patterson  Â¦  Steve  Â¦  x4334  Â¦  spatterson@classicmodelcars.com  Â¦  2  Â¦  1143  Â¦  Sales Rep
select count(*) from mo_catalog.mo_tables{snapshot = 'sp04'} where reldatabase = 'test03';
â¤ count(*)[-5,64,0]  ğ„€
2
select * from mo_catalog.mo_database{snapshot = 'sp04'} where datname = 'test03';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272700  Â¦  test03  Â¦  def  Â¦  create database test03  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:50  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp04'} where att_database = 'test03';
â¤ attname[12,-1,0]  ğ„€
employeeNumber  ğ„€
lastName  ğ„€
firstName  ğ„€
extension  ğ„€
email  ğ„€
officeCode  ğ„€
reportsTo  ğ„€
jobTitle  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
__mo_index_idx_col  ğ„€
__mo_index_pri_col  ğ„€
__mo_rowid
drop table testsnap_03;
drop table testsnap_04;
drop snapshot sp04;
drop snapshot sp05;
drop database test03;
use mo_catalog;
drop table if exists cluster01;
create cluster table cluster01(col1 int,col2 bigint);
insert into cluster01 values(1,2,0);
insert into cluster01 values(2,3,0);
select * from cluster01;
â¤ col1[4,32,0]  Â¦  col2[-5,64,0]  Â¦  account_id[4,32,0]  ğ„€
1  Â¦  2  Â¦  0  ğ„€
2  Â¦  3  Â¦  0
drop snapshot if exists sp06;
create snapshot sp06 for account;
select count(*) from mo_catalog.mo_tables{snapshot = sp06} where reldatabase = 'mo_catalog' and account_id = 0;
â¤ count(*)[-5,64,0]  ğ„€
60
select * from mo_catalog.mo_database{snapshot = sp06} where datname = 'mo_catalog';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
1  Â¦  mo_catalog  Â¦  mo_catalog  Â¦    Â¦  0  Â¦  0  Â¦  2026-01-24 22:50:13  Â¦  0  Â¦  
drop table cluster01;
drop snapshot sp06;
drop database if exists test03;
create database test03;
use test03;
create table pub01 (col1 int primary key , col2 decimal, col3 bigint, col4 double, col5 float);
insert into pub01 values (1, 10.50, 1234567890, 123.45, 678.90),
(2, 20.75, 9876543210, 234.56, 789.01),
(3, 30.10, 1122334455, 345.67, 890.12),
(4, 40.25, 2233445566, 456.78, 901.23);
drop account if exists test_tenant_1;
create account test_tenant_1 admin_name 'test_account' identified by '111';
create publication publication01 database test03 account test_tenant_1 comment 'publish database to account01';
create database sub_database01 from sys publication publication01;
show databases;
â¤ Database[12,-1,0]  ğ„€
information_schema  ğ„€
mo_catalog  ğ„€
mysql  ğ„€
sub_database01  ğ„€
system  ğ„€
system_metrics
use sub_database01;
show tables;
â¤ Tables_in_sub_database01[12,-1,0]  ğ„€
pub01
drop snapshot if exists sp06;
create snapshot sp06 for account;
select * from pub01 {snapshot = 'sp06'};
â¤ col1[4,32,0]  Â¦  col2[3,39,0]  Â¦  col3[-5,64,0]  Â¦  col4[8,54,0]  Â¦  col5[7,24,0]  ğ„€
1  Â¦  11  Â¦  1234567890  Â¦  123.45  Â¦  678.9  ğ„€
2  Â¦  21  Â¦  9876543210  Â¦  234.56  Â¦  789.01  ğ„€
3  Â¦  30  Â¦  1122334455  Â¦  345.67  Â¦  890.12  ğ„€
4  Â¦  40  Â¦  2233445566  Â¦  456.78  Â¦  901.23
select count(*) from pub01 {snapshot = 'sp06'};
â¤ count(*)[-5,64,0]  ğ„€
4
select count(*) from mo_catalog.mo_tables{snapshot = 'sp06'} where reldatabase = 'test03';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'sp06'} where datname = 'test03';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272705  Â¦  test03  Â¦  def  Â¦  create database test03  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:51  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp06'} where att_database = 'test03';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
col4  ğ„€
col5  ğ„€
__mo_rowid
use sub_database01;
select count(*) from mo_catalog.mo_tables{snapshot = 'sp06'} where reldatabase = 'sub_database01';
internal error: find 0 snapshot records by name(sp06), expect only 1
select * from mo_catalog.mo_database{snapshot = 'sp06'} where datname = 'sub_database01';
internal error: find 0 snapshot records by name(sp06), expect only 1
select attname from mo_catalog.mo_columns{snapshot = 'sp06'} where att_database = 'sub_database01';
internal error: find 0 snapshot records by name(sp06), expect only 1
drop account test_tenant_1;
drop publication publication01;
drop snapshot sp06;
drop table pub01;
drop table if exists pt_table;
create table pt_table(col1 tinyint,col2 smallint,col3 int,clo4 bigint,col5 tinyint unsigned,col6 smallint unsigned,col7 int unsigned,col8 bigint unsigned,col9 float,col10 double,col11 varchar(255),col12 Date,col13 DateTime,col14 timestamp,col15 bool,col16 decimal(5,2),col17 text,col18 varchar(255),col19 varchar(255),col20 text)partition by key(col13)partitions 10;
load data infile '$resources/external_table_file/pt_table_data.csv' into table  pt_table fields terminated by ',';
select count(*) from pt_table;
â¤ count(*)[-5,64,0]  ğ„€
11
drop snapshot if exists sp07;
create snapshot sp07 for account;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
sp07  Â¦  2026-01-24 14:50:53.451447999  Â¦  account  Â¦  sys  Â¦    Â¦  
select count(*) from pt_table{snapshot = 'sp07'};
â¤ count(*)[-5,64,0]  ğ„€
11
show create table pt_table{snapshot = 'sp07'};
â¤ Table[12,-1,0]  Â¦  Create Table[12,-1,0]  ğ„€
pt_table  Â¦  CREATE TABLE `pt_table` (
  `col1` tinyint DEFAULT NULL,
  `col2` smallint DEFAULT NULL,
  `col3` int DEFAULT NULL,
  `clo4` bigint DEFAULT NULL,
  `col5` tinyint unsigned DEFAULT NULL,
  `col6` smallint unsigned DEFAULT NULL,
  `col7` int unsigned DEFAULT NULL,
  `col8` bigint unsigned DEFAULT NULL,
  `col9` float DEFAULT NULL,
  `col10` double DEFAULT NULL,
  `col11` varchar(255) DEFAULT NULL,
  `col12` date DEFAULT NULL,
  `col13` datetime DEFAULT NULL,
  `col14` timestamp NULL DEFAULT NULL,
  `col15` bool DEFAULT NULL,
  `col16` decimal(5,2) DEFAULT NULL,
  `col17` text DEFAULT NULL,
  `col18` varchar(255) DEFAULT NULL,
  `col19` varchar(255) DEFAULT NULL,
  `col20` text DEFAULT NULL
) partition by key algorithm = 2 (`col13`) partitions 10
select count(*) from mo_catalog.mo_tables{snapshot = 'sp07'} where reldatabase = 'test03';
â¤ count(*)[-5,64,0]  ğ„€
11
select * from mo_catalog.mo_database{snapshot = 'sp07'} where datname = 'test03';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272705  Â¦  test03  Â¦  def  Â¦  create database test03  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:51  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp07'} where att_database = 'test03';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
clo4  ğ„€
col5  ğ„€
col6  ğ„€
col7  ğ„€
col8  ğ„€
col9  ğ„€
col10  ğ„€
col11  ğ„€
col12  ğ„€
col13  ğ„€
col14  ğ„€
col15  ğ„€
col16  ğ„€
col17  ğ„€
col18  ğ„€
col19  ğ„€
col20  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
drop snapshot sp07;
drop table pt_table;
drop database test03;
drop database if exists test04;
create database test04;
use test04;
drop table if exists normal_table01;
create table normal_table01 (col1 enum('a','b','c'), col2 date, col3 binary);
insert into normal_table01 values ('a', '2000-10-01', 'a');
insert into normal_table01 values ('b', '2023-12-12', '1');
insert into normal_table01 values ('c', '1999-11-11', 'c');
select * from normal_table01;
â¤ col1[12,-1,0]  Â¦  col2[91,64,0]  Â¦  col3[12,3,0]  ğ„€
a  Â¦  2000-10-01  Â¦  a  ğ„€
b  Â¦  2023-12-12  Â¦  1  ğ„€
c  Â¦  1999-11-11  Â¦  c
use mo_catalog;
drop table if exists cluster02;
create cluster table cluster02(col1 timestamp, col2 varchar(20));
insert into cluster02 values ('2000-12-12 12:12:12.000', 'database', 0);
insert into cluster02 values ('2024-01-12 11:11:29.000', 'cluster table', 0);
select * from cluster02;
â¤ col1[93,64,0]  Â¦  col2[12,-1,0]  Â¦  account_id[4,32,0]  ğ„€
2000-12-12 12:12:12  Â¦  database  Â¦  0  ğ„€
2024-01-12 11:11:29  Â¦  cluster table  Â¦  0
use test04;
drop table if exists test04;
create table test04 (`maxvalue` int);
create table t3 (`maxvalue` int);
insert into t3 values(1);
insert into t3 values(2);
insert into t3 values(100);
insert into t3 values(-1000);
drop account if exists test_tenant_1;
create account test_tenant_1 admin_name 'test_account' identified by '111';
create publication publication01 database test04 account test_tenant_1 comment 'publish database';
create database sub_database02 from sys publication publication01;
use sub_database02;
drop snapshot if exists sp08;
create snapshot sp08 for account;
use test04;
select count(*) from normal_table01 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
3
select count(*) from t3 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
4
use mo_catalog;
select count(*) from cluster02 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
2
use test04;
delete from normal_table01 where col1 = 'a';
use mo_catalog;
update cluster02 set col2 = 'table';
use test04;
insert into t3 values(218231);
select count(*) from normal_table01 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
3
use mo_catalog;
select count(*) from cluster02 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
2
use test04;
select count(*) from t3 {snapshot = 'sp08'};
â¤ count(*)[-5,64,0]  ğ„€
4
select count(*) from mo_catalog.mo_tables{snapshot = 'sp08'} where reldatabase = 'test04';
â¤ count(*)[-5,64,0]  ğ„€
3
drop account test_tenant_1;
select * from mo_catalog.mo_database{snapshot = 'sp08'} where datname = 'test04';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272798  Â¦  test04  Â¦  def  Â¦  create database test04  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:53  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp08'} where att_database = 'test04';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
maxvalue  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
maxvalue  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
select count(*) from mo_catalog.mo_tables{snapshot = 'sp08'} where reldatabase = 'test04';
â¤ count(*)[-5,64,0]  ğ„€
3
select * from mo_catalog.mo_database{snapshot = 'sp08'} where datname = 'test04';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272798  Â¦  test04  Â¦  def  Â¦  create database test04  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:53  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp08'} where att_database = 'test04';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
col2  ğ„€
col3  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
maxvalue  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid  ğ„€
maxvalue  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
drop publication publication01;
drop table normal_table01;
use mo_catalog;
drop table cluster02;
use test04;
drop table t3;
drop database test04;
drop database if exists test05;
create database test05;
use test05;
drop table if exists t1;
create table t1 (a blob);
insert into t1 values('abcdef');
insert into t1 values('_bcdef');
insert into t1 values('a_cdef');
insert into t1 values('ab_def');
insert into t1 values('abc_ef');
insert into t1 values('abcd_f');
insert into t1 values('abcde_');
select count(*) from t1;
â¤ count(*)[-5,64,0]  ğ„€
7
drop snapshot if exists `binary`;
create snapshot `binary` for account;
select count(*) from mo_catalog.mo_tables{snapshot = `binary`} where reldatabase = 'test05';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = `binary`} where datname = 'test05';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272882  Â¦  test05  Â¦  def  Â¦  create database test05  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:55  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = `binary`} where att_database = 'test05';
â¤ attname[12,-1,0]  ğ„€
a  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
drop snapshot `binary`;
drop table t1;
drop table if exists t1;
create table t1 (
dvalue  date not null,
value32  integer not null,
primary key(dvalue)
);
insert into t1 values('2022-01-01', 1);
insert into t1 values('2022-01-02', 2);
drop snapshot if exists consistent;
create snapshot consistent for account;
select count(*) from mo_catalog.mo_tables{snapshot = consistent} where reldatabase = 'test05';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = consistent} where datname = 'test05';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272882  Â¦  test05  Â¦  def  Â¦  create database test05  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:55  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = consistent} where att_database = 'test05';
â¤ attname[12,-1,0]  ğ„€
dvalue  ğ„€
value32  ğ„€
__mo_rowid
drop snapshot consistent;
drop table t1;
drop database if exists test05;
drop database if exists test06;
create database test06;
use test06;
drop table if exists tran01;
start transaction;
create table tran01(col1 enum('red','blue','green'));
insert into tran01 values('red'),('blue'),('green');
create snapshot sp09 for account;
internal error: unclassified statement appears in uncommitted transaction
show snapshots;
internal error: unclassified statement appears in uncommitted transaction
commit;
drop snapshot if exists sp09;
create snapshot sp09 for account;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]  ğ„€
sp09  Â¦  2026-01-24 14:50:55.889838999  Â¦  account  Â¦  sys  Â¦    Â¦    ğ„€
sp08  Â¦  2026-01-24 14:50:54.285292999  Â¦  account  Â¦  sys  Â¦    Â¦  
select count(*) from tran01{snapshot = 'sp09'};
â¤ count(*)[-5,64,0]  ğ„€
3
select count(*) from mo_catalog.mo_tables{snapshot = 'sp09'} where reldatabase = 'test06';
â¤ count(*)[-5,64,0]  ğ„€
1
select * from mo_catalog.mo_database{snapshot = 'sp09'} where datname = 'test06';
â¤ dat_id[-5,64,0]  Â¦  datname[12,-1,0]  Â¦  dat_catalog_name[12,-1,0]  Â¦  dat_createsql[12,-1,0]  Â¦  owner[4,32,0]  Â¦  creator[4,32,0]  Â¦  created_time[93,64,0]  Â¦  account_id[4,32,0]  Â¦  dat_type[12,-1,0]  ğ„€
272886  Â¦  test06  Â¦  def  Â¦  create database test06  Â¦  0  Â¦  1  Â¦  2026-01-24 22:50:55  Â¦  0  Â¦  
select attname from mo_catalog.mo_columns{snapshot = 'sp09'} where att_database = 'test06';
â¤ attname[12,-1,0]  ğ„€
col1  ğ„€
__mo_fake_pk_col  ğ„€
__mo_rowid
drop table tran01;
drop snapshot sp09;
drop database test06;
drop database if exists test07;
create database test07;
use test07;
drop table if exists t1;
create table t1(a int, b char(10), c date, d decimal(7,2), UNIQUE KEY(a, b));
desc t1;
â¤ Field[1,0,0]  Â¦  Type[1,0,0]  Â¦  Null[1,0,0]  Â¦  Key[1,0,0]  Â¦  Default[1,0,0]  Â¦  Extra[1,0,0]  Â¦  Comment[1,0,0]  ğ„€
a  Â¦  INT(32)  Â¦  YES  Â¦  MUL  Â¦  null  Â¦    Â¦    ğ„€
b  Â¦  CHAR(10)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
c  Â¦  DATE(0)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦    ğ„€
d  Â¦  DECIMAL(7,2)  Â¦  YES  Â¦    Â¦  null  Â¦    Â¦  
insert into t1 values(1, 'ab', '1980-12-17', 800);
insert into t1 values(2, 'ac', '1981-02-20', 1600);
insert into t1 values(3, 'ad', '1981-02-22', 500);
select * from t1;
â¤ a[4,32,0]  Â¦  b[1,10,0]  Â¦  c[91,64,0]  Â¦  d[3,7,2]  ğ„€
1  Â¦  ab  Â¦  1980-12-17  Â¦  800.00  ğ„€
2  Â¦  ac  Â¦  1981-02-20  Â¦  1600.00  ğ„€
3  Â¦  ad  Â¦  1981-02-22  Â¦  500.00
drop table if exists t2;
create table t2 (a json,b int);
insert into t2 values ('{"t1":"a"}',1),('{"t1":"b"}',2);
select * from t2;
â¤ a[-1,2147483647,0]  Â¦  b[4,32,0]  ğ„€
{"t1": "a"}  Â¦  1  ğ„€
{"t1": "b"}  Â¦  2
drop table if exists t3;
create table t3(
deptno varchar(20),
dname varchar(15),
loc varchar(50),
primary key(deptno)
);
insert into t3 values (10,'ACCOUNTING','NEW YORK');
insert into t3 values (20,'RESEARCH','DALLAS');
insert into t3 values (30,'SALES','CHICAGO');
insert into t3 values (40,'OPERATIONS','BOSTON');
select * from t3;
â¤ deptno[12,-1,0]  Â¦  dname[12,-1,0]  Â¦  loc[12,-1,0]  ğ„€
10  Â¦  ACCOUNTING  Â¦  NEW YORK  ğ„€
20  Â¦  RESEARCH  Â¦  DALLAS  ğ„€
30  Â¦  SALES  Â¦  CHICAGO  ğ„€
40  Â¦  OPERATIONS  Â¦  BOSTON
drop table t3;
drop table t2;
drop snapshot if exists sp10;
create snapshot sp10 for account;
select count(*) from t3{snapshot = 'sp10'};
SQL parser error: table "t3" does not exist
select count(*) from t2{snapshot = 'sp10'};
SQL parser error: table "t2" does not exist
select count(*) from t1{snapshot = 'sp10'};
â¤ count(*)[-5,64,0]  ğ„€
3
select * from t1{snapshot = 'sp10'};
â¤ a[4,32,0]  Â¦  b[1,10,0]  Â¦  c[91,64,0]  Â¦  d[3,7,2]  ğ„€
1  Â¦  ab  Â¦  1980-12-17  Â¦  800.00  ğ„€
2  Â¦  ac  Â¦  1981-02-20  Â¦  1600.00  ğ„€
3  Â¦  ad  Â¦  1981-02-22  Â¦  500.00
select * from t2{snapshot = 'sp10'};
SQL parser error: table "t2" does not exist
select * from t3{snapshot = 'sp10'};
SQL parser error: table "t3" does not exist
select distinct(object_name) from metadata_scan('test07.t3','a')m;
no such table test07.t3
select distinct(object_name) from metadata_scan('test07.t2','a')m;
no such table test07.t2
select distinct(object_name) from metadata_scan('test07.t1','a')m;
â¤ object_name[12,-1,0]
drop table t1;
drop database test07;
drop snapshot sp10;
drop snapshot sp08;
show snapshots;
â¤ SNAPSHOT_NAME[12,-1,0]  Â¦  TIMESTAMP[12,-1,0]  Â¦  SNAPSHOT_LEVEL[12,-1,0]  Â¦  ACCOUNT_NAME[12,-1,0]  Â¦  DATABASE_NAME[12,-1,0]  Â¦  TABLE_NAME[12,-1,0]
