drop database if exists db1;
create database db1;
use db1;
drop table if exists t1;
CREATE TABLE t1 (a INTEGER PRIMARY KEY, b CHAR(10));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
insert into t1 values(1, 'ab');
insert into t1 values(2, 'ac');
insert into t1 values(3, 'ad');
select * from t1;
a    b
1    ab
2    ac
3    ad
alter table t1 modify a VARCHAR(20);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    VARCHAR(20)    NO    PRI    null        
b    CHAR(10)    YES        null        
select * from t1;
a    b
1    ab
2    ac
3    ad
drop table if exists t1;
CREATE TABLE t1 (a INTEGER PRIMARY KEY, b CHAR(10), c date);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17');
insert into t1 values(2, 'ac', '1981-02-20');
insert into t1 values(3, 'ad', '1981-02-22');
select * from t1;
a    b    c
1    ab    1980-12-17
2    ac    1981-02-20
3    ad    1981-02-22
alter table t1 modify a VARCHAR(20) after b;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
b    CHAR(10)    YES        null        
a    VARCHAR(20)    NO    PRI    null        
c    DATE(0)    YES        null        
select * from t1;
b    a    c
ab    1    1980-12-17
ac    2    1981-02-20
ad    3    1981-02-22
drop table if exists t1;
CREATE TABLE t1 (a INTEGER PRIMARY KEY, b CHAR(10), c date);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17');
insert into t1 values(2, 'ac', '1981-02-20');
insert into t1 values(3, 'ad', '1981-02-22');
select * from t1;
a    b    c
1    ab    1980-12-17
2    ac    1981-02-20
3    ad    1981-02-22
alter table t1 modify a VARCHAR(20) after c;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
a    VARCHAR(20)    NO    PRI    null        
select * from t1;
b    c    a
ab    1980-12-17    1
ac    1981-02-20    2
ad    1981-02-22    3
drop table if exists t1;
CREATE TABLE t1 (a INTEGER, b CHAR(10), c date, PRIMARY KEY(a));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17');
insert into t1 values(2, 'ac', '1981-02-20');
insert into t1 values(3, 'ad', '1981-02-22');
select * from t1;
a    b    c
1    ab    1980-12-17
2    ac    1981-02-20
3    ad    1981-02-22
alter table t1 modify b VARCHAR(20) first;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
b    VARCHAR(20)    YES        null        
a    INT(32)    NO    PRI    null        
c    DATE(0)    YES        null        
select * from t1;
b    a    c
ab    1    1980-12-17
ac    2    1981-02-20
ad    3    1981-02-22
drop table if exists t1;
CREATE TABLE t1 (a INTEGER PRIMARY KEY, b CHAR(10), c date, d decimal(7,2));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17', 800);
insert into t1 values(2, 'ac', '1981-02-20', 1600);
insert into t1 values(3, 'ad', '1981-02-22', 500);
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table t1 modify b VARCHAR(20), modify d int unsigned;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(20)    YES        null        
c    DATE(0)    YES        null        
d    INT UNSIGNED(32)    YES        null        
select * from t1;
a    b    c    d
1    ab    1980-12-17    800
2    ac    1981-02-20    1600
3    ad    1981-02-22    500
drop table if exists t1;
CREATE TABLE t1 (a INTEGER PRIMARY KEY, b CHAR(10), c date, d decimal(7,2));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17', 800);
insert into t1 values(2, 'ac', '1981-02-20', 1600);
insert into t1 values(3, 'ad', '1981-02-22', 500);
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table t1 modify a VARCHAR(20) PRIMARY KEY;
Multiple primary key defined
alter table t1 modify b VARCHAR(20) PRIMARY KEY;
Multiple primary key defined
alter table t1 modify b VARCHAR(20) first, modify d int unsigned after b;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
b    VARCHAR(20)    YES        null        
d    INT UNSIGNED(32)    YES        null        
a    INT(32)    NO    PRI    null        
c    DATE(0)    YES        null        
select * from t1;
b    d    a    c
ab    800    1    1980-12-17
ac    1600    2    1981-02-20
ad    500    3    1981-02-22
drop table if exists t1;
CREATE TABLE t1(a INTEGER, b CHAR(10), c datetime, d decimal(7,2), PRIMARY KEY(a, b));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    NO    PRI    null        
c    DATETIME(0)    YES        null        
d    DECIMAL64(7)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17 11:34:45', 800);
insert into t1 values(2, 'ac', '1981-02-20 10:34:45', 1600);
insert into t1 values(3, 'ad', '1981-02-22 09:34:45', 500);
select * from t1;
a    b    c    d
1    ab    1980-12-17 11:34:45    800.00
2    ac    1981-02-20 10:34:45    1600.00
3    ad    1981-02-22 09:34:45    500.00
alter table t1 modify c datetime default '2023-06-21 12:34:45' on update CURRENT_TIMESTAMP;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    NO    PRI    null        
c    DATETIME(0)    YES        '2023-06-21 12:34:45'        
d    DECIMAL64(7)    YES        null        
select * from t1;
a    b    c    d
1    ab    1980-12-17 11:34:45    800.00
2    ac    1981-02-20 10:34:45    1600.00
3    ad    1981-02-22 09:34:45    500.00
alter table t1 modify c date;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    NO    PRI    null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
drop table if exists t1;
CREATE TABLE t1 (a INTEGER, b CHAR(10), c datetime PRIMARY KEY default '2023-06-21' on update CURRENT_TIMESTAMP);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    YES        null        
b    CHAR(10)    YES        null        
c    DATETIME(0)    NO    PRI    '2023-06-21'        
insert into t1 values(1, 'ab', '1980-12-17');
insert into t1 values(2, 'ac', '1981-02-20');
insert into t1 values(3, 'ad', '1981-02-22');
select * from t1;
a    b    c
1    ab    1980-12-17 00:00:00
2    ac    1981-02-20 00:00:00
3    ad    1981-02-22 00:00:00
alter table t1 modify c date first;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
c    DATE(0)    NO    PRI    null        
a    INT(32)    YES        null        
b    CHAR(10)    YES        null        
select * from t1;
c    a    b
1980-12-17    1    ab
1981-02-20    2    ac
1981-02-22    3    ad
alter table t1 modify c datetime default '2023-06-21';
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
c    DATETIME(0)    NO    PRI    '2023-06-21'        
a    INT(32)    YES        null        
b    CHAR(10)    YES        null        
select * from t1;
c    a    b
1980-12-17 00:00:00    1    ab
1981-02-20 00:00:00    2    ac
1981-02-22 00:00:00    3    ad
drop table if exists t1;
CREATE TABLE t1(a INTEGER PRIMARY KEY, b CHAR(10), c date, d decimal(7,2), UNIQUE KEY(a, b));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17', 800);
insert into t1 values(2, 'ac', '1981-02-20', 1600);
insert into t1 values(3, 'ad', '1981-02-22', 500);
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table t1 modify b VARCHAR(20);
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    0    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    0    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table t1 modify b VARCHAR(20) UNIQUE KEY;
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    0    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    0    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table t1 modify b VARCHAR(20) UNIQUE KEY;
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    0    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    0    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    b_2    1    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(20)    YES    UNI    null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
drop table if exists t1;
CREATE TABLE t1(a INTEGER PRIMARY KEY, b CHAR(10), c date, d decimal(7,2), INDEX(a, b), KEY(c));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    CHAR(10)    YES        null        
c    DATE(0)    YES    MUL    null        
d    DECIMAL64(7)    YES        null        
insert into t1 values(1, 'ab', '1980-12-17', 800);
insert into t1 values(2, 'ac', '1981-02-20', 1600);
insert into t1 values(3, 'ad', '1981-02-22', 500);
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table t1 modify b VARCHAR(20);
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    1    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table t1 modify b VARCHAR(20) KEY;
Multiple primary key defined
alter table t1 modify b VARCHAR(20) UNIQUE KEY;
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
t1    1    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table t1 modify c VARCHAR(20) UNIQUE KEY;
show index from t1;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
t1    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
t1    0    c_2    1    c    A    0    NULL    NULL    YES                    YES    NULL
t1    1    a    1    a    A    0    NULL    NULL                        YES    NULL
t1    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
t1    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
t1    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(20)    YES    UNI    null        
c    VARCHAR(20)    YES    UNI    null        
d    DECIMAL64(7)    YES        null        
select * from t1;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
drop table if exists t1;
create table t1(
empno int unsigned auto_increment,
ename varchar(15) ,
job varchar(10),
mgr int unsigned,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
primary key(empno, ename)
);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
empno    INT UNSIGNED(32)    NO    PRI    null        
ename    VARCHAR(15)    NO    PRI    null        
job    VARCHAR(10)    YES        null        
mgr    INT UNSIGNED(32)    YES        null        
hiredate    DATE(0)    YES        null        
sal    DECIMAL64(7)    YES        null        
comm    DECIMAL64(7)    YES        null        
deptno    INT UNSIGNED(32)    YES        null        
INSERT INTO t1 VALUES (7369,'SMITH','CLERK',7902,'1980-12-17',800,NULL,20);
INSERT INTO t1 VALUES (7499,'ALLEN','SALESMAN',7698,'1981-02-20',1600,300,30);
INSERT INTO t1 VALUES (7521,'WARD','SALESMAN',7698,'1981-02-22',1250,500,30);
INSERT INTO t1 VALUES (7566,'JONES','MANAGER',7839,'1981-04-02',2975,NULL,20);
INSERT INTO t1 VALUES (7654,'MARTIN','SALESMAN',7698,'1981-09-28',1250,1400,30);
INSERT INTO t1 VALUES (7698,'BLAKE','MANAGER',7839,'1981-05-01',2850,NULL,30);
INSERT INTO t1 VALUES (7782,'CLARK','MANAGER',7839,'1981-06-09',2450,NULL,10);
INSERT INTO t1 VALUES (7788,'SCOTT','ANALYST',7566,'0087-07-13',3000,NULL,20);
INSERT INTO t1 VALUES (7839,'KING','PRESIDENT',NULL,'1981-11-17',5000,NULL,10);
INSERT INTO t1 VALUES (7844,'TURNER','SALESMAN',7698,'1981-09-08',1500,0,30);
INSERT INTO t1 VALUES (7876,'ADAMS','CLERK',7788,'0087-07-13',1100,NULL,20);
INSERT INTO t1 VALUES (7900,'JAMES','CLERK',7698,'1981-12-03',950,NULL,30);
INSERT INTO t1 VALUES (7902,'FORD','ANALYST',7566,'1981-12-03',3000,NULL,20);
INSERT INTO t1 VALUES (7934,'MILLER','CLERK',7782,'1982-01-23',1300,NULL,10);
select * from t1;
empno    ename    job    mgr    hiredate    sal    comm    deptno
7369    SMITH    CLERK    7902    1980-12-17    800.00    null    20
7499    ALLEN    SALESMAN    7698    1981-02-20    1600.00    300.00    30
7521    WARD    SALESMAN    7698    1981-02-22    1250.00    500.00    30
7566    JONES    MANAGER    7839    1981-04-02    2975.00    null    20
7654    MARTIN    SALESMAN    7698    1981-09-28    1250.00    1400.00    30
7698    BLAKE    MANAGER    7839    1981-05-01    2850.00    null    30
7782    CLARK    MANAGER    7839    1981-06-09    2450.00    null    10
7788    SCOTT    ANALYST    7566    0087-07-13    3000.00    null    20
7839    KING    PRESIDENT    null    1981-11-17    5000.00    null    10
7844    TURNER    SALESMAN    7698    1981-09-08    1500.00    0.00    30
7876    ADAMS    CLERK    7788    0087-07-13    1100.00    null    20
7900    JAMES    CLERK    7698    1981-12-03    950.00    null    30
7902    FORD    ANALYST    7566    1981-12-03    3000.00    null    20
7934    MILLER    CLERK    7782    1982-01-23    1300.00    null    10
alter table t1 modify empno varchar(20) after sal;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
ename    VARCHAR(15)    NO    PRI    null        
job    VARCHAR(10)    YES        null        
mgr    INT UNSIGNED(32)    YES        null        
hiredate    DATE(0)    YES        null        
sal    DECIMAL64(7)    YES        null        
empno    VARCHAR(20)    NO    PRI    null        
comm    DECIMAL64(7)    YES        null        
deptno    INT UNSIGNED(32)    YES        null        
select * from t1;
ename    job    mgr    hiredate    sal    empno    comm    deptno
SMITH    CLERK    7902    1980-12-17    800.00    7369    null    20
ALLEN    SALESMAN    7698    1981-02-20    1600.00    7499    300.00    30
WARD    SALESMAN    7698    1981-02-22    1250.00    7521    500.00    30
JONES    MANAGER    7839    1981-04-02    2975.00    7566    null    20
MARTIN    SALESMAN    7698    1981-09-28    1250.00    7654    1400.00    30
BLAKE    MANAGER    7839    1981-05-01    2850.00    7698    null    30
CLARK    MANAGER    7839    1981-06-09    2450.00    7782    null    10
SCOTT    ANALYST    7566    0087-07-13    3000.00    7788    null    20
KING    PRESIDENT    null    1981-11-17    5000.00    7839    null    10
TURNER    SALESMAN    7698    1981-09-08    1500.00    7844    0.00    30
ADAMS    CLERK    7788    0087-07-13    1100.00    7876    null    20
JAMES    CLERK    7698    1981-12-03    950.00    7900    null    30
FORD    ANALYST    7566    1981-12-03    3000.00    7902    null    20
MILLER    CLERK    7782    1982-01-23    1300.00    7934    null    10
drop table if exists t1;
create table t1(a int unsigned, b varchar(15) NOT NULL, c date, d decimal(7,2), primary key(a));
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT UNSIGNED(32)    NO    PRI    null        
b    VARCHAR(15)    NO        null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
insert into t1 values (7369,'SMITH','1980-12-17',800);
insert into t1 values  (7499,'ALLEN','1981-02-20',1600);
insert into t1 values (7521,'WARD','1981-02-22',1250);
insert into t1 values  (7566,'JONES','1981-04-02',2975);
insert into t1 values  (7654,'MARTIN','1981-09-28',1250);
select * from t1;
a    b    c    d
7369    SMITH    1980-12-17    800.00
7499    ALLEN    1981-02-20    1600.00
7521    WARD    1981-02-22    1250.00
7566    JONES    1981-04-02    2975.00
7654    MARTIN    1981-09-28    1250.00
alter table t1 modify a int auto_increment;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(15)    NO        null        
c    DATE(0)    YES        null        
d    DECIMAL64(7)    YES        null        
select * from t1;
a    b    c    d
7369    SMITH    1980-12-17    800.00
7499    ALLEN    1981-02-20    1600.00
7521    WARD    1981-02-22    1250.00
7566    JONES    1981-04-02    2975.00
7654    MARTIN    1981-09-28    1250.00
alter table t1 modify d decimal(6,2);
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(15)    NO        null        
c    DATE(0)    YES        null        
d    DECIMAL64(6)    YES        null        
select * from t1;
a    b    c    d
7369    SMITH    1980-12-17    800.00
7499    ALLEN    1981-02-20    1600.00
7521    WARD    1981-02-22    1250.00
7566    JONES    1981-04-02    2975.00
7654    MARTIN    1981-09-28    1250.00
drop table if exists dept;
create table dept(
deptno varchar(20),
dname varchar(15),
loc varchar(50),
primary key(deptno)
);
INSERT INTO dept VALUES (10,'ACCOUNTING','NEW YORK');
INSERT INTO dept VALUES (20,'RESEARCH','DALLAS');
INSERT INTO dept VALUES (30,'SALES','CHICAGO');
INSERT INTO dept VALUES (40,'OPERATIONS','BOSTON');
drop table if exists emp;
create table emp(
empno int unsigned auto_increment,
ename varchar(15),
job varchar(10),
mgr int unsigned,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno varchar(20),
primary key(empno),
constraint `c1` FOREIGN KEY (deptno) REFERENCES dept(deptno)
);
INSERT INTO emp VALUES (7369,'SMITH','CLERK',7902,'1980-12-17',800,NULL,20);
INSERT INTO emp VALUES (7499,'ALLEN','SALESMAN',7698,'1981-02-20',1600,300,30);
INSERT INTO emp VALUES (7521,'WARD','SALESMAN',7698,'1981-02-22',1250,500,30);
INSERT INTO emp VALUES (7566,'JONES','MANAGER',7839,'1981-04-02',2975,NULL,20);
INSERT INTO emp VALUES (7654,'MARTIN','SALESMAN',7698,'1981-09-28',1250,1400,30);
INSERT INTO emp VALUES (7698,'BLAKE','MANAGER',7839,'1981-05-01',2850,NULL,30);
INSERT INTO emp VALUES (7782,'CLARK','MANAGER',7839,'1981-06-09',2450,NULL,10);
INSERT INTO emp VALUES (7788,'SCOTT','ANALYST',7566,'0087-07-13',3000,NULL,20);
INSERT INTO emp VALUES (7839,'KING','PRESIDENT',NULL,'1981-11-17',5000,NULL,10);
INSERT INTO emp VALUES (7844,'TURNER','SALESMAN',7698,'1981-09-08',1500,0,30);
INSERT INTO emp VALUES (7876,'ADAMS','CLERK',7788,'0087-07-13',1100,NULL,20);
INSERT INTO emp VALUES (7900,'JAMES','CLERK',7698,'1981-12-03',950,NULL,30);
INSERT INTO emp VALUES (7902,'FORD','ANALYST',7566,'1981-12-03',3000,NULL,20);
INSERT INTO emp VALUES (7934,'MILLER','CLERK',7782,'1982-01-23',1300,NULL,10);
alter table emp modify deptno char(20);
Cannot change column 'deptno': used in a foreign key constraint 'c1'
alter table emp modify deptno int;
Cannot change column 'deptno': used in a foreign key constraint 'c1'
alter table emp modify deptno varchar(10);
Cannot change column 'deptno': used in a foreign key constraint 'c1'
alter table emp modify deptno varchar(25);
desc emp;
Field    Type    Null    Key    Default    Extra    Comment
empno    INT UNSIGNED(32)    NO    PRI    null        
ename    VARCHAR(15)    YES        null        
job    VARCHAR(10)    YES        null        
mgr    INT UNSIGNED(32)    YES        null        
hiredate    DATE(0)    YES        null        
sal    DECIMAL64(7)    YES        null        
comm    DECIMAL64(7)    YES        null        
deptno    VARCHAR(25)    YES    MUL    null        
select * from emp;
empno    ename    job    mgr    hiredate    sal    comm    deptno
7369    SMITH    CLERK    7902    1980-12-17    800.00    null    20
7499    ALLEN    SALESMAN    7698    1981-02-20    1600.00    300.00    30
7521    WARD    SALESMAN    7698    1981-02-22    1250.00    500.00    30
7566    JONES    MANAGER    7839    1981-04-02    2975.00    null    20
7654    MARTIN    SALESMAN    7698    1981-09-28    1250.00    1400.00    30
7698    BLAKE    MANAGER    7839    1981-05-01    2850.00    null    30
7782    CLARK    MANAGER    7839    1981-06-09    2450.00    null    10
7788    SCOTT    ANALYST    7566    0087-07-13    3000.00    null    20
7839    KING    PRESIDENT    null    1981-11-17    5000.00    null    10
7844    TURNER    SALESMAN    7698    1981-09-08    1500.00    0.00    30
7876    ADAMS    CLERK    7788    0087-07-13    1100.00    null    20
7900    JAMES    CLERK    7698    1981-12-03    950.00    null    30
7902    FORD    ANALYST    7566    1981-12-03    3000.00    null    20
7934    MILLER    CLERK    7782    1982-01-23    1300.00    null    10
drop table emp;
drop table dept;
drop table if exists t1;
CREATE TABLE t1(col1 int not null, col2 varchar(10));
insert into t1 values (1, '137iu2');
insert into t1 values (1, '73ujf34f');
select * from t1;
col1    col2
1    137iu2
1    73ujf34f
alter table t1 modify col1 int primary key;
Duplicate entry '1' for key 'col1'
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
col1    INT(32)    NO        null        
col2    VARCHAR(10)    YES        null        
alter table t1 modify col2 varchar(10) primary key;
desc t1;
Field    Type    Null    Key    Default    Extra    Comment
col1    INT(32)    NO        null        
col2    VARCHAR(10)    NO    PRI    null        
insert into t1 values (1, 'cdsdsa');
select * from t1;
col1    col2
1    137iu2
1    73ujf34f
1    cdsdsa
drop table t1;
drop database if exists db1;
drop database if exists test;
create database test;
use test;
drop table if exists bool01;
create table bool01 (col1 int, col2 char);
insert into bool01 values (1, 'q');
insert into bool01 values (2, 'a');
insert into bool01 values (10, '3');
select * from bool01;
col1    col2
1    q
2    a
10    3
alter table bool01 modify col2 bool after col1;
invalid input: 'q' is not a valid bool expression
show create table bool01;
Table    Create Table
bool01    CREATE TABLE `bool01` (\n`col1` INT DEFAULT NULL,\n`col2` CHAR(1) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'bool01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
bool01    col1    INT    YES
bool01    col2    CHAR    YES
drop table bool01;
drop table if exists char01;
create table char01 (col1 int, col2 char);
insert into char01 values (1, 'q');
insert into char01 values (2, '*');
insert into char01 values (10, '3');
insert into char01 values (20, '数');
select * from char01;
col1    col2
1    q
2    *
10    3
20    数
alter table char01 modify col2 varchar(20) after col1;
show create table char01;
Table    Create Table
char01    CREATE TABLE `char01` (\n`col1` INT DEFAULT NULL,\n`col2` VARCHAR(20) DEFAULT NULL\n)
insert into char01 values (100, '**(*(&(*UJHI');
truncate table char01;
select * from char01;
col1    col2
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'char01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
char01    col1    INT    YES
char01    col2    VARCHAR    YES
drop table char01;
drop table if exists char02;
create table char02 (col1 int, col2 varchar(10));
insert into char02 values (1, 'w43234rfq');
insert into char02 values (2, 'a32f4');
insert into char02 values (10, '3432t43r4f');
select * from char02;
col1    col2
1    w43234rfq
2    a32f4
10    3432t43r4f
alter table char02 modify col2 char(20) first;
show create table char02;
Table    Create Table
char02    CREATE TABLE `char02` (\n`col2` CHAR(20) DEFAULT NULL,\n`col1` INT DEFAULT NULL\n)
insert into char02 values ('738fewhu&^YUH', 100);
select * from char02;
col2    col1
w43234rfq    1
a32f4    2
3432t43r4f    10
738fewhu&^YUH    100
update char02 set col1 = 100 where col2 = 'w43234rfq';
select * from char02;
col2    col1
a32f4    2
3432t43r4f    10
738fewhu&^YUH    100
w43234rfq    100
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'char02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
char02    col1    INT    YES
char02    col2    CHAR    YES
drop table char02;
drop table if exists char03;
create table char03 (col1 int, col2 char(10));
insert into char03 values (1, 'ahu323ew32');
insert into char03 values (2, '367283r343');
insert into char03 values (3, null);
select * from char03;
col1    col2
1    ahu323ew32
2    367283r343
3    null
alter table char03 modify col2 varchar(5);
internal error: Can't cast column from CHAR type to VARCHAR type because of one or more values in that column. Src length 10 is larger than Dest length 5
show create table char03;
Table    Create Table
char03    CREATE TABLE `char03` (\n`col1` INT DEFAULT NULL,\n`col2` CHAR(10) DEFAULT NULL\n)
insert into char03 values (4, 'eyuiwqewq3');
select * from char03;
col1    col2
1    ahu323ew32
2    367283r343
3    null
4    eyuiwqewq3
delete from char03 where col2 = 'eyuiwqewq3';
select * from char03;
col1    col2
1    ahu323ew32
2    367283r343
3    null
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'char03' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
char03    col1    INT    YES
char03    col2    CHAR    YES
drop table char03;
drop table if exists char04;
create table char04 (col1 varchar(200), col2 char(10));
insert into char04 values (null, 'ahu323ew32');
insert into char04 values ('23789178942u1uj3ridjfh2d28u49u4ueji32jf2f32ef32894rjk32nv432f432f', '367283r343');
insert into char04 values ('32jhbfchjecmwd%^&^(*&)UJHFRE%^T&YUHIJKNM', null);
select * from char04;
col1    col2
null    ahu323ew32
23789178942u1uj3ridjfh2d28u49u4ueji32jf2f32ef32894rjk32nv432f432f    367283r343
32jhbfchjecmwd%^&^(*&)UJHFRE%^T&YUHIJKNM    null
alter table char04 modify col1 varchar(100) not null;
constraint violation: Column 'col1' cannot be null
alter table char04 modify col2 char(10) not null;
constraint violation: Column 'col2' cannot be null
show create table char04;
Table    Create Table
char04    CREATE TABLE `char04` (\n`col1` VARCHAR(200) DEFAULT NULL,\n`col2` CHAR(10) DEFAULT NULL\n)
insert into char04 values (4, 'eyuiwqewq3');
select * from char04;
col1    col2
null    ahu323ew32
23789178942u1uj3ridjfh2d28u49u4ueji32jf2f32ef32894rjk32nv432f432f    367283r343
32jhbfchjecmwd%^&^(*&)UJHFRE%^T&YUHIJKNM    null
4    eyuiwqewq3
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'char04' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
char04    col1    VARCHAR    YES
char04    col2    CHAR    YES
drop table char04;
drop table if exists text01;
create table text01 (col1 text primary key , col2 mediumtext unique index, col3 longtext);
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 73 near " index, col3 longtext);";
insert into text01 values ('37268434','32718hcuwh432fr234f34g4f34e4','&*&YHRE%^&*YUIHGT^&Y*UIJK');
no such table test.text01
insert into text01 values ('jefwyq3uih2r321fr3', '38eu4jfc3w4e3dcewcevewcve', null);
no such table test.text01
insert into text01 values (null, '2789378u2uifj4234r23', '32r43frecdrfedwq');
no such table test.text01
select * from text01;
SQL parser error: table "text01" does not exist
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'text01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
drop table text01;
no such table test.text01
drop table if exists alter03;
create table alter03 (col1 int, col2 binary, col3 decimal);
insert into alter03 values (1, 'e', 324214.2134123);
insert into alter03 values (2, '4', -242134.3231432);
select * from alter03;
col1    col2    col3
1    e    324214
2    4    -242134
alter table alter03 modify col1 decimal after col3, modify col2 varbinary(20);
show create table alter03;
Table    Create Table
alter03    CREATE TABLE `alter03` (\n`col2` VARBINARY(20) DEFAULT NULL,\n`col3` DECIMAL(38,0) DEFAULT NULL,\n`col1` DECIMAL(38,0) DEFAULT NULL\n)
insert into alter03 values ('32143124', 42432321.000, 132432.214234);
select * from alter03;
col2    col3    col1
e    324214    1
4    -242134    2
32143124    42432321    132432
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'alter03' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
alter03    col1    DECIMAL128    YES
alter03    col2    VARBINARY    YES
alter03    col3    DECIMAL128    YES
drop table alter03;
drop table if exists alter04;
create table alter04 (col1 int not null default 100 primary key );
insert into alter04 values ();
insert into alter04 values (101);
alter table alter04 modify col1 int auto_increment;
show create table alter04;
Table    Create Table
alter04    CREATE TABLE `alter04` (\n`col1` INT NOT NULL AUTO_INCREMENT,\nPRIMARY KEY (`col1`)\n)
insert into alter04 values ();
insert into alter04 values ();
select * from alter04;
col1
100
101
102
103
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'alter04' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
alter04    col1    INT    NO
drop table alter04;
drop table if exists alter05;
create table alter05 (col1 int primary key auto_increment);
insert into alter05 values ();
insert into alter05 values ();
select * from alter05;
col1
1
2
alter table alter05 modify col1 int unique key;
show create table alter05;
Table    Create Table
alter05    CREATE TABLE `alter05` (\n`col1` INT NOT NULL,\nPRIMARY KEY (`col1`),\nUNIQUE KEY `col1` (`col1`)\n)
insert into alter05 values ();
invalid input: invalid default value for column 'col1'
insert into alter05 values ();
invalid input: invalid default value for column 'col1'
select * from alter05;
col1
1
2
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'alter05' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
alter05    col1    INT    NO
drop table alter05;
drop table if exists primary01;
create table primary01 (col1 int, col2 text);
insert into primary01 values (1, 'wq432r43rf32y2493821ijfk2env3ui4y33i24');
insert into primary01 values (2, '243ewfvefreverewfcwr');
alter table primary01 modify col1 float primary key;
show create table primary01;
Table    Create Table
primary01    CREATE TABLE `primary01` (\n`col1` FLOAT NOT NULL,\n`col2` TEXT DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
insert into primary01 values (1, '432r2f234day89ujfw42342');
Duplicate entry '1' for key 'col1'
insert into primary01 values (2378.32423, '234242))())_');
select * from primary01;
col1    col2
1.0    wq432r43rf32y2493821ijfk2env3ui4y33i24
2.0    243ewfvefreverewfcwr
2378.3242    234242))())_
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary01    col1    FLOAT    NO
primary01    col2    TEXT    YES
drop table primary01;
drop table if exists primary02;
create table primary02(col1 int, col2 binary(10));
insert into primary02 values (1, '32143');
insert into primary02 values (1, '3e');
select * from primary02;
col1    col2
1    32143     
1    3e        
alter table primary02 modify col1 int primary key;
Duplicate entry '1' for key 'col1'
show create table primary02;
Table    Create Table
primary02    CREATE TABLE `primary02` (\n`col1` INT DEFAULT NULL,\n`col2` BINARY(10) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary02    col1    INT    YES
primary02    col2    BINARY    YES
drop table primary02;
drop table if exists primary03;
create table primary03(col1 int, col2 binary(10));
insert into primary03 values (1, '32143');
insert into primary03 values (2, '3e');
alter table primary03 modify col1 int primary key;
show create table primary03;
Table    Create Table
primary03    CREATE TABLE `primary03` (\n`col1` INT NOT NULL,\n`col2` BINARY(10) DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
insert into primary03 values (3, '*');
insert into primary03 values (3, 'assad');
Duplicate entry '3' for key 'col1'
select * from primary03;
col1    col2
1    32143     
2    3e        
3    *         
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary03' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary03    col1    INT    NO
primary03    col2    BINARY    YES
drop table primary03;
drop table if exists primary04;
create table primary04(col1 int primary key ,col2 varbinary(20));
insert into primary04 values (1, 'qfreqvreq');
insert into primary04 values (2, '324543##');
alter table primary04 modify col1 float;
show create table primary04;
Table    Create Table
primary04    CREATE TABLE `primary04` (\n`col1` FLOAT NOT NULL,\n`col2` VARBINARY(20) DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
insert into primary04 values (1, '324342__');
Duplicate entry '1' for key 'col1'
insert into primary04 values (3, 'qw');
select * from primary04;
col1    col2
1.0    qfreqvreq
2.0    324543##
3.0    qw
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary04' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary04    col1    FLOAT    NO
primary04    col2    VARBINARY    YES
drop table primary04;
drop table if exists primary05;
create table primary05(col1 int primary key ,col2 varbinary(20));
insert into primary05 values (1, 'qfreqvreq');
insert into primary05 values (2, '324543##');
alter table primary05 modify col2 binary(30) primary key;
Multiple primary key defined
show create table primary05;
Table    Create Table
primary05    CREATE TABLE `primary05` (\n`col1` INT NOT NULL,\n`col2` VARBINARY(20) DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary05' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary05    col1    INT    NO
primary05    col2    VARBINARY    YES
drop table primary05;
drop table if exists primary06;
create table primary06(col1 int primary key ,col2 varbinary(20));
insert into primary06 values (1, 'qfreqvreq');
insert into primary06 values (2, '324543##');
alter table primary06 modify col1 int unsigned primary key;
Multiple primary key defined
alter table primary06 modify col2 binary(30) primary key;
Multiple primary key defined
show create table primary06;
Table    Create Table
primary06    CREATE TABLE `primary06` (\n`col1` INT NOT NULL,\n`col2` VARBINARY(20) DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary06' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary06    col1    INT    NO
primary06    col2    VARBINARY    YES
drop table primary06;
drop table if exists primary07;
create table primary07(col1 int ,col2 float, col3 decimal, primary key (col1, col2));
insert into primary07 values (1, 213412.32143, 3214312.34243214242);
insert into primary07 values (2, -324.2342432423, -1243.42334234242);
alter table primary07 modify col1 double default null;
All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
alter table primary07 modify col2 int default null;
All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
show create table primary07;
Table    Create Table
primary07    CREATE TABLE `primary07` (\n`col1` INT NOT NULL,\n`col2` FLOAT NOT NULL,\n`col3` DECIMAL(38,0) DEFAULT NULL,\nPRIMARY KEY (`col1`,`col2`)\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'primary07' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
primary07    col1    INT    NO
primary07    col2    FLOAT    NO
primary07    col3    DECIMAL128    YES
drop table primary07;
drop table if exists primary07;
create table primary07(col1 int ,col2 float, col3 decimal, primary key (col1, col2));
insert into primary07 values (1, 213412.32143, 3214312.34243214242);
insert into primary07 values (2, -324.2342432423, -1243.42334234242);
alter table primary07 modify col1 double not null;
All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
alter table primary07 modify col2 decimal(28,10);
show create table primary07;
Table    Create Table
primary07    CREATE TABLE `primary07` (\n`col1` INT NOT NULL,\n`col2` DECIMAL(28,10) NOT NULL,\n`col3` DECIMAL(38,0) DEFAULT NULL,\nPRIMARY KEY (`col1`,`col2`)\n)
drop table primary07;
drop table if exists index01;
CREATE TABLE index01(a INTEGER not null , b CHAR(10), c date, d decimal(7,2), UNIQUE KEY(a, b));
show create table index01;
Table    Create Table
index01    CREATE TABLE `index01` (\n`a` INT NOT NULL,\n`b` CHAR(10) DEFAULT NULL,\n`c` DATE DEFAULT NULL,\n`d` DECIMAL(7,2) DEFAULT NULL,\nUNIQUE KEY `a` (`a`,`b`)\n)
insert into index01 values(1, 'ab', '1980-12-17', 800);
insert into index01 values(2, 'ac', '1981-02-20', 1600);
insert into index01 values(3, 'ad', '1981-02-22', 500);
select * from index01;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table index01 modify b VARCHAR(20);
show create table index01;
Table    Create Table
index01    CREATE TABLE `index01` (\n`a` INT NOT NULL,\n`b` VARCHAR(20) DEFAULT NULL,\n`c` DATE DEFAULT NULL,\n`d` DECIMAL(7,2) DEFAULT NULL,\nUNIQUE KEY `a` (`a`,`b`)\n)
show index from index01;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
index01    0    a    1    a    A    0    NULL    NULL                        YES    NULL
index01    0    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
alter table index01 modify b VARCHAR(20) UNIQUE KEY;
show index from index01;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
index01    0    a    1    a    A    0    NULL    NULL                        YES    NULL
index01    0    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
index01    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
show create table index01;
Table    Create Table
index01    CREATE TABLE `index01` (\n`a` INT NOT NULL,\n`b` VARCHAR(20) DEFAULT NULL,\n`c` DATE DEFAULT NULL,\n`d` DECIMAL(7,2) DEFAULT NULL,\nUNIQUE KEY `a` (`a`,`b`),\nUNIQUE KEY `b` (`b`)\n)
select * from index01;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'index01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
index01    a    INT    NO
index01    b    VARCHAR    YES
index01    c    DATE    YES
index01    d    DECIMAL64    YES
drop table index01;
drop table if exists index02;
CREATE TABLE index02(a INTEGER PRIMARY KEY, b CHAR(10), c date, d decimal(7,2), INDEX(a, b), KEY(c));
insert into index02 values(1, 'ab', '1980-12-17', 800);
insert into index02 values(2, 'ac', '1981-02-20', 1600);
insert into index02 values(3, 'ad', '1981-02-22', 500);
select * from index02;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
alter table index02 modify b VARCHAR(20);
show index from index02;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
index02    1    a    1    a    A    0    NULL    NULL                        YES    NULL
index02    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
index02    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
index02    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table index02 modify b VARCHAR(20) KEY;
Multiple primary key defined
show create table index02;
Table    Create Table
index02    CREATE TABLE `index02` (\n`a` INT NOT NULL,\n`b` VARCHAR(20) DEFAULT NULL,\n`c` DATE DEFAULT NULL,\n`d` DECIMAL(7,2) DEFAULT NULL,\nPRIMARY KEY (`a`),\nKEY `a` (`a`,`b`),\nKEY `c` (`c`)\n)
alter table index02 modify b VARCHAR(20) UNIQUE KEY;
show index from index02;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
index02    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
index02    1    a    1    a    A    0    NULL    NULL                        YES    NULL
index02    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
index02    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
index02    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
alter table index02 modify c VARCHAR(20) UNIQUE KEY;
show index from index02;
Table    Non_unique    Key_name    Seq_in_index    Column_name    Collation    Cardinality    Sub_part    Packed    Null    Index_type    Comment    Index_comment    Index_params    Visible    Expression
index02    0    b    1    b    A    0    NULL    NULL    YES                    YES    NULL
index02    0    c_2    1    c    A    0    NULL    NULL    YES                    YES    NULL
index02    1    a    1    a    A    0    NULL    NULL                        YES    NULL
index02    1    a    2    b    A    0    NULL    NULL    YES                    YES    NULL
index02    1    c    1    c    A    0    NULL    NULL    YES                    YES    NULL
index02    0    PRIMARY    1    a    A    0    NULL    NULL                        YES    NULL
show create table index02;
Table    Create Table
index02    CREATE TABLE `index02` (\n`a` INT NOT NULL,\n`b` VARCHAR(20) DEFAULT NULL,\n`c` VARCHAR(20) DEFAULT NULL,\n`d` DECIMAL(7,2) DEFAULT NULL,\nPRIMARY KEY (`a`),\nUNIQUE KEY `b` (`b`),\nUNIQUE KEY `c_2` (`c`),\nKEY `a` (`a`,`b`),\nKEY `c` (`c`)\n)
desc index02;
Field    Type    Null    Key    Default    Extra    Comment
a    INT(32)    NO    PRI    null        
b    VARCHAR(20)    YES    UNI    null        
c    VARCHAR(20)    YES    UNI    null        
d    DECIMAL64(7)    YES        null        
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'index02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
index02    a    INT    NO
index02    b    VARCHAR    YES
index02    c    VARCHAR    YES
index02    d    DECIMAL64    YES
select * from index02;
a    b    c    d
1    ab    1980-12-17    800.00
2    ac    1981-02-20    1600.00
3    ad    1981-02-22    500.00
drop table index02;
drop table if exists foreign01;
create table foreign01(col1 int primary key,
col2 varchar(20),
col3 int,
col4 bigint);
drop table if exists foreign02;
create table foreign02(col1 int,
col2 int,
col3 int primary key,
constraint `c1` foreign key(col1) references foreign01(col1));
show create table foreign01;
Table    Create Table
foreign01    CREATE TABLE `foreign01` (\n`col1` INT NOT NULL,\n`col2` VARCHAR(20) DEFAULT NULL,\n`col3` INT DEFAULT NULL,\n`col4` BIGINT DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
show create table foreign02;
Table    Create Table
foreign02    CREATE TABLE `foreign02` (\n`col1` INT DEFAULT NULL,\n`col2` INT DEFAULT NULL,\n`col3` INT NOT NULL,\nPRIMARY KEY (`col3`),\nCONSTRAINT `c1` FOREIGN KEY (`col1`) REFERENCES `foreign01` (`col1`) ON DELETE RESTRICT ON UPDATE RESTRICT\n)
insert into foreign01 values(1,'sfhuwe',1,1);
insert into foreign01 values(2,'37829901k3d',2,2);
insert into foreign02 values(1,1,1);
insert into foreign02 values(2,2,2);
select * from foreign01;
col1    col2    col3    col4
1    sfhuwe    1    1
2    37829901k3d    2    2
select * from foreign02;
col1    col2    col3
1    1    1
2    2    2
alter table foreign01 modify col1 decimal;
Cannot change column 'col1': used in a foreign key constraint 'c1' of table 'test.foreign02'
alter table foreign02 modify col1 float after col3;
Cannot change column 'col1': used in a foreign key constraint 'c1'
show create table foreign01;
Table    Create Table
foreign01    CREATE TABLE `foreign01` (\n`col1` INT NOT NULL,\n`col2` VARCHAR(20) DEFAULT NULL,\n`col3` INT DEFAULT NULL,\n`col4` BIGINT DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
show create table foreign02;
Table    Create Table
foreign02    CREATE TABLE `foreign02` (\n`col1` INT DEFAULT NULL,\n`col2` INT DEFAULT NULL,\n`col3` INT NOT NULL,\nPRIMARY KEY (`col3`),\nCONSTRAINT `c1` FOREIGN KEY (`col1`) REFERENCES `foreign01` (`col1`) ON DELETE RESTRICT ON UPDATE RESTRICT\n)
alter table foreign01 modify col2 varchar(100);
alter table foreign02 modify col2 double after col3;
show create table foreign01;
Table    Create Table
foreign01    CREATE TABLE `foreign01` (\n`col1` INT NOT NULL,\n`col2` VARCHAR(100) DEFAULT NULL,\n`col3` INT DEFAULT NULL,\n`col4` BIGINT DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
show create table foreign02;
Table    Create Table
foreign02    CREATE TABLE `foreign02` (\n`col1` INT DEFAULT NULL,\n`col3` INT NOT NULL,\n`col2` DOUBLE DEFAULT NULL,\nPRIMARY KEY (`col3`),\nCONSTRAINT `c1` FOREIGN KEY (`col1`) REFERENCES `foreign01` (`col1`) ON DELETE RESTRICT ON UPDATE RESTRICT\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'foreign01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
foreign01    col1    INT    NO
foreign01    col2    VARCHAR    YES
foreign01    col3    INT    YES
foreign01    col4    BIGINT    YES
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'foreign02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
foreign02    col1    INT    YES
foreign02    col2    DOUBLE    YES
foreign02    col3    INT    NO
drop table foreign02;
drop table foreign01;
drop table if exists decimal01;
create table decimal01 (col1 decimal,col2 decimal(38,10));
insert into decimal01 values (23746723468723.242334243, 38208439024234.43242342423423423422342);
insert into decimal01 values (32487329847923424, -4324324324.3297932749028949373324242423424);
alter table decimal01 modify column col1 decimal(38,6);
alter table decimal01 modify col2 decimal(38,9);
show create table decimal01;
Table    Create Table
decimal01    CREATE TABLE `decimal01` (\n`col1` DECIMAL(38,6) DEFAULT NULL,\n`col2` DECIMAL(38,9) DEFAULT NULL\n)
select * from decimal01;
col1    col2
23746723468723.000000    38208439024234.432423424
32487329847923424.000000    -4324324324.329793275
truncate table decimal01;
alter table decimal01 add column col3 decimal(19,0) first;
show create table decimal01;
Table    Create Table
decimal01    CREATE TABLE `decimal01` (\n`col3` DECIMAL(19,0) DEFAULT NULL,\n`col1` DECIMAL(38,6) DEFAULT NULL,\n`col2` DECIMAL(38,9) DEFAULT NULL\n)
insert into decimal01 values (37298342.123, -37829342.3244234, -283794324.2342);
select * from decimal01;
col3    col1    col2
37298342    -37829342.324423    -283794324.234200000
drop table decimal01;
drop table if exists null01;
create table null01(col1 int default null, col2 binary(10));
insert into null01 values (1, '32143');
insert into null01 values (null, '3e');
alter table null01 modify col1 int not null;
constraint violation: Column 'col1' cannot be null
show create table null01;
Table    Create Table
null01    CREATE TABLE `null01` (\n`col1` INT DEFAULT null,\n`col2` BINARY(10) DEFAULT NULL\n)
select * from null01;
col1    col2
1    32143     
null    3e        
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'null01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
null01    col1    INT    YES
null01    col2    BINARY    YES
drop table null01;
drop table if exists null02;
create table null02(col1 int default null, col2 varbinary(100));
insert into null02 values (1, '32143');
insert into null02 values (2, '3e');
alter table null02 modify col1 int not null;
show create table null02;
Table    Create Table
null02    CREATE TABLE `null02` (\n`col1` INT NOT NULL,\n`col2` VARBINARY(100) DEFAULT NULL\n)
insert into null02 values (null, '1');
constraint violation: Column 'col1' cannot be null
insert into null02 values (342, 'aesd');
select * from null02;
col1    col2
1    32143
2    3e
342    aesd
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'null02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
null02    col1    INT    NO
null02    col2    VARBINARY    YES
drop table null02;
drop table if exists cast01;
create table cast01 (col1 int, col2 smallint, col3 bigint unsigned, col4 tinyint unsigned);
insert into cast01 values (1, -32768, 12352314214243242, 0);
insert into cast01 values (329884234, 32767, 3828493, 21);
insert into cast01 values (-29302423, 32, 324242132321, 10);
insert into cast01 values (null, null, null, null);
select * from cast01;
col1    col2    col3    col4
1    -32768    12352314214243242    0
329884234    32767    3828493    21
-29302423    32    324242132321    10
null    null    null    null
alter table cast01 modify col1 float;
show create table cast01;
Table    Create Table
cast01    CREATE TABLE `cast01` (\n`col1` FLOAT DEFAULT NULL,\n`col2` SMALLINT DEFAULT NULL,\n`col3` BIGINT UNSIGNED DEFAULT NULL,\n`col4` TINYINT UNSIGNED DEFAULT NULL\n)
insert into cast01 values (3271.312432, null, 323254324321432, 100);
select * from cast01;
col1    col2    col3    col4
1.0    -32768    12352314214243242    0
3.2988422E8    32767    3828493    21
-2.9302424E7    32    324242132321    10
null    null    null    null
3271.3125    null    323254324321432    100
alter table cast01 modify col2 double first;
show create table cast01;
Table    Create Table
cast01    CREATE TABLE `cast01` (\n`col2` DOUBLE DEFAULT NULL,\n`col1` FLOAT DEFAULT NULL,\n`col3` BIGINT UNSIGNED DEFAULT NULL,\n`col4` TINYINT UNSIGNED DEFAULT NULL\n)
insert into cast01 values (3271834.2134, -3892843.214, 328943232, 255);
select * from cast01;
col2    col1    col3    col4
-32768.0    1.0    12352314214243242    0
32767.0    3.2988422E8    3828493    21
32.0    -2.9302424E7    324242132321    10
null    null    null    null
null    3271.3125    323254324321432    100
3271834.2134    -3892843.2    328943232    255
alter table cast01 modify col3 double;
show create table cast01;
Table    Create Table
cast01    CREATE TABLE `cast01` (\n`col2` DOUBLE DEFAULT NULL,\n`col1` FLOAT DEFAULT NULL,\n`col3` DOUBLE DEFAULT NULL,\n`col4` TINYINT UNSIGNED DEFAULT NULL\n)
insert into cast01 values (3271834.2134, -3892843.214, 328943232.3234, 255);
select * from cast01;
col2    col1    col3    col4
-32768.0    1.0    1.2352314214243242E16    0
32767.0    3.2988422E8    3828493.0    21
32.0    -2.9302424E7    3.24242132321E11    10
null    null    null    null
null    3271.3125    3.23254324321432E14    100
3271834.2134    -3892843.2    3.28943232E8    255
3271834.2134    -3892843.2    3.289432323234E8    255
alter table cast01 modify col4 decimal(28,10) after col2;
show create table cast01;
Table    Create Table
cast01    CREATE TABLE `cast01` (\n`col2` DOUBLE DEFAULT NULL,\n`col4` DECIMAL(28,10) DEFAULT NULL,\n`col1` FLOAT DEFAULT NULL,\n`col3` DOUBLE DEFAULT NULL\n)
insert into cast01 values (3271834.2134, -3823243.4324, 328943232.3234, -32423.43243);
select * from cast01;
col2    col4    col1    col3
-32768.0    0E-10    1.0    1.2352314214243242E16
32767.0    21.0000000000    3.2988422E8    3828493.0
32.0    10.0000000000    -2.9302424E7    3.24242132321E11
null    null    null    null
null    100.0000000000    3271.3125    3.23254324321432E14
3271834.2134    255.0000000000    -3892843.2    3.28943232E8
3271834.2134    255.0000000000    -3892843.2    3.289432323234E8
3271834.2134    -3823243.4324000000    3.2894323E8    -32423.43243
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'cast01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
cast01    col1    FLOAT    YES
cast01    col2    DOUBLE    YES
cast01    col3    DOUBLE    YES
cast01    col4    DECIMAL128    YES
drop table cast01;
drop table if exists cast02;
create table cast02 (col1 float, col2 double, col3 decimal(30,5), col4 decimal(37,1));
insert into cast02 values (1.321341, -32768.32142, 1235231421424.3214242134124324323, 12342.43243242121);
insert into cast02 values (329884234.3242, null, 3828493, 21);
insert into cast02 values (93024232.32324, -32.243142, 324242132321, null);
select * from cast02;
col1    col2    col3    col4
1.321341    -32768.32142    1235231421424.32142    12342.4
3.2988422E8    null    3828493.00000    21.0
9.302423E7    -32.243142    324242132321.00000    null
alter table cast02 modify col1 int unsigned;
show create table cast02;
Table    Create Table
cast02    CREATE TABLE `cast02` (\n`col1` INT UNSIGNED DEFAULT NULL,\n`col2` DOUBLE DEFAULT NULL,\n`col3` DECIMAL(30,5) DEFAULT NULL,\n`col4` DECIMAL(37,1) DEFAULT NULL\n)
insert into cast02 values (2724.327832, null, 32325432421432, 100.3322142142);
select * from cast02;
col1    col2    col3    col4
1    -32768.32142    1235231421424.32142    12342.4
329884224    null    3828493.00000    21.0
93024232    -32.243142    324242132321.00000    null
2724    null    32325432421432.00000    100.3
alter table cast02 modify col2 bigint;
show create table cast02;
Table    Create Table
cast02    CREATE TABLE `cast02` (\n`col1` INT UNSIGNED DEFAULT NULL,\n`col2` BIGINT DEFAULT NULL,\n`col3` DECIMAL(30,5) DEFAULT NULL,\n`col4` DECIMAL(37,1) DEFAULT NULL\n)
insert into cast02 values (1000, 323421423421342, 328943232.321424, -255.321151234);
select * from cast02;
col1    col2    col3    col4
1    -32768    1235231421424.32142    12342.4
329884224    null    3828493.00000    21.0
93024232    -32    324242132321.00000    null
2724    null    32325432421432.00000    100.3
1000    323421423421342    328943232.32142    -255.3
alter table cast02 modify col3 bigint unsigned;
show create table cast02;
Table    Create Table
cast02    CREATE TABLE `cast02` (\n`col1` INT UNSIGNED DEFAULT NULL,\n`col2` BIGINT DEFAULT NULL,\n`col3` BIGINT UNSIGNED DEFAULT NULL,\n`col4` DECIMAL(37,1) DEFAULT NULL\n)
insert into cast02 values (32718, 100, 32894323237289, 234);
select * from cast02;
col1    col2    col3    col4
1    -32768    1235231421424    12342.4
329884224    null    3828493    21.0
93024232    -32    324242132321    null
2724    null    32325432421432    100.3
1000    323421423421342    328943232    -255.3
32718    100    32894323237289    234.0
alter table cast02 modify col4 smallint first;
show create table cast02;
Table    Create Table
cast02    CREATE TABLE `cast02` (\n`col4` SMALLINT DEFAULT NULL,\n`col1` INT UNSIGNED DEFAULT NULL,\n`col2` BIGINT DEFAULT NULL,\n`col3` BIGINT UNSIGNED DEFAULT NULL\n)
insert into cast02 values (234, 32718, 100, 32894323237289);
select * from cast02;
col4    col1    col2    col3
12342    1    -32768    1235231421424
21    329884224    null    3828493
null    93024232    -32    324242132321
100    2724    null    32325432421432
-255    1000    323421423421342    328943232
234    32718    100    32894323237289
234    32718    100    32894323237289
drop table cast02;
drop table if exists cast03;
create table cast03 (col1 smallint unsigned, col2 float, col3 double, col4 decimal);
insert into cast03 values (1, 323242.34242, 23432.3242, 8329498352.32534242323432);
insert into cast03 values (200, -213443.321412, 32424.342424242, 0.382943424324234);
insert into cast03 (col1, col2, col3, col4) values (null, null, null, null);
alter table cast03 modify col1 char(50), modify col2 char(100), modify col3 varchar(50), modify col4 varchar(15) first;
show create table cast03;
Table    Create Table
cast03    CREATE TABLE `cast03` (\n`col4` VARCHAR(15) DEFAULT NULL,\n`col1` CHAR(50) DEFAULT NULL,\n`col2` CHAR(100) DEFAULT NULL,\n`col3` VARCHAR(50) DEFAULT NULL\n)
insert into cast03 values ('3243342', '3242f()', '4728947234342,', '457328990r3if943i4u9owiuo4ewfr3w4r3fre');
select * from cast03;
col4    col1    col2    col3
8329498352    1    323242.34    23432.3242
0    200    -213443.33    32424.342424242
null    null    null    null
3243342    3242f()    4728947234342,    457328990r3if943i4u9owiuo4ewfr3w4r3fre
drop table cast03;
drop table if exists cast04;
create table cast04 (col1 char, col2 varchar, col3 text, col4 blob);
insert into cast04 values ('1', '-281321.21312', '328', '327482739.32413');
insert into cast04 values ('0', '3412234321', '-332134324.2432423423423', '-1032412.4324');
insert into cast04 values (null, null, null, null);
alter table cast04 modify col1 int unsigned;
alter table cast04 modify col2 decimal(34,4) after col4;
show create table cast04;
Table    Create Table
cast04    CREATE TABLE `cast04` (\n`col1` INT UNSIGNED DEFAULT NULL,\n`col3` TEXT DEFAULT NULL,\n`col4` BLOB DEFAULT NULL,\n`col2` DECIMAL(34,4) DEFAULT NULL\n)
alter table cast04 modify col3 double, modify col4 float;
show create table cast04;
Table    Create Table
cast04    CREATE TABLE `cast04` (\n`col1` INT UNSIGNED DEFAULT NULL,\n`col3` DOUBLE DEFAULT NULL,\n`col4` FLOAT DEFAULT NULL,\n`col2` DECIMAL(34,4) DEFAULT NULL\n)
insert into cast04 values ();
select * from cast04;
col1    col3    col4    col2
1    328.0    3.2748275E8    -281321.2131
0    -3.321343242432423E8    -1032412.44    3412234321.0000
null    null    null    null
null    null    null    null
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'cast04' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
cast04    col1    INT UNSIGNED    YES
cast04    col2    DECIMAL128    YES
cast04    col3    DOUBLE    YES
cast04    col4    FLOAT    YES
drop table cast04;
drop table if exists cast05;
create table cast05 (col1 date);
insert into cast05 values ('1997-01-13');
insert into cast05 values ('2023-12-12');
insert into cast05 values (null);
select * from cast05;
col1
1997-01-13
2023-12-12
null
alter table cast05 modify col1 varchar(100);
alter table cast05 modify col1 datetime first;
select * from cast05;
col1
1997-01-13 00:00:00
2023-12-12 00:00:00
null
show create table cast05;
Table    Create Table
cast05    CREATE TABLE `cast05` (\n`col1` DATETIME DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'cast05' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
cast05    col1    DATETIME    YES
drop table cast05;
drop table if exists abnormal02;
create table abnormal02 (col1 int unsigned not null, col2 smallint unsigned);
insert into abnormal02 values (2147483647, 255);
insert into abnormal02 values (3242334, 10);
select * from abnormal02;
col1    col2
2147483647    255
3242334    10
alter table abnormal02 modify col1 int;
alter table abnormal02 modify col2 smallint;
select * from abnormal02;
col1    col2
2147483647    255
3242334    10
show create table abnormal02;
Table    Create Table
abnormal02    CREATE TABLE `abnormal02` (\n`col1` INT DEFAULT NULL,\n`col2` SMALLINT DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
abnormal02    col1    INT    YES
abnormal02    col2    SMALLINT    YES
drop table abnormal02;
drop table if exists abnormal01;
create table abnormal01 (col1 int, col2 bigint, col3 decimal);
insert into abnormal01 values (2147483647, 9223372036854775807, 3291843920.32783);
insert into abnormal01 values (-21843243, 832942343241999999, -2787343243.2343);
insert into abnormal01 values (null, null, null);
select * from abnormal01;
col1    col2    col3
2147483647    9223372036854775807    3291843920
-21843243    832942343241999999    -2787343243
null    null    null
alter table abnormal01 modify col2 int;
Data truncation: data out of range: data type int32, value '9223372036854775807'
alter table abnormal01 modify col1 smallint;
Data truncation: data out of range: data type int16, value '2147483647'
alter table abnormal01 modify col3 decimal(10,0);
select * from abnormal01;
col1    col2    col3
2147483647    9223372036854775807    3291843920
-21843243    832942343241999999    -2787343243
null    null    null
show create table abnormal01;
Table    Create Table
abnormal01    CREATE TABLE `abnormal01` (\n`col1` INT DEFAULT NULL,\n`col2` BIGINT DEFAULT NULL,\n`col3` DECIMAL(10,0) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
abnormal01    col1    INT    YES
abnormal01    col2    BIGINT    YES
abnormal01    col3    DECIMAL64    YES
drop table abnormal01;
drop table if exists abnormal02;
create table abnormal02 (col1 int not null, col2 smallint);
insert into abnormal02 values (-2147483647, 255);
insert into abnormal02 values (3242334, -10);
select * from abnormal02;
col1    col2
-2147483647    255
3242334    -10
alter table abnormal02 modify col1 int unsigned;
Data truncation: data out of range: data type uint, value '-2147483647'
alter table abnormal02 modify col2 smallint unsigned;
Data truncation: data out of range: data type uint, value '-10'
select * from abnormal02;
col1    col2
-2147483647    255
3242334    -10
show create table abnormal02;
Table    Create Table
abnormal02    CREATE TABLE `abnormal02` (\n`col1` INT NOT NULL,\n`col2` SMALLINT DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
abnormal02    col1    INT    NO
abnormal02    col2    SMALLINT    YES
drop table abnormal02;
drop table if exists abnormal03;
create table abnormal03 (col1 datetime, col2 blob);
insert into abnormal03 values ('1997-01-13 00:00:00', '342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f');
insert into abnormal03 values ('2012-01-13 23:23:59', '63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573');
select * from abnormal03;
col1    col2
1997-01-13 00:00:00    342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f
2012-01-13 23:23:59    63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573
alter table abnormal03 modify col1 varchar(100);
alter table abnormal03 modify col2 int;
invalid argument cast to int, bad value 342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f
select * from abnormal03;
col1    col2
1997-01-13 00:00:00    342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f
2012-01-13 23:23:59    63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573
show create table abnormal03;
Table    Create Table
abnormal03    CREATE TABLE `abnormal03` (\n`col1` VARCHAR(100) DEFAULT NULL,\n`col2` BLOB DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal03' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
abnormal03    col1    VARCHAR    YES
abnormal03    col2    BLOB    YES
drop table abnormal03;
drop table if exists abnormal04;
create table abnormal04 (col1 json, col2 enum('a', 'b'));
insert into abnormal04 values (('{"x": 17, "x": "red"}'),'a');
insert into abnormal04 values (('{"x": 17, "x": "red", "x": [3, 5, 7]}'), 'b');
select * from abnormal04;
col1    col2
{"x": "red"}    a
{"x": [3, 5, 7]}    b
alter table abnormal04 modify col1 float;
invalid argument operator cast, bad value [JSON FLOAT]
alter table abnormal04 modify col2 int;
invalid argument cast to int, bad value a
select * from abnormal04;
col1    col2
{"x": "red"}    a
{"x": [3, 5, 7]}    b
show create table abnormal04;
Table    Create Table
abnormal04    CREATE TABLE `abnormal04` (\n`col1` JSON DEFAULT NULL,\n`col2` ENUM('a','b') DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal04' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
abnormal04    col1    JSON    YES
abnormal04    col2    ENUM    YES
drop table abnormal04;
drop table if exists abnormal05;
create temporary table abnormal05 (col1 datetime, col2 blob);
insert into abnormal05 values ('1997-01-13 00:00:00', '342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f');
insert into abnormal05 values ('2012-01-13 23:23:59', '63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573');
select * from abnormal05;
col1    col2
1997-01-13 00:00:00    342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f
2012-01-13 23:23:59    63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573
alter table abnormal05 modify col1 float;
alter table for temporary table is not yet implemented
alter table abnormal05 modify col2 int;
alter table for temporary table is not yet implemented
select * from abnormal05;
col1    col2
1997-01-13 00:00:00    342ewfyuehcdeiuopwu4jo3lekwdfhiu48woi3jrdnefrbwui34f
2012-01-13 23:23:59    63298ufh3jcweuiv4h32jhf432ouy4hu3enjwfnwje4n3bj24f34573
show create table abnormal05;
Table    Create Table
abnormal05    CREATE TABLE `abnormal05` (\n`col1` DATETIME DEFAULT NULL,\n`col2` BLOB DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'abnormal05' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
drop table abnormal05;
drop table if exists view01;
drop table if exists view02;
create table view01 (a int);
insert into view01 values (1),(2);
create table view02 (a int);
insert into view02 values (1);
create view v0 as select view01.a, view02.a as b from view01 left join view02 using(a);
show create view v0;
View    Create View    character_set_client    collation_connection
v0    create view v0 as select view01.a, view02.a as b from view01 left join view02 using(a);    utf8mb4    utf8mb4_general_ci
alter table view01 modify a float;
show create table view01;
Table    Create Table
view01    CREATE TABLE `view01` (\n`a` FLOAT DEFAULT NULL\n)
show create view v0;
View    Create View    character_set_client    collation_connection
v0    create view v0 as select view01.a, view02.a as b from view01 left join view02 using(a);    utf8mb4    utf8mb4_general_ci
drop table view01;
drop table view02;
drop view v0;
drop table if exists cluster01;
create table cluster01(col1 int, col2 decimal) cluster by col1;
insert into cluster01 values (1, 389234924);
insert into cluster01 values (2, -2893428);
alter table cluster01 modify column col2 float;
alter table cluster01 modify col1 double after col2;
show create table cluster01;
Table    Create Table
cluster01    CREATE TABLE `cluster01` (\n`col2` FLOAT DEFAULT NULL,\n`col1` DOUBLE DEFAULT NULL\n) CLUSTER BY (`col1`)
select * from cluster01;
col2    col1
3.892349E8    1.0
-2893428.0    2.0
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'cluster01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
cluster01    col1    DOUBLE    YES
cluster01    col2    FLOAT    YES
drop table cluster01;
drop table if exists insert01;
create table insert01 (col1 int, col2 decimal(20,10), col3 date);
alter table insert01 modify col1 float;
insert into insert01 values (1, 2378324.324324234, '2020-12-12');
insert into insert01 values (2, -372893894.32234230000, '1970-01-01');
alter table insert01 modify col1 float;
alter table insert01 modify col2 decimal(30,1);
show create table insert01;
Table    Create Table
insert01    CREATE TABLE `insert01` (\n`col1` FLOAT DEFAULT NULL,\n`col2` DECIMAL(30,1) DEFAULT NULL,\n`col3` DATE DEFAULT NULL\n)
insert into insert01 select * from insert01;
select * from insert01;
col1    col2    col3
1.0    2378324.3    2020-12-12
2.0    -372893894.3    1970-01-01
1.0    2378324.3    2020-12-12
2.0    -372893894.3    1970-01-01
drop table insert01;
drop table if exists time01;
create table time01 (col1 date, col2 datetime, col3 timestamp, col4 time);
insert into time01 values ('2020-01-01', '2000-10-10 12:12:12', '1970-01-01 12:23:59.323000', '01:01:29');
insert into time01 values ('1997-01-13', null, '1989-01-01 23:23:59.100000', '23:23:59');
insert into time01 (col1, col2, col3, col4) values ('2030-12-31', '2031-09-09 01:01:01', '2013-12-12 10:10:10.125000', '10:12:12');
select * from time01;
col1    col2    col3    col4
2020-01-01    2000-10-10 12:12:12    1970-01-01 12:23:59    01:01:29
1997-01-13    null    1989-01-01 23:23:59    23:23:59
2030-12-31    2031-09-09 01:01:01    2013-12-12 10:10:10    10:12:12
alter table time01 modify col1 int, modify col2 int first, modify col3 int after col1, modify col4 int;
show create table time01;
Table    Create Table
time01    CREATE TABLE `time01` (\n`col2` INT DEFAULT NULL,\n`col1` INT DEFAULT NULL,\n`col3` INT DEFAULT NULL,\n`col4` INT DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'time01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
time01    col1    INT    YES
time01    col2    INT    YES
time01    col3    INT    YES
time01    col4    INT    YES
drop table time01;
drop table if exists time02;
create table time02 (col2 datetime, col3 timestamp, col4 time);
insert into time02 values ('2000-10-10 12:12:12', '1970-01-01 12:23:59.323000', '01:01:29');
insert into time02 values ( null, '1889-01-01 23:23:59.125000', '23:23:59');
insert into time02 (col2, col3, col4) values ('2031-09-09 01:01:01', '2013-12-12 10:10:10.125000', '10:12:12');
select * from time02;
col2    col3    col4
2000-10-10 12:12:12    1970-01-01 12:23:59    01:01:29
null    1889-01-01 23:23:59    23:23:59
2031-09-09 01:01:01    2013-12-12 10:10:10    10:12:12
alter table time02 modify col2 decimal(20,10) first, modify col3 decimal after col2, modify col4 decimal(38,0);
show create table time02;
Table    Create Table
time02    CREATE TABLE `time02` (\n`col2` DECIMAL(20,10) DEFAULT NULL,\n`col3` DECIMAL(38,0) DEFAULT NULL,\n`col4` DECIMAL(38,0) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'time02' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
time02    col2    DECIMAL128    YES
time02    col3    DECIMAL128    YES
time02    col4    DECIMAL128    YES
drop table time02;
drop table if exists prepare01;
create table prepare01(col1 int, col2 char);
insert into prepare01 values (1,'a'),(2,'b'),(3,'c');
prepare s1 from 'alter table prepare01 modify col1 decimal primary key';
execute s1;
show create table prepare01;
Table    Create Table
prepare01    CREATE TABLE `prepare01` (\n`col1` DECIMAL(38,0) NOT NULL,\n`col2` CHAR(1) DEFAULT NULL,\nPRIMARY KEY (`col1`)\n)
prepare s2 from 'alter table prepare01 modify col2 varchar(100) not null';
execute s2;
show create table prepare01;
Table    Create Table
prepare01    CREATE TABLE `prepare01` (\n`col1` DECIMAL(38,0) NOT NULL,\n`col2` VARCHAR(100) NOT NULL,\nPRIMARY KEY (`col1`)\n)
drop table prepare01;
drop role if exists role_r1;
drop user if exists role_u1;
drop table if exists test01;
create role role_r1;
create user role_u1 identified by '111' default role role_r1;
create table test01(col1 int);
insert into test01 values(1);
insert into test01 values(2);
grant create database on account * to role_r1;
grant show databases on account * to role_r1;
grant connect on account * to role_r1;
grant select on table * to role_r1;
grant show tables on database * to role_r1;
use alter_table_modify_column;
alter table test01 modify col1 int primary key;
internal error: do not have privilege to execute the statement
grant alter table on database * to role_r1;
use alter_table_modify_column;
alter table test01 modify col1 int primary key;
no such table alter_table_modify_column.test01
show create table test01;
no such table alter_table_modify_column.test01
show create table test01;
Table    Create Table
test01    CREATE TABLE `test01` (\n`col1` INT DEFAULT NULL\n)
drop table test01;
drop role role_r1;
drop user role_u1;
drop table if exists mix01;
create table mix01 (col1 int not null , col2 decimal, col3 date, col4 varchar(100));
insert into mix01 values (1, 23849234.324, '2100-01-01', 'qy83uhfbh234y78y&*%^&%$$$E%^&Y*UIJNHBGVFTY^&Y*UJHBGVTF^&*U(OK');
insert into mix01 values (2, 773892.32748000000000, '1997-01-13', '38782yhbf3uhy4iendb32gefdc7y834uh2neujdr2h4f3v43');
insert into mix01 values (3, -82913942.3434, null, null);
select * from mix01;
col1    col2    col3    col4
1    23849234    2100-01-01    qy83uhfbh234y78y&*%^&%$$$E%^&Y*UIJNHBGVFTY^&Y*UJHBGVTF^&*U(OK
2    773892    1997-01-13    38782yhbf3uhy4iendb32gefdc7y834uh2neujdr2h4f3v43
3    -82913942    null    null
alter table mix01 add column col1_2 binary after col1;
show create table mix01;
Table    Create Table
mix01    CREATE TABLE `mix01` (\n`col1` INT NOT NULL,\n`col1_2` BINARY(1) DEFAULT NULL,\n`col2` DECIMAL(38,0) DEFAULT NULL,\n`col3` DATE DEFAULT NULL,\n`col4` VARCHAR(100) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'mix01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
mix01    col1    INT    NO
mix01    col1_2    BINARY    YES
mix01    col2    DECIMAL128    YES
mix01    col3    DATE    YES
mix01    col4    VARCHAR    YES
alter table mix01 modify column col1_2 varbinary(10) first;
show create table mix01;
Table    Create Table
mix01    CREATE TABLE `mix01` (\n`col1_2` VARBINARY(10) DEFAULT NULL,\n`col1` INT NOT NULL,\n`col2` DECIMAL(38,0) DEFAULT NULL,\n`col3` DATE DEFAULT NULL,\n`col4` VARCHAR(100) DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'mix01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
mix01    col1    INT    NO
mix01    col1_2    VARBINARY    YES
mix01    col2    DECIMAL128    YES
mix01    col3    DATE    YES
mix01    col4    VARCHAR    YES
truncate table mix01;
alter table mix01 add column col5 int;
show create table mix01;
Table    Create Table
mix01    CREATE TABLE `mix01` (\n`col1_2` VARBINARY(10) DEFAULT NULL,\n`col1` INT NOT NULL,\n`col2` DECIMAL(38,0) DEFAULT NULL,\n`col3` DATE DEFAULT NULL,\n`col4` VARCHAR(100) DEFAULT NULL,\n`col5` INT DEFAULT NULL\n)
select table_name,COLUMN_NAME, data_type,is_nullable from information_schema.columns where table_name like 'mix01' and COLUMN_NAME not like '__mo%';
table_name    column_name    data_type    is_nullable
mix01    col1    INT    NO
mix01    col1_2    VARBINARY    YES
mix01    col2    DECIMAL128    YES
mix01    col3    DATE    YES
mix01    col4    VARCHAR    YES
mix01    col5    INT    YES
drop table mix01;
drop table if exists table01;
begin;
create table table01(col1 int, col2 decimal);
insert into table01 values(100,200);
alter table table01 modify column col1 float;
commit;
select * from table01;
col1    col2
100.0    200
select col1 from table01;
col1
100.0
drop table table01;
drop table if exists t1;
create table t1 (a int,b enum('abc','def','database'));
insert into t1 values (1, 'abc');
insert into t1 values (2, 'database');
select * from t1;
a    b
1    abc
2    database
alter table t1 modify column b enum('abc','def','database') first;
show create table t1;
Table    Create Table
t1    CREATE TABLE `t1` (\n`b` ENUM('abc','def','database') DEFAULT NULL,\n`a` INT DEFAULT NULL\n)
select * from t1;
b    a
abc    1
database    2
drop table t1;
drop database test;
