drop table if exists t1;
create table t1(
deptno int unsigned,
dname varchar(15),
loc varchar(50),
unique key(deptno)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't1');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272466    272464    deptno    UNIQUE    1    0        deptno    1    null    __mo_index_unique_31a5930e-bf4f-11ed-8c2e-000c29203f30
drop table if exists t2;
create table t2(
empno int unsigned auto_increment,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
primary key(empno)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't2');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272468    272467    PRIMARY    PRIMARY    1    0        empno    1    null    null
drop table if exists t3;
create table t3(
empno int unsigned,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
unique key(empno, ename)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't3');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272471    272469    empno    UNIQUE    1    0        empno    1    null    __mo_index_unique_31b62034-bf4f-11ed-8c2e-000c29203f30
272471    272469    empno    UNIQUE    1    0        ename    2    null    __mo_index_unique_31b62034-bf4f-11ed-8c2e-000c29203f30
drop table if exists t4;
create table t4(
empno int unsigned,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
index(empno, ename, job)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't4');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272473    272472    empno    MULTIPLE    1    0        empno    1    null    null
272473    272472    empno    MULTIPLE    1    0        ename    2    null    null
272473    272472    empno    MULTIPLE    1    0        job    3    null    null
drop table if exists t5;
create table t5(
empno int unsigned,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
primary key(empno, ename)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't5');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272475    272474    PRIMARY    PRIMARY    1    0        empno    1    null    null
272475    272474    PRIMARY    PRIMARY    1    0        ename    2    null    null
drop table if exists t6;
create table t6(
empno int unsigned,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't6');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
drop table if exists t7;
create table t7(
col1 int unsigned,
col2 varchar(15),
col3 varchar(10),
col4 int unsigned,
col5 date,
col6 decimal(7,2),
col7 decimal(7,2),
col8 int unsigned,
unique index(col1,col2),
unique index(col3,col6)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't7');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272480    272477    col1    UNIQUE    1    0        col1    1    null    __mo_index_unique_31d820bd-bf4f-11ed-8c2e-000c29203f30
272480    272477    col1    UNIQUE    1    0        col2    2    null    __mo_index_unique_31d820bd-bf4f-11ed-8c2e-000c29203f30
272481    272477    col3    UNIQUE    1    0        col3    1    null    __mo_index_unique_31d82149-bf4f-11ed-8c2e-000c29203f30
272481    272477    col3    UNIQUE    1    0        col6    2    null    __mo_index_unique_31d82149-bf4f-11ed-8c2e-000c29203f30
drop table if exists t8;
create table t8(
empno int unsigned primary key,
ename varchar(15),
job varchar(10),
mgr int unsigned ,
hiredate date,
sal decimal(7,2),
comm decimal(7,2),
deptno int unsigned,
unique key(empno, ename)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't8');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272485    272482    empno    UNIQUE    1    0        empno    1    null    __mo_index_unique_31dfb9f7-bf4f-11ed-8c2e-000c29203f30
272485    272482    empno    UNIQUE    1    0        ename    2    null    __mo_index_unique_31dfb9f7-bf4f-11ed-8c2e-000c29203f30
272486    272482    PRIMARY    PRIMARY    1    0        empno    1    null    null
drop table if exists t9;
create table t9(id int PRIMARY KEY,name VARCHAR(255),age int);
insert into t9 values(1,"Abby", 24);
insert into t9 values(2,"Bob", 25);
insert into t9 values(3,"Carol", 23);
insert into t9 values(4,"Dora", 29);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't9');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272488    272487    PRIMARY    PRIMARY    1    0        id    1    null    null
create unique index idx on t9(name);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't9');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272488    272487    PRIMARY    PRIMARY    1    0        id    1    null    null
272490    272487    idx    UNIQUE    1    0        name    1    null    __mo_index_unique_31f3b705-bf4f-11ed-8c2e-000c29203f30
select * from t9;
id    name    age
1    Abby    24
2    Bob    25
3    Carol    23
4    Dora    29
drop table t9;
drop table if exists t10;
create table t10 (
col1 bigint primary key,
col2 varchar(25),
col3 float,
col4 varchar(50)
);
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't10');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272492    272491    PRIMARY    PRIMARY    1    0        col1    1    null    null
create unique index idx on t10(col2) comment 'create varchar index';
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't10');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272492    272491    PRIMARY    PRIMARY    1    0        col1    1    null    null
272494    272491    idx    UNIQUE    1    0    create varchar index    col2    1    null    __mo_index_unique_32035032-bf4f-11ed-8c2e-000c29203f30
insert into t10 values(1,"Abby", 24,'zbcvdf');
insert into t10 values(2,"Bob", 25,'zbcvdf');
insert into t10 values(3,"Carol", 23,'zbcvdf');
insert into t10 values(4,"Dora", 29,'zbcvdf');
select * from t10;
col1    col2    col3    col4
1    Abby    24.0    zbcvdf
2    Bob    25.0    zbcvdf
3    Carol    23.0    zbcvdf
4    Dora    29.0    zbcvdf
drop table t10;
drop table if exists t11;
create table t11(a int, b int,c varchar(20));
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't11');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
create index x11 ON t11(a) comment 'xxxxxxx';
create index x12 ON t11(b, c) comment 'yyyyyyyyy';
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't11');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272496    272495    x11    MULTIPLE    1    0    xxxxxxx    a    1    null    null
272497    272495    x12    MULTIPLE    1    0    yyyyyyyyy    b    1    null    null
272497    272495    x12    MULTIPLE    1    0    yyyyyyyyy    c    2    null    null
drop index x11 on t11;
drop index x12 on t11;
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't11');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
drop table t11;
drop table if exists t12;
create table t12(a int, b int,c varchar(20), primary key(a));
create index idx_1 on t12(a, b) comment 'xxxxxxx';
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't12');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272499    272498    PRIMARY    PRIMARY    1    0        a    1    null    null
272500    272498    idx_1    MULTIPLE    1    0    xxxxxxx    a    1    null    null
272500    272498    idx_1    MULTIPLE    1    0    xxxxxxx    b    2    null    null
create index idx_1 on t12(a, b);
duplicate key name 'idx_1'
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't12');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272499    272498    PRIMARY    PRIMARY    1    0        a    1    null    null
272500    272498    idx_1    MULTIPLE    1    0    xxxxxxx    a    1    null    null
272500    272498    idx_1    MULTIPLE    1    0    xxxxxxx    b    2    null    null
drop index idx_1 on t12;
select * from mo_catalog.mo_indexes where table_id = (select rel_id from mo_catalog.mo_tables where relname = 't12');
id    table_id    name    type    is_visible    hidden    comment    column_name    ordinal_position    options    index_table_name
272499    272498    PRIMARY    PRIMARY    1    0        a    1    null    null
drop index idx_1 on t12;
internal error: not found index: idx_1
drop table t12;
