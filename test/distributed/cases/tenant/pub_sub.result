set enable_privilege_cache = off;
create publication pub1 database t;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near ";";
create account acc0 admin_name 'root' identified by '111';
create account acc1 admin_name 'root' identified by '111';
create account acc2 admin_name 'root' identified by '111';
create database t;
create publication pub1 database t;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near ";";
create publication pub2 database t account all;
create publication pub3 database t account acc0,acc1;
create publication pub4 database t account acc0,acc1,accx;
internal error: not existed account name 'accx'
create publication pub5 database t account accx comment 'test';
internal error: not existed account name 'accx'
show publications;
publication    database    tables    sub_account    subscribed_accounts    create_time    update_time    comments
pub3    t    *    acc0,acc1        2024-07-23 15:44:18    null    
pub2    t    *    all        2024-07-23 15:44:18    null    
show create publication pub1;
Publication    Create Publication
show create publication pub2;
Publication    Create Publication
pub2    CREATE PUBLICATION pub2 DATABASE t TABLE * ACCOUNT all
show create publication pub5;
Publication    Create Publication
alter publication pub1 account acc0,acc1;
internal error: publication 'pub1' does not exist
show create publication pub1;
Publication    Create Publication
alter publication pub2 account drop acc1;
internal error: cannot drop accounts from all account option
show create publication pub2;
Publication    Create Publication
pub2    CREATE PUBLICATION pub2 DATABASE t TABLE * ACCOUNT all
alter publication pub3 account add accx;
internal error: not existed account name 'accx'
show create publication pub3;
Publication    Create Publication
pub3    CREATE PUBLICATION pub3 DATABASE t TABLE * ACCOUNT acc0,acc1
alter publication pub4 account drop acc1,acc2;
internal error: publication 'pub4' does not exist
show create publication pub4;
Publication    Create Publication
alter publication pub5 account all comment '1212';
internal error: publication 'pub5' does not exist
show create publication pub5;
Publication    Create Publication
drop publication pub1;
show publications;
publication    database    tables    sub_account    subscribed_accounts    create_time    update_time    comments
pub3    t    *    acc0,acc1        2024-07-23 15:44:18    null    
pub2    t    *    all        2024-07-23 15:44:18    null    
create publication pub1 database t;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near ";";
create publication pub1 database t;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 35 near ";";
alter publication pub1 account `all`;
internal error: publication 'pub1' does not exist
show create publication pub1;
Publication    Create Publication
show create publication pubx;
Publication    Create Publication
drop publication pub1;
drop publication pub2;
drop publication pub3;
drop publication pub4;
drop publication pub5;
drop account acc0;
drop account acc1;
drop account acc2;
drop database t;
create account acc0 admin_name 'root' identified by '111';
create account acc1 admin_name 'root' identified by '111';
create account acc2 admin_name 'root' identified by '111';
create database sys_db_1;
use sys_db_1;
create table sys_tbl_1(a int primary key );
insert into sys_tbl_1 values(1),(2),(3);
create view v1 as (select * from sys_tbl_1);
create publication sys_pub_1 database sys_db_1;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 47 near ";";
show publications;
publication    database    tables    sub_account    subscribed_accounts    create_time    update_time    comments
select pub_name, database_name, account_list from mo_catalog.mo_pubs;
pub_name    database_name    account_list
create database sub1 from sys publication sys_pub_1;
internal error: there is no publication sys_pub_1
show databases;
Database
information_schema
mo_catalog
mysql
system
system_metrics
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
use sub1;
invalid database sub1
show tables;
not connect to a database
desc sys_tbl_1;
not connect to a database
select * from sys_tbl_1 order by a;
not connect to a database
select * from sub1.sys_tbl_1;
invalid database sub1
select * from v1;
not connect to a database
show table_number from sub1;
invalid database sub1
show column_number from sys_tbl_1;
not connect to a database
show table_values from sys_tbl_1;
not connect to a database
select pub_name, database_name, account_list from mo_catalog.mo_pubs;
pub_name    database_name    account_list
create database sub1 from sys publication sys_pub_1;
internal error: there is no publication sys_pub_1
show databases;
Database
information_schema
mo_catalog
mysql
system
system_metrics
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
use sub1;
invalid database sub1
show tables;
not connect to a database
desc sys_tbl_1;
not connect to a database
select * from sys_tbl_1;
not connect to a database
select * from sub1.sys_tbl_1;
invalid database sub1
alter publication sys_pub_1 account acc1;
internal error: publication 'sys_pub_1' does not exist
select pub_name, database_name, account_list from mo_catalog.mo_pubs;
pub_name    database_name    account_list
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
select * from sub1.sys_tbl_1;
invalid database sub1
use sub1;
invalid database sub1
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
use sub1;
invalid database sub1
desc sys_tbl_1;
not connect to a database
select * from sys_tbl_1;
not connect to a database
alter publication sys_pub_1 account add acc0;
internal error: publication 'sys_pub_1' does not exist
select pub_name, database_name, account_list from mo_catalog.mo_pubs;
pub_name    database_name    account_list
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
use sub1;
invalid database sub1
desc sys_tbl_1;
not connect to a database
select * from sys_tbl_1;
not connect to a database
create database sub1 from sys publication sys_pub_1;
internal error: there is no publication sys_pub_1
use sys_db_1;
insert into sys_tbl_1 values(4);
create table sys_tbl_2(b text);
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
use sub1;
invalid database sub1
desc sys_tbl_1;
not connect to a database
desc sys_tbl_2;
not connect to a database
select * from sys_tbl_1;
not connect to a database
create database acc2_db_1;
use acc2_db_1;
create table acc2_tbl_1(q text,c int primary key auto_increment);
insert into acc2_tbl_1(q) values ('acc2'),('acc1'),('acc0'),('sys');
create publication acc2_pub_1 database acc2_db_1;
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 49 near ";";
create database sub2 from acc2 publication acc2_pub_1;
internal error: there is no publication acc2_pub_1
use sub2;
invalid database sub2
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
show tables;
Tables_in_sys_db_1
sys_tbl_1
sys_tbl_2
v1
desc acc2_tbl_1;
no such table sys_db_1.acc2_tbl_1
select * from acc2_tbl_1;
SQL parser error: table "acc2_tbl_1" does not exist
create database sub2 from acc2 publication acc2_pub_1;
internal error: there is no publication acc2_pub_1
use sub2;
invalid database sub2
show subscriptions;
pub_name    pub_account    pub_database    pub_tables    pub_comment    pub_time    sub_name    sub_time    status
desc acc2_tbl_1;
not connect to a database
select * from acc2_tbl_1;
not connect to a database
alter publication acc2_pub_1 account `sys`;
internal error: publication 'acc2_pub_1' does not exist
use acc2_db_1;
create table acc2_tbl_2(c text);
insert into acc2_tbl_1(q) values ('mo');
create database sub2 from acc2 publication acc2_pub_1;
internal error: there is no publication acc2_pub_1
select * from sub2.acc2_tbl_1;
invalid database sub2
use sub2;
invalid database sub2
show tables;
Tables_in_sys_db_1
sys_tbl_1
sys_tbl_2
v1
desc acc2_tbl_2;
no such table sys_db_1.acc2_tbl_2
select * from sub2.acc2_tbl_2;
invalid database sub2
drop database acc2_db_1;
drop publication acc2_pub_1;
drop database acc2_db_1;
Can't drop database 'acc2_db_1'; database doesn't exist
drop account acc0;
drop account acc1;
drop account acc2;
drop publication sys_pub_1;
drop database sys_db_1;
drop database sub2;
Can't drop database 'sub2'; database doesn't exist
create database sub_db4 from no_exists publication pubname4;
internal error: there is no publication account no_exists
create database db1;
create publication pubname4 database db1 comment 'publication to all tenant';
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 48 near " comment 'publication to all tenant';";
create database sub_db4 from sys publication pubname4;
internal error: can not subscribe to self
drop publication pubname4;
drop database db1;
