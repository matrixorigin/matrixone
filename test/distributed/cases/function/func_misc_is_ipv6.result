SELECT IS_IPV6('::1') AS result1;
result1
1
SELECT IS_IPV6('::1') AS valid_ipv6_1;
valid_ipv6_1
1
SELECT IS_IPV6('2001:0db8:85a3:0000:0000:8a2e:0370:7334') AS valid_ipv6_2;
valid_ipv6_2
1
SELECT IS_IPV6('2001:db8:85a3::8a2e:370:7334') AS valid_ipv6_3;
valid_ipv6_3
1
SELECT IS_IPV6('2001:db8::1') AS valid_ipv6_4;
valid_ipv6_4
1
SELECT IS_IPV6('::') AS valid_ipv6_5;
valid_ipv6_5
1
SELECT IS_IPV6('::ffff:192.168.1.1') AS valid_ipv6_6;  -- IPv4-mapped IPv6
valid_ipv6_6
0
SELECT IS_IPV6('invalid') AS invalid1;
invalid1
0
SELECT IS_IPV6('192.168.1.1') AS invalid2;  -- IPv4 address
invalid2
0
SELECT IS_IPV6('10.0.0.1') AS invalid3;  -- IPv4 address
invalid3
0
SELECT IS_IPV6('2001::gggg::1') AS invalid4;  -- Invalid hex
invalid4
0
SELECT IS_IPV6('2001::1::1') AS invalid5;  -- Multiple ::
invalid5
0
SELECT IS_IPV6('') AS invalid6;  -- Empty string
invalid6
0
SELECT IS_IPV6('2001:db8:1') AS invalid7;  -- Incomplete
invalid7
0
SELECT IS_IPV6('2001:db8:1:2:3:4:5:6:7') AS invalid8;  -- Too many segments
invalid8
0
SELECT IS_IPV6(NULL) AS null_input;
null_input
null
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::1');
INSERT INTO t1 VALUES (2, '2001:db8::1');
INSERT INTO t1 VALUES (3, '192.168.1.1');
INSERT INTO t1 VALUES (4, 'invalid');
INSERT INTO t1 VALUES (5, NULL);
INSERT INTO t1 VALUES (6, '127.0.0.1');
SELECT id, ip_str, IS_IPV6(ip_str) AS is_valid FROM t1;
id    ip_str    is_valid
1    ::1    1
2    2001:db8::1    1
3    192.168.1.1    0
4    invalid    0
5    null    null
6    127.0.0.1    0
DROP TABLE t1;
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::1'), (2, '192.168.1.1'), (3, '2001:db8::1'), (4, 'invalid');
SELECT id, ip_str FROM t1 WHERE IS_IPV6(ip_str) = 1;
id    ip_str
1    ::1
3    2001:db8::1
SELECT id, ip_str FROM t1 WHERE IS_IPV6(ip_str) = 0;
id    ip_str
2    192.168.1.1
4    invalid
DROP TABLE t1;
SELECT IS_IPV6('::1') AS ip1, IS_IPV6('192.168.1.1') AS ip2, IS_IPV6('2001:db8::1') AS ip3;
ip1    ip2    ip3
1    0    1
SELECT IS_IPV6('::1') = 1 AS is_valid_ipv6;
is_valid_ipv6
true
SELECT IS_IPV6('192.168.1.1') = 0 AS is_not_ipv6;
is_not_ipv6
true
SELECT IS_IPV6('::') AS zero_ipv6;
zero_ipv6
1
SELECT IS_IPV6('2001:db8::') AS compressed_ipv6;
compressed_ipv6
1
SELECT IS_IPV6('::ffff:192.168.1.1') AS ipv4_mapped;
ipv4_mapped
0
SELECT IS_IPV6('fe80::1%lo0') AS ipv6_with_zone;  -- May or may not be valid depending on implementation
ipv6_with_zone
0
SELECT IS_IPV6('::1') AND IS_IPV6('2001:db8::1') AS both_valid;
both_valid
true
SELECT IS_IPV6('::1') OR IS_IPV6('192.168.1.1') AS one_valid;
one_valid
true
SELECT IS_IPV4('192.168.1.1') AS is_ipv4, IS_IPV6('192.168.1.1') AS is_ipv6;
is_ipv4    is_ipv6
1    0
SELECT IS_IPV4('::1') AS is_ipv4, IS_IPV6('::1') AS is_ipv6;
is_ipv4    is_ipv6
0    1
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::1'), (2, '192.168.1.1');
SELECT (SELECT IS_IPV6(ip_str) FROM t1 WHERE id = 1) AS subquery_result;
subquery_result
1
DROP TABLE t1;
