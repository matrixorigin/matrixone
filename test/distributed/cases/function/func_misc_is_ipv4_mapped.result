SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) AS result1;
result1
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) AS valid_mapped1;
valid_mapped1
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:192.168.1.1')) AS valid_mapped2;
valid_mapped2
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:127.0.0.1')) AS valid_mapped3;
valid_mapped3
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:1.1.1.1')) AS valid_mapped4;
valid_mapped4
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:0.0.0.0')) AS valid_mapped5;  -- Even 0.0.0.0 is valid
valid_mapped5
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::1')) AS invalid1;  -- Regular IPv6, not IPv4-mapped
invalid1
0
SELECT IS_IPV4_MAPPED(INET6_ATON('2001:db8::1')) AS invalid2;  -- Regular IPv6
invalid2
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::10.0.5.9')) AS invalid3;  -- IPv4-compatible, not mapped
invalid3
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::')) AS invalid4;  -- All zeros
invalid4
0
SELECT IS_IPV4_MAPPED(INET6_ATON('2001:0db8:85a3::8a2e:370:7334')) AS invalid5;  -- Regular IPv6
invalid5
0
SELECT IS_IPV4_MAPPED(INET6_ATON('192.168.1.1')) AS invalid6;  -- IPv4 returns 4 bytes, not 16
invalid6
0
SELECT IS_IPV4_MAPPED(NULL) AS null_input;
null_input
null
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::ffff:10.0.5.9');
INSERT INTO t1 VALUES (2, '::ffff:192.168.1.1');
INSERT INTO t1 VALUES (3, '::1');
INSERT INTO t1 VALUES (4, '::10.0.5.9');
INSERT INTO t1 VALUES (5, '2001:db8::1');
INSERT INTO t1 VALUES (6, NULL);
SELECT id, ip_str, IS_IPV4_MAPPED(INET6_ATON(ip_str)) AS is_mapped FROM t1;
id    ip_str    is_mapped
1    ::ffff:10.0.5.9    0
2    ::ffff:192.168.1.1    0
3    ::1    0
4    ::10.0.5.9    0
5    2001:db8::1    0
6    null    null
DROP TABLE t1;
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::ffff:10.0.5.9'), (2, '::1'), (3, '::ffff:192.168.1.1'), (4, '2001:db8::1');
SELECT id, ip_str FROM t1 WHERE IS_IPV4_MAPPED(INET6_ATON(ip_str)) = 1;
id    ip_str
SELECT id, ip_str FROM t1 WHERE IS_IPV4_MAPPED(INET6_ATON(ip_str)) = 0;
id    ip_str
1    ::ffff:10.0.5.9
2    ::1
3    ::ffff:192.168.1.1
4    2001:db8::1
DROP TABLE t1;
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) AS ip1, IS_IPV4_MAPPED(INET6_ATON('::1')) AS ip2, IS_IPV4_MAPPED(INET6_ATON('::ffff:192.168.1.1')) AS ip3;
ip1    ip2    ip3
0    0    0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) = 1 AS is_mapped;
is_mapped
false
SELECT IS_IPV4_MAPPED(INET6_ATON('::1')) = 0 AS is_not_mapped;
is_not_mapped
true
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:0.0.0.1')) AS min_mapped;
min_mapped
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:255.255.255.255')) AS max_mapped;
max_mapped
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:127.0.0.1')) AS loopback_mapped;
loopback_mapped
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) AND IS_IPV4_MAPPED(INET6_ATON('::ffff:192.168.1.1')) AS both_mapped;
both_mapped
false
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9')) OR IS_IPV4_MAPPED(INET6_ATON('::1')) AS one_mapped;
one_mapped
false
SELECT IS_IPV4_COMPAT(INET6_ATON('::192.168.1.1')) AS ipv4_compat;
ipv4_compat
1
SELECT IS_IPV4_MAPPED(INET6_ATON('::192.168.1.1')) AS ipv4_compat_check;  -- Should be 0
ipv4_compat_check
0
SELECT IS_IPV4_COMPAT(INET6_ATON('::ffff:192.168.1.1')) AS ipv4_mapped_check;  -- Should be 0
ipv4_mapped_check
0
SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:192.168.1.1')) AS ipv4_mapped;
ipv4_mapped
0
CREATE TABLE t1(id INT, ip_str VARCHAR(50));
INSERT INTO t1 VALUES (1, '::ffff:10.0.5.9'), (2, '::1');
SELECT (SELECT IS_IPV4_MAPPED(INET6_ATON(ip_str)) FROM t1 WHERE id = 1) AS subquery_result;
subquery_result
0
DROP TABLE t1;
SELECT IS_IPV4_MAPPED(UNHEX('C0A80101')) AS invalid_length;  -- 4 bytes instead of 16
invalid_length
0
SELECT IS_IPV4_MAPPED(UNHEX('01')) AS invalid_length2;  -- Too short
invalid_length2
0
