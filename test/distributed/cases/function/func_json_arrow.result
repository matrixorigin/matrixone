SELECT j -> '$.key' AS result1 FROM (SELECT JSON_OBJECT('key', 'value') AS j) t;
â¤ result1[-1,-1,0]  ğ„€
"value"
SELECT j -> '$.b' AS result2 FROM (SELECT JSON_OBJECT('a', 1, 'b', 2) AS j) t;
â¤ result2[-1,-1,0]  ğ„€
2
SELECT j ->> '$.key' AS result3 FROM (SELECT JSON_OBJECT('key', 'value') AS j) t;
â¤ result3[-1,-1,0]  ğ„€
value
SELECT j ->> '$.b' AS result4 FROM (SELECT JSON_OBJECT('a', 1, 'b', 2) AS j) t;
â¤ result4[-1,-1,0]  ğ„€
2
SELECT j -> '$.c.d' AS nested FROM (SELECT JSON_OBJECT('a', 1, 'b', 2, 'c', JSON_OBJECT('d', 4)) AS j) t;
â¤ nested[-1,-1,0]  ğ„€
4
SELECT j ->> '$.c.d' AS nested_unquote FROM (SELECT JSON_OBJECT('a', 1, 'b', 2, 'c', JSON_OBJECT('d', 4)) AS j) t;
â¤ nested_unquote[-1,-1,0]  ğ„€
4
SELECT a -> '$[1]' AS elem1 FROM (SELECT JSON_ARRAY(10, 20, 30, 40) AS a) t;
â¤ elem1[-1,-1,0]  ğ„€
20
SELECT a ->> '$[1]' AS elem1_unquote FROM (SELECT JSON_ARRAY(10, 20, 30, 40) AS a) t;
â¤ elem1_unquote[-1,-1,0]  ğ„€
20
CREATE TABLE t_arr (id INT, a JSON);
INSERT INTO t_arr VALUES (1, '[3,10,5,17,44]');
INSERT INTO t_arr VALUES (2, '[3,10,5,17,[22,44,66]]');
INSERT INTO t_arr VALUES (3, '[1,2,3]');
SELECT a -> '$[4]' AS elem4 FROM t_arr WHERE id = 1;
â¤ elem4[-1,-1,0]  ğ„€
44
SELECT a -> '$[4]' AS elem4_nested FROM t_arr WHERE id = 2;
â¤ elem4_nested[-1,-1,0]  ğ„€
[22, 44, 66]
SELECT a -> '$[4][1]' AS nested_idx FROM t_arr WHERE id = 2;
â¤ nested_idx[-1,-1,0]  ğ„€
44
SELECT a -> '$[4][1]' AS missing_nested FROM t_arr WHERE id = 1;
â¤ missing_nested[-1,-1,0]  ğ„€
null
SELECT j -> '$.b' AS missing_key FROM (SELECT JSON_OBJECT('a', 1) AS j) t;
â¤ missing_key[-1,-1,0]  ğ„€
null
SELECT a -> '$[10]' AS out_of_range FROM t_arr WHERE id = 3;
â¤ out_of_range[-1,-1,0]  ğ„€
null
DROP TABLE t_arr;
CREATE TABLE jemp (c JSON, g INT);
INSERT INTO jemp VALUES ('{"id": "2", "name": "Wilma"}', 2);
INSERT INTO jemp VALUES ('{"id": "3", "name": "Barney"}', 3);
INSERT INTO jemp VALUES ('{"id": "4", "name": "Betty"}', 4);
SELECT c -> '$.id' AS id_json, c ->> '$.name' AS name_text FROM jemp ORDER BY g;
â¤ id_json[-1,-1,0]  Â¦  name_text[-1,-1,0]  ğ„€
"2"  Â¦  Wilma  ğ„€
"3"  Â¦  Barney  ğ„€
"4"  Â¦  Betty
SELECT c, c -> '$.id', g FROM jemp WHERE (c -> '$.id') > 1 ORDER BY (c -> '$.name');
â¤ c[-1,2147483647,0]  Â¦  c -> '$.id'[-1,-1,0]  Â¦  g[4,11,0]  ğ„€
{"id": "3", "name": "Barney"}  Â¦  "3"  Â¦  3  ğ„€
{"id": "4", "name": "Betty"}  Â¦  "4"  Â¦  4  ğ„€
{"id": "2", "name": "Wilma"}  Â¦  "2"  Â¦  2
SELECT c ->> '$.name' AS name FROM jemp WHERE g > 2 ORDER BY c ->> '$.name';
â¤ name[-1,-1,0]  ğ„€
Barney  ğ„€
Betty
DROP TABLE jemp;
CREATE TABLE tj10 (a JSON, b INT);
INSERT INTO tj10 VALUES ('[3,10,5,17,44]', 33);
INSERT INTO tj10 VALUES ('[3,10,5,17,[22,44,66]]', 0);
SELECT a -> '$[4]' AS arr_elem4 FROM tj10 ORDER BY b;
â¤ arr_elem4[-1,-1,0]  ğ„€
[22, 44, 66]  ğ„€
44
SELECT a -> '$[4][1]' AS arr_nested FROM tj10 ORDER BY b;
â¤ arr_nested[-1,-1,0]  ğ„€
44  ğ„€
null
SELECT * FROM tj10 WHERE (a -> '$[0]') = 3 ORDER BY b;
â¤ a[-1,2147483647,0]  Â¦  b[4,11,0]  ğ„€
[3, 10, 5, 17, [22, 44, 66]]  Â¦  0  ğ„€
[3, 10, 5, 17, 44]  Â¦  33
SELECT a ->> '$[4][1]' AS unquote_nested FROM tj10 ORDER BY b;
â¤ unquote_nested[-1,-1,0]  ğ„€
44  ğ„€
null
DROP TABLE tj10;
CREATE TABLE tj_mixed (a JSON, b INT);
INSERT INTO tj_mixed VALUES ('[3,10,5,"x",44]', 33);
INSERT INTO tj_mixed VALUES ('[3,10,5,17,[22,"y",66]]', 0);
SELECT a -> '$[3]' AS with_quotes, a -> '$[4][1]' AS nested FROM tj_mixed ORDER BY b;
â¤ with_quotes[-1,-1,0]  Â¦  nested[-1,-1,0]  ğ„€
17  Â¦  "y"  ğ„€
"x"  Â¦  null
SELECT a ->> '$[3]' AS no_quotes, a ->> '$[4][1]' AS nested_unquote FROM tj_mixed ORDER BY b;
â¤ no_quotes[-1,-1,0]  Â¦  nested_unquote[-1,-1,0]  ğ„€
17  Â¦  y  ğ„€
x  Â¦  null
DROP TABLE tj_mixed;
