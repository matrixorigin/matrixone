set time_zone="+00:00";
SELECT IF(NULL AND 1, 1, 2), IF(1 AND NULL, 1, 2);
â¤ IF(null and 1, 1, 2)[-5,64,0]  Â¦  IF(1 and null, 1, 2)[-5,64,0]  ğ„€
2  Â¦  2
create table t1 (a int);
insert into t1 values (0),(1),(NULL);
SELECT * FROM t1 WHERE IF(a AND 1, 0, 1);
â¤ a[4,32,0]  ğ„€
0  ğ„€
null
SELECT * FROM t1 WHERE IF(1 AND a, 0, 1);
â¤ a[4,32,0]  ğ„€
0  ğ„€
null
drop table t1;
drop table if exists t;
CREATE TABLE t (i1 INT,
d1 DOUBLE,
e2 DECIMAL(5,2));
INSERT INTO t VALUES ( 6,    6.0,  10.0/3),
( null, 9.0,  10.0/3),
( 1,    null, 10.0/3),
( 2,    2.0,  null  );
SELECT coalesce(e2,i1) nullif_c, IF(e2 IS NULL,i1,e2) if_c, SUM(d1) FROM t GROUP BY e2,i1 ORDER BY nullif_c, SUM(d1);
â¤ nullif_c[3,18,2]  Â¦  if_c[3,18,2]  Â¦  SUM(d1)[8,54,0]  ğ„€
2.00  Â¦  2.00  Â¦  2.0  ğ„€
3.33  Â¦  3.33  Â¦  null  ğ„€
3.33  Â¦  3.33  Â¦  6.0  ğ„€
3.33  Â¦  3.33  Â¦  9.0
DROP TABLE t;
CREATE TABLE source(bt INTEGER, bf INTEGER, i8u BIGINT UNSIGNED, i8s BIGINT);
INSERT INTO source VALUES
(1,0,0,-9223372036854775808), (1,0,18446744073709551615,9223372036854775807);
SELECT IF(bt,i8u,i8s) AS u, IF(bf,i8u,i8s) AS s
FROM source;
Data truncation: data out of range: data type int64, value '18446744073709551615'
DROP TABLE source;
create table t1 (num  double(12,2));
insert into t1 values (144.54);
select sum(if(num is null,0.00,num)) from t1;
â¤ sum(if(num is null, 0.00, num))[8,54,0]  ğ„€
144.54
drop table t1;
select if(1, cast(1111111111111111111 as unsigned), 1) i, case when 1 then cast(1111111111111111111 as unsigned) else 1 end c, coalesce(cast(1111111111111111111 as unsigned), 1) co;
â¤ i[-5,64,0]  Â¦  c[-5,64,0]  Â¦  co[-5,64,0]  ğ„€
1111111111111111111  Â¦  1111111111111111111  Â¦  1111111111111111111
create table t1 (a bigint unsigned);
insert into t1 select (if(1, 9223372036854775808, 1));
Data truncation: data out of range: data type int64, value '9223372036854775808'
insert into t1 select (case when 1 then 9223372036854775808 else 1 end);
Data truncation: data out of range: data type int64, value '9223372036854775808'
insert into t1 select (coalesce(9223372036854775808, 1));
Data truncation: data out of range: data type int64, value '9223372036854775808'
select * from t1;
â¤ a[-5,64,0]
drop table t1;
drop table if exists t;
CREATE TABLE t (i1 INT,
d1 DOUBLE,
e2 DECIMAL(5,2));
INSERT INTO t VALUES ( 6,    6.0,  10.0/3),
( null, 9.0,  10.0/3),
( 1,    null, 10.0/3),
( 2,    2.0,  null  );
SELECT IF(e2 IS NULL,i1,e2) if_c,
SUM(d1) FROM t
GROUP BY e2,i1 ORDER BY SUM(d1);
â¤ if_c[3,18,2]  Â¦  SUM(d1)[8,54,0]  ğ„€
3.33  Â¦  null  ğ„€
2.00  Â¦  2.0  ğ„€
3.33  Â¦  6.0  ğ„€
3.33  Â¦  9.0
DROP TABLE t;
create table t1 (f1 int, f2 int);
insert into t1 values (0,1),(1,2);
select count(distinct if(f1,3,f2)) from t1;
â¤ count(distinct if(f1, 3, f2))[-5,64,0]  ğ„€
2
drop table t1;
CREATE TABLE `t2` (
`CONCAT_WS(' ',a)` varchar(9) DEFAULT NULL,
`IF(a,a,'')` varchar(9) DEFAULT NULL,
`CASE WHEN a THEN a ELSE '' END` varchar(9) DEFAULT NULL,
`COALESCE(a,'')` varchar(9) NOT NULL DEFAULT ''
);
DROP TABLE t2;
CREATE TABLE t1 (a INT);
SELECT a FROM t1 WHERE a IN(1, (SELECT IF(1=0,1,2/1)));
â¤ a[4,32,0]
INSERT INTO t1 VALUES(1);
SELECT a FROM t1 WHERE a IN(1, (SELECT IF(1=0,1,2/1)));
â¤ a[4,32,0]  ğ„€
1
INSERT INTO t1 VALUES(2),(3);
SELECT a FROM t1 WHERE a IN(1, (SELECT IF(1=0,1,2/1)));
â¤ a[4,32,0]  ğ„€
1  ğ„€
2
DROP TABLE t1;
select IF(0,"ERROR","this"),IF(1,"is","ERROR"),IF(NULL,"ERROR","a"),IF(1,2,3)|0,IF(1,2.0,3.0)+0 ;
invalid argument function if, bad value [ANY VARCHAR VARCHAR]
CREATE TABLE t1 (st varchar(255) NOT NULL, u int(11) NOT NULL);
[unknown result because it is related to issue#3334]
INSERT INTO t1 VALUES ('a',1),('A',1),('aa',1),('AA',1),('a',1),('aaa',0),('BBB',0);
[unknown result because it is related to issue#3334]
select if(1,st,st) s from t1 order by s;
[unknown result because it is related to issue#3334]
select if(u=1,st,st) s from t1 order by s;
[unknown result because it is related to issue#3334]
select if(u=1,st,st) s from t1 where st like "%a%" order by s;
[unknown result because it is related to issue#3334]
drop table t1;
[unknown result because it is related to issue#3334]
create table t1 (num  double(12,2));
insert into t1 values (144.54);
select sum(if(num is null,0.00,num)) from t1;
â¤ sum(if(num is null, 0.00, num))[8,54,0]  ğ„€
144.54
drop table t1;
create table t1 (x int, y int);
insert into t1 values (0,6),(10,16),(20,26),(30,10),(40,46),(50,56);
select min(if(y -x > 5,y,NULL)), max(if(y - x > 5,y,NULL)) from t1;
â¤ min(if(y - x > 5, y, null))[4,32,0]  Â¦  max(if(y - x > 5, y, null))[4,32,0]  ğ„€
6  Â¦  56
drop table t1;
create table t1 (a int);
insert t1 values (1),(2);
select if(1>2,a,avg(a)) from t1;
SQL syntax error: column "t1.a" must appear in the GROUP BY clause or be used in an aggregate function
drop table t1;
CREATE TABLE `t1` (
`id` int(11) NOT NULL ,
`date` int(10) default NULL,
`text` varchar(32) NOT NULL
);
INSERT INTO t1 VALUES (1,1110000000,'Day 1'),(2,1111000000,'Day 2'),(3,1112000000,'Day 3');
SELECT id, IF(date IS NULL, '-', FROM_UNIXTIME(date, '%d-%m-%Y')) AS date_ord, text FROM t1 ORDER BY date_ord ASC;
â¤ id[4,32,0]  Â¦  date_ord[12,-1,0]  Â¦  text[12,-1,0]  ğ„€
1  Â¦  05-03-2005  Â¦  Day 1  ğ„€
2  Â¦  16-03-2005  Â¦  Day 2  ğ„€
3  Â¦  28-03-2005  Â¦  Day 3
SELECT id, IF(date IS NULL, '-', FROM_UNIXTIME(date, '%d-%m-%Y')) AS date_ord, text FROM t1 ORDER BY date_ord DESC;
â¤ id[4,32,0]  Â¦  date_ord[12,-1,0]  Â¦  text[12,-1,0]  ğ„€
3  Â¦  28-03-2005  Â¦  Day 3  ğ„€
2  Â¦  16-03-2005  Â¦  Day 2  ğ„€
1  Â¦  05-03-2005  Â¦  Day 1
DROP TABLE t1;
create table t1 (f1 int, f2 int);
insert into t1 values(1,1),(0,0);
select f1, any_value(f2), if(f1, 40.0, 5.00) from t1 group by f1;
â¤ f1[4,32,0]  Â¦  any_value(f2)[4,32,0]  Â¦  if(f1, 40.0, 5.00)[3,18,2]  ğ„€
1  Â¦  1  Â¦  40.00  ğ„€
0  Â¦  0  Â¦  5.00
drop table t1;
select if(0, 18446744073709551610, 18446744073709551610);
â¤ if(0, 18446744073709551610, 18446744073709551610)[-5,64,0]  ğ„€
18446744073709551610
CREATE TABLE t1(a DECIMAL(10,3));
SELECT t1.a,
IF((ROUND(t1.a,2)=1), 2,
IF((ROUND(t1.a,2)=1), 2,
IF((ROUND(t1.a,2)=1), 2,
IF((ROUND(t1.a,2)=1), 2,0)))) + 1 FROM t1;
â¤ a[3,10,3]  Â¦  IF((ROUND(t1.a, 2) = 1), 2, IF((ROUND(t1.a, 2) = 1), 2, IF((ROUND(t1.a, 2) = 1), 2, IF((ROUND(t1.a, 2) = 1), 2, 0)))) + 1[-5,64,0]
DROP TABLE t1;
CREATE TABLE t1 (c varchar(255));
INSERT INTO t1 VALUES(1), (2), (3), (4), ('12345678901234567890');
SELECT * FROM (SELECT MAX(IF(1, CAST(c AS UNSIGNED), 0)) FROM t1) AS te;
Data truncation: data out of range: data type int64, value '12345678901234567890'
DROP TABLE t1;
CREATE TABLE t1 (a int, b DOUBLE);
[unknown result because it is related to issue#3265]
INSERT INTO t1 VALUES (NULL, 0), (NULL, 1);
[unknown result because it is related to issue#3265]
SELECT IF(b, (SELECT a FROM t1 LIMIT 1), b) c FROM t1 GROUP BY c;
[unknown result because it is related to issue#3265]
DROP TABLE t1;
[unknown result because it is related to issue#3265]
SELECT if(0, (SELECT min('hello')), NULL);
â¤ if(0, (select min(hello)), null)[12,-1,0]  ğ„€
null
SELECT if(1, (SELECT min('hello')), NULL);
â¤ if(1, (select min(hello)), null)[12,-1,0]  ğ„€
hello
SELECT if(0, NULL, (SELECT min('hello')));
â¤ if(0, null, (select min(hello)))[12,-1,0]  ğ„€
hello
SELECT if(1, NULL, (SELECT min('hello')));
â¤ if(1, null, (select min(hello)))[12,-1,0]  ğ„€
null
CREATE TABLE t1(c1 INT);
INSERT INTO t1 VALUES(1);
UPDATE t1 SET c1 = 2 WHERE IF(true, '2015-01-01', '2015-01-01') IS NOT NULL;
DROP TABLE t1;
CREATE TABLE test_grids_1 (
unq_id int(11) NOT NULL DEFAULT 0,
var_fld int(11) DEFAULT 0
);
INSERT INTO test_grids_1 VALUES
(1,4500),
(2,6000);
CREATE TABLE test_grid_dtl_1 (
dtl_id int(11) NOT NULL DEFAULT 0,
unq_id int(11) DEFAULT 0
);
INSERT INTO test_grid_dtl_1 VALUES
(1,1),
(2,1),
(3,2);
SELECT g.calc_var, g.if_var, g.case_var
FROM
(
SELECT unq_id,
IF ( var_fld  > 5000, (     1 / var_fld ) , 5000 ) calc_var,
IF ( var_fld  > 5000, ( 00001 / var_fld ) , 5000 ) if_var,
CASE  var_fld  > 5000 WHEN TRUE THEN ( 1 / var_fld ) ELSE 5000 END case_var
FROM
test_grids_1
) g
JOIN
test_grid_dtl_1 d USING (unq_id)
ORDER BY 1
;
â¤ calc_var[8,54,0]  Â¦  if_var[8,54,0]  Â¦  case_var[8,54,0]  ğ„€
1.6666666666666666E-4  Â¦  1.6666666666666666E-4  Â¦  1.6666666666666666E-4  ğ„€
5000.0  Â¦  5000.0  Â¦  5000.0  ğ„€
5000.0  Â¦  5000.0  Â¦  5000.0
DROP TABLE test_grids_1;
drop table test_grid_dtl_1;
CREATE TABLE t1(a INT,b INT,c INT);
INSERT INTO t1 VALUES(1,0,0),(1,2,0),(1,0,3),(1,2,3);
SELECT if(c = 0, if(b = 0, a, a / b), if(b = 0, a / c, a / b / c)) FROM t1;
if(c = 0, if(b = 0, a, a / b), if(b = 0, a / c, a / b / c))
1
0.5
0.3333333333333333
0.16666666666666666
DROP TABLE t1;
SET TIME_ZONE = "SYSTEM";
