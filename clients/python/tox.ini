[tox]
envlist = 
    # Core matrix testing (SQLAlchemy 1.4 + 2.0)
    sqlalchemy14,
    sqlalchemy20

[testenv]
deps =
    sqlalchemy14: -r requirements-sqlalchemy14.txt
    sqlalchemy20: -r requirements-sqlalchemy20.txt

commands =
    pytest tests/offline/ -v --tb=short
    pytest tests/online/ -v --tb=short --maxfail=3

[testenv:lint]
deps =
    black>=22.0
    flake8>=4.0
    mypy>=0.950
    isort>=5.0
commands =
    black matrixone/ --check --diff
    flake8 matrixone/ --max-line-length=120 --ignore=E203,W503
    isort matrixone/ --check-only --diff
    mypy matrixone/ --ignore-missing-imports